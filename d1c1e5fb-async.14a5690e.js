(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["d1c1e5fb"],{"37067cce":function(e,t,n){let r;n.d(t,"__esModule",{value:!0}),n.e(t,{default:function(){return am;}});var i,s=n("777fffbe"),a=n("852bbaa9"),l=n("55ead7c2"),o=n("4f9a6dd7"),c=n("69438d75"),d=n("9884f11f"),u=n("2cff20a4"),h=s._(u),p=n("1562eae4"),f=a._(p),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},g=n("06581d3d"),v=s._(g),b=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:m}));}),y=n("01e7b407"),E=s._(y),x=n("561a3a41"),S=s._(x),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},w=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:T}));}),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},R=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:C}));}),D=n("e07956ac"),j=s._(D),O=n("087ffc02"),I=n("e01ad947"),N=n("ca00c54b"),M=n("fcaf15d4"),k=n("a1a5e1d7"),P=class extends k.Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map;}#e;build(e,t,n){let r=t.queryKey,i=t.queryHash??(0,I.hashQueryKeyByOptions)(r,t),s=this.get(i);return s||(s=new N.Query({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(s)),s;}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}));}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}));}clear(){M.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e);});});}get(e){return this.#e.get(e);}getAll(){return[...this.#e.values()];}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,I.matchQuery)(t,e));}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,I.matchQuery)(e,t)):t;}notify(e){M.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e);});});}onFocus(){M.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus();});});}onOnline(){M.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline();});});}},A=n("fc8451f9"),L=class extends k.Subscribable{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#r=0;}#t;#n;#r;build(e,t,n){let r=new A.Mutation({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:n});return this.add(r),r;}add(e){this.#t.add(e);let t=H(e);if("string"==typeof t){let n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e]);}this.notify({type:"added",mutation:e});}remove(e){if(this.#t.delete(e)){let t=H(e);if("string"==typeof t){let n=this.#n.get(t);if(n){if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1);}else n[0]===e&&this.#n.delete(t);}}}this.notify({type:"removed",mutation:e});}canRun(e){let t=H(e);if("string"!=typeof t)return!0;{let n=this.#n.get(t),r=null==n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e;}}runNext(e){let t=H(e);if("string"!=typeof t)return Promise.resolve();{var n;let r=null===(n=this.#n.get(t))||void 0===n?void 0:n.find(t=>t!==e&&t.state.isPaused);return(null==r?void 0:r.continue())??Promise.resolve();}}clear(){M.notifyManager.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e});}),this.#t.clear(),this.#n.clear();});}getAll(){return Array.from(this.#t);}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,I.matchMutation)(t,e));}findAll(e={}){return this.getAll().filter(t=>(0,I.matchMutation)(e,t));}notify(e){M.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e);});});}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return M.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(I.noop))));}};function H(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id;}var F=n("ca6ec5ea"),U=n("6814d204");function _(e){return{onFetch:(t,n)=>{var r,i,s,a,l;let o=t.options,c=null===(s=t.fetchOptions)||void 0===s?void 0:null===(i=s.meta)||void 0===i?void 0:null===(r=i.fetchMore)||void 0===r?void 0:r.direction,d=(null===(a=t.state.data)||void 0===a?void 0:a.pages)||[],u=(null===(l=t.state.data)||void 0===l?void 0:l.pageParams)||[],h={pages:[],pageParams:[]},p=0,f=async()=>{let n=!1,r=e=>{(0,I.addConsumeAwareSignal)(e,()=>t.signal,()=>n=!0);},i=(0,I.ensureQueryFn)(t.options,t.fetchOptions),s=async(e,s,a)=>{if(n)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);let l=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:a?"backward":"forward",meta:t.options.meta};return r(e),e;})(),o=await i(l),{maxPages:c}=t.options,d=a?I.addToStart:I.addToEnd;return{pages:d(e.pages,o,c),pageParams:d(e.pageParams,s,c)};};if(c&&d.length){let e="backward"===c,t={pages:d,pageParams:u},n=(e?function(e,{pages:t,pageParams:n}){var r;return t.length>0?null===(r=e.getPreviousPageParam)||void 0===r?void 0:r.call(e,t[0],t,n[0],n):void 0;}:V)(o,t);h=await s(t,n,e);}else{let t=e??d.length;do{let e=0===p?u[0]??o.initialPageParam:V(o,h);if(p>0&&null==e)break;h=await s(h,e),p++;}while(p<t)}return h;};t.options.persister?t.fetchFn=()=>{var e,r;return null===(e=(r=t.options).persister)||void 0===e?void 0:e.call(r,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n);}:t.fetchFn=f;}};}function V(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0;}var z=class{#i;#s;#a;#l;#o;#c;#d;#u;constructor(e={}){this.#i=e.queryCache||new P,this.#s=e.mutationCache||new L,this.#a=e.defaultOptions||{},this.#l=new Map,this.#o=new Map,this.#c=0;}mount(){this.#c++,1===this.#c&&(this.#d=F.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onFocus());}),this.#u=U.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#i.onOnline());}));}unmount(){var e,t;this.#c--,0===this.#c&&(null===(e=this.#d)||void 0===e||e.call(this),this.#d=void 0,null===(t=this.#u)||void 0===t||t.call(this),this.#u=void 0);}isFetching(e){return this.#i.findAll({...e,fetchStatus:"fetching"}).length;}isMutating(e){return this.#s.findAll({...e,status:"pending"}).length;}getQueryData(e){var t;let n=this.defaultQueryOptions({queryKey:e});return null===(t=this.#i.get(n.queryHash))||void 0===t?void 0:t.state.data;}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#i.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,I.resolveStaleTime)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r));}getQueriesData(e){return this.#i.findAll(e).map(({queryKey:e,state:t})=>[e,t.data]);}setQueryData(e,t,n){let r=this.defaultQueryOptions({queryKey:e}),i=this.#i.get(r.queryHash),s=null==i?void 0:i.state.data,a=(0,I.functionalUpdate)(t,s);if(void 0!==a)return this.#i.build(this,r).setData(a,{...n,manual:!0});}setQueriesData(e,t,n){return M.notifyManager.batch(()=>this.#i.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]));}getQueryState(e){var t;let n=this.defaultQueryOptions({queryKey:e});return null===(t=this.#i.get(n.queryHash))||void 0===t?void 0:t.state;}removeQueries(e){let t=this.#i;M.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e);});});}resetQueries(e,t){let n=this.#i;return M.notifyManager.batch(()=>(n.findAll(e).forEach(e=>{e.reset();}),this.refetchQueries({type:"active",...e},t)));}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(M.notifyManager.batch(()=>this.#i.findAll(e).map(e=>e.cancel(n)))).then(I.noop).catch(I.noop);}invalidateQueries(e,t={}){return M.notifyManager.batch(()=>(this.#i.findAll(e).forEach(e=>{e.invalidate();}),(null==e?void 0:e.refetchType)==="none")?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t));}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(M.notifyManager.batch(()=>this.#i.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(I.noop)),"paused"===e.state.fetchStatus?Promise.resolve():t;}))).then(I.noop);}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#i.build(this,t);return n.isStaleByTime((0,I.resolveStaleTime)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data);}prefetchQuery(e){return this.fetchQuery(e).then(I.noop).catch(I.noop);}fetchInfiniteQuery(e){return e.behavior=_(e.pages),this.fetchQuery(e);}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(I.noop).catch(I.noop);}ensureInfiniteQueryData(e){return e.behavior=_(e.pages),this.ensureQueryData(e);}resumePausedMutations(){return U.onlineManager.isOnline()?this.#s.resumePausedMutations():Promise.resolve();}getQueryCache(){return this.#i;}getMutationCache(){return this.#s;}getDefaultOptions(){return this.#a;}setDefaultOptions(e){this.#a=e;}setQueryDefaults(e,t){this.#l.set((0,I.hashKey)(e),{queryKey:e,defaultOptions:t});}getQueryDefaults(e){let t=[...this.#l.values()],n={};return t.forEach(t=>{(0,I.partialMatchKey)(e,t.queryKey)&&Object.assign(n,t.defaultOptions);}),n;}setMutationDefaults(e,t){this.#o.set((0,I.hashKey)(e),{mutationKey:e,defaultOptions:t});}getMutationDefaults(e){let t=[...this.#o.values()],n={};return t.forEach(t=>{(0,I.partialMatchKey)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions);}),n;}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,I.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===I.skipToken&&(t.enabled=!1),t;}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...this.#a.mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0};}clear(){this.#i.clear(),this.#s.clear();}},$=n("7c781048"),G=n("0b47ad95"),q=s._(G),Y=n("d74b13ea"),W=s._(Y),B=n("9a00611e"),Q=s._(B),K=n("45fef190"),X=s._(K),Z=n("c85d4262"),J=s._(Z),ee=n("d33cbaa1"),et=n("aaacbfea"),en=s._(et),er=n("15eab205"),ei=s._(er),es=n("84137174"),ea=s._(es),el=n("3d36a38b"),eo=s._(el),ec=n("4f848e75"),ed=s._(ec),eu=n("2a920a8f"),eh=s._(eu),ep=n("df1ec967"),ef=s._(ep);let em=[{id:"p1",title:"Ph\xe1t th\xf4ng b\xe1o ti\xeam ch\u1EE7ng",user:"Nguyen Van A",createdAt:"2024-05-20 08:00",status:ee.ScheduleStatus.PENDING_APPROVAL},{id:"p2",title:"L\u1ECBch ph\xe1t nh\u1EA1c cu\u1ED1i tu\u1EA7n",user:"Tran Thi B",createdAt:"2024-05-21 09:00",status:ee.ScheduleStatus.PENDING_APPROVAL}],eg=()=>{let[e,t]=(0,f.useState)(em),n=e=>{eh.default.success("\u0110\xe3 duy\u1EC7t l\u1ECBch ph\xe1t!"),t(t=>t.filter(t=>t.id!==e));},r=e=>{eh.default.info("\u0110\xe3 t\u1EEB ch\u1ED1i l\u1ECBch ph\xe1t!"),t(t=>t.filter(t=>t.id!==e));};return(0,l.jsxs)(eo.default,{title:"Duy\u1EC7t l\u1ECBch ch\u1EDD (Admin)",className:"mt-4",extra:(0,l.jsxs)(ef.default,{color:"orange",children:[e.length," ch\u1EDD duy\u1EC7t"]}),children:[(0,l.jsx)(ed.default,{itemLayout:"horizontal",dataSource:e,renderItem:e=>(0,l.jsx)(ed.default.Item,{actions:[(0,l.jsx)(W.default,{type:"text",icon:(0,l.jsx)(en.default,{style:{color:"green"}}),onClick:()=>n(e.id),children:"Duy\u1EC7t"}),(0,l.jsx)(W.default,{type:"text",icon:(0,l.jsx)(ei.default,{style:{color:"red"}}),danger:!0,onClick:()=>r(e.id),children:"T\u1EEB ch\u1ED1i"})],children:(0,l.jsx)(ed.default.Item.Meta,{avatar:(0,l.jsx)(ea.default,{style:{backgroundColor:"#f56a00"},children:e.user[0]}),title:e.title,description:`Ng\u{1B0}\u{1EDD}i t\u{1EA1}o: ${e.user} | Ng\xe0y t\u{1EA1}o: ${e.createdAt}`})})}),0===e.length&&(0,l.jsx)("div",{className:"text-center text-gray-400 py-4",children:"Kh\xf4ng c\xf3 l\u1ECBch n\xe0o c\u1EA7n duy\u1EC7t"})]});};var ev=n("5f42ba33"),eb=s._(ev),ey={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},eE=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:ey}));}),ex=n("0aff6937"),eS=s._(ex),eT=n("20c87339"),ew=s._(eT),eC=n("3f263bc5"),eR=s._(eC),eD=n("b4d1064a"),ej=s._(eD);let eO=({conflicts:e,schedules:t})=>{if(0===e.length)return(0,l.jsx)(ew.default,{description:"Kh\xf4ng c\xf3 xung \u0111\u1ED9t n\xe0o",image:ew.default.PRESENTED_IMAGE_SIMPLE});let n=new Map(t.map(e=>[e.id,e])),r=e.map((e,t)=>{let r=n.get(e.scheduleId),i=n.get(e.conflictingScheduleId);return{key:t,conflict:e,schedule1:r,schedule2:i};}),i=[{title:"STT",key:"index",width:60,render:(e,t,n)=>n+1},{title:"L\u1ECBch 1",key:"schedule1",render:(e,t)=>{var n,r;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold",children:null===(n=t.schedule1)||void 0===n?void 0:n.title}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,l.jsx)(eb.default,{className:"mr-1"}),(0,ej.default)(null===(r=t.schedule1)||void 0===r?void 0:r.startTime).format("DD/MM/YYYY HH:mm")]})]});}},{title:"L\u1ECBch 2",key:"schedule2",render:(e,t)=>{var n,r;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold",children:null===(n=t.schedule2)||void 0===n?void 0:n.title}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,l.jsx)(eb.default,{className:"mr-1"}),(0,ej.default)(null===(r=t.schedule2)||void 0===r?void 0:r.startTime).format("DD/MM/YYYY HH:mm")]})]});}},{title:"L\xfd do",key:"reason",render:(e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:{TIME_OVERLAP:"Tr\xf9ng th\u1EDDi gian",DEVICE_OVERLAP:"Tr\xf9ng thi\u1EBFt b\u1ECB",RELAY_OVERRIDE:"L\u1ECBch ti\u1EBFp s\xf3ng ghi \u0111\xe8"}[t.conflict.reason]}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:t.conflict.description})]})},{title:"M\u1EE9c \u0111\u1ED9",key:"severity",width:100,render:(e,t)=>{let n={HIGH:{color:"red",text:"Cao",icon:(0,l.jsx)(eE,{})},MEDIUM:{color:"orange",text:"Trung b\xecnh",icon:null},LOW:{color:"blue",text:"Th\u1EA5p",icon:null}}[t.conflict.severity];return(0,l.jsx)(ef.default,{color:n.color,icon:n.icon,children:n.text});}}],s=e.filter(e=>"HIGH"===e.severity).length;return(0,l.jsxs)("div",{children:[s>0&&(0,l.jsx)(eS.default,{message:`C\xf3 ${s} xung \u{111}\u{1ED9}t m\u{1EE9}c \u{111}\u{1ED9} cao c\u{1EA7}n x\u{1EED} l\xfd`,type:"error",showIcon:!0,className:"mb-4"}),(0,l.jsx)(eR.default,{dataSource:r,columns:i,pagination:!1,size:"small",scroll:{y:400}})]});};var eI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},eN=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eI}));}),eM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},ek=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eM}));}),eP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},eA=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eP}));}),eL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},eH=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eL}));}),eF=n("18102c0e"),eU=s._(eF);let e_=({isRecording:e,audioStream:t,status:n})=>{let r=(0,f.useRef)(null),i=(0,f.useRef)(void 0),s=(0,f.useRef)(void 0),a=(0,f.useRef)(void 0);return(0,f.useEffect)(()=>{if(!e||!t||"recording"!==n){i.current&&cancelAnimationFrame(i.current);return;}let l=new AudioContext,o=l.createAnalyser();l.createMediaStreamSource(t).connect(o),o.fftSize=2048,s.current=l,a.current=o;let c=o.frequencyBinCount,d=new Uint8Array(c),u=()=>{if(!r.current||!a.current)return;let e=r.current,t=e.getContext("2d");if(!t)return;a.current.getByteTimeDomainData(d);let n=t.createLinearGradient(0,0,0,e.height);n.addColorStop(0,"#fef2f2"),n.addColorStop(1,"#fee2e2"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),t.lineWidth=3,t.strokeStyle="#ef4444",t.shadowBlur=10,t.shadowColor="rgba(239, 68, 68, 0.5)",t.beginPath();let s=1*e.width/c,l=0;for(let n=0;n<c;n++){let r=d[n]/128*e.height/2;0===n?t.moveTo(l,r):t.lineTo(l,r),l+=s;}t.lineTo(e.width,e.height/2),t.stroke(),i.current=requestAnimationFrame(u);};return u(),()=>{i.current&&cancelAnimationFrame(i.current),s.current&&s.current.close();};},[e,t,n]),(0,f.useEffect)(()=>{if("paused"===n||"completed"===n){let e=r.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let i=t.createLinearGradient(0,0,0,e.height);"paused"===n?(i.addColorStop(0,"#fffbeb"),i.addColorStop(1,"#fef3c7")):(i.addColorStop(0,"#ecfdf5"),i.addColorStop(1,"#d1fae5")),t.fillStyle=i,t.fillRect(0,0,e.width,e.height),t.strokeStyle="paused"===n?"#f59e0b":"#10b981",t.lineWidth=2,t.beginPath(),t.moveTo(0,e.height/2),t.lineTo(e.width,e.height/2),t.stroke();}},[n]),(0,l.jsx)("div",{className:"w-full flex justify-center",children:(0,l.jsx)("canvas",{ref:r,width:600,height:150,className:"border-2 border-gray-200 rounded-lg shadow-sm",style:{maxWidth:"100%"}})});},eV=({status:e,duration:t,audioStream:n,deviceCount:r,onStart:i,onPause:s,onResume:a,onStop:o,onSave:c})=>{let d=(()=>{switch(e){case"idle":return{bgClass:"bg-gradient-to-br from-blue-50 to-indigo-50",borderClass:"border-blue-200",iconClass:"text-blue-500",statusText:null};case"recording":return{bgClass:"bg-gradient-to-br from-red-50 to-orange-50",borderClass:"border-red-300",iconClass:"text-red-500 animate-pulse",statusText:(0,l.jsx)(q.default,{status:"processing",text:"\u0110ANG PH\xc1T THANH",className:"text-lg font-bold text-red-600"})};case"paused":return{bgClass:"bg-gradient-to-br from-amber-50 to-yellow-50",borderClass:"border-amber-300",iconClass:"text-amber-500",statusText:(0,l.jsx)(q.default,{status:"warning",text:"T\u1EA0M D\u1EEANG",className:"text-lg font-bold text-amber-600"})};case"completed":return{bgClass:"bg-gradient-to-br from-green-50 to-emerald-50",borderClass:"border-green-300",iconClass:"text-green-500",statusText:(0,l.jsx)(q.default,{status:"success",text:"\u0110\xc3 K\u1EBET TH\xdaC",className:"text-lg font-bold text-green-600"})};}})();return(0,l.jsxs)("div",{className:`${d.bgClass} ${d.borderClass} border-2 rounded-xl p-8 transition-all duration-300`,children:[d.statusText&&(0,l.jsx)("div",{className:"flex justify-center mb-4",children:d.statusText}),(0,l.jsx)("div",{className:"flex justify-center mb-6",children:(0,l.jsx)("div",{className:`${d.iconClass} transition-all duration-300`,style:{fontSize:"120px"},children:(0,l.jsx)(E.default,{})})}),"idle"===e&&(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)("p",{className:"text-xl text-gray-600 font-medium",children:"Nh\u1EA5n n\xfat b\xean d\u01B0\u1EDBi \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u ph\xe1t thanh"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Vui l\xf2ng ch\u1ECDn \u0111\u01A1n v\u1ECB v\xe0 thi\u1EBFt b\u1ECB tr\u01B0\u1EDBc khi b\u1EAFt \u0111\u1EA7u"})]}),"idle"!==e&&(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(e_,{isRecording:"recording"===e,audioStream:n,status:e})}),"idle"!==e&&(0,l.jsx)("div",{className:"text-center mb-6",children:(0,l.jsx)("div",{className:"text-5xl font-mono font-bold text-gray-800",children:(e=>{let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;})(t)})}),"recording"===e&&r>0&&(0,l.jsx)("div",{className:"text-center mb-6",children:(0,l.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border-2 border-red-200 shadow-sm",children:[(0,l.jsx)("span",{className:"text-red-500 text-xl",children:"\u{1F4E1}"}),(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\u0110ang ph\xe1t \u0111\u1EBFn"," ",(0,l.jsx)("span",{className:"font-bold text-red-600",children:r})," ","thi\u1EBFt b\u1ECB"]})]})}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)(eU.default,{size:"large",children:["idle"===e&&(0,l.jsx)(W.default,{type:"primary",danger:!0,size:"large",icon:(0,l.jsx)(E.default,{}),onClick:i,className:"h-12 px-8 text-lg font-semibold",children:"B\u1EAFt \u0111\u1EA7u ph\xe1t thanh"}),"recording"===e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.default,{size:"large",icon:(0,l.jsx)(eN,{}),onClick:s,className:"h-12 px-6",children:"T\u1EA1m d\u1EEBng"}),(0,l.jsx)(W.default,{danger:!0,size:"large",icon:(0,l.jsx)(eH,{}),onClick:o,className:"h-12 px-6",children:"K\u1EBFt th\xfac"})]}),"paused"===e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.default,{type:"primary",size:"large",icon:(0,l.jsx)(ek,{}),onClick:a,className:"h-12 px-6",children:"Ti\u1EBFp t\u1EE5c"}),(0,l.jsx)(W.default,{danger:!0,size:"large",icon:(0,l.jsx)(eH,{}),onClick:o,className:"h-12 px-6",children:"K\u1EBFt th\xfac"})]}),"completed"===e&&(0,l.jsx)(W.default,{type:"primary",size:"large",icon:(0,l.jsx)(eA,{}),onClick:c,className:"h-12 px-8 text-lg font-semibold bg-green-600 hover:bg-green-700",children:"L\u01B0u b\u1EA3n ghi"})]})})]});};var ez=n("b3700126"),e$=n("770cbbc2"),eG=s._(e$),eq=n("6c5a900e"),eY=s._(eq);let eW=({selectedUnitId:e,onUnitChange:t,selectedDeviceIds:n,onDeviceIdsChange:r,selectAllDevices:i,onSelectAllChange:s})=>{let a=(0,f.useMemo)(()=>(0,d.buildTree)(o.mockUnits.getAll().filter(e=>e.type!==c.UnitType.EMPLOYEE)),[]),u=(0,f.useMemo)(()=>e?ez.mockDevices.getAll().filter(t=>t.unitId===e).map(e=>({label:`${e.name} (${e.code})`,value:e.id})):[],[e]),h=t=>{s(t),t&&e?r(ez.mockDevices.getAll().filter(t=>t.unitId===e).map(e=>e.id)):r([]);};return(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:"\u{1F4CD} Ch\u1ECDn ph\u1EA1m vi ph\xe1t thanh"}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\u0110\u01A1n v\u1ECB ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(J.default,{showSearch:!0,style:{width:"100%"},value:e,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ECDn \u0111\u01A1n v\u1ECB qu\u1EA3n l\xfd",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>{t(e),e&&i?r(ez.mockDevices.getAll().filter(t=>t.unitId===e).map(e=>e.id)):r([]);},treeData:a})]}),e&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thi\u1EBFt b\u1ECB"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(eG.default,{checked:i,onChange:e=>h(e.target.checked),children:(0,l.jsxs)("span",{className:"font-medium",children:["T\u1EA5t c\u1EA3 (",u.length," thi\u1EBFt b\u1ECB)"]})}),!i&&(0,l.jsx)(eY.default,{mode:"multiple",style:{width:"100%"},placeholder:"Ch\u1ECDn thi\u1EBFt b\u1ECB c\u1EE5 th\u1EC3",options:u,value:n,onChange:r,maxTagCount:"responsive",showSearch:!0,filterOption:(e,t)=>((null==t?void 0:t.label)??"").toLowerCase().includes(e.toLowerCase())})]}),(0,l.jsx)("div",{className:"mt-3 p-2 bg-white rounded border border-blue-200",children:(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\u{1F4E1} S\u1EBD ph\xe1t \u0111\u1EBFn:"," ",(0,l.jsxs)("span",{className:"font-semibold text-blue-700",children:[n.length," thi\u1EBFt b\u1ECB"]})]})})]})]})});},eB=({open:e,onClose:t})=>{let[n,r]=(0,f.useState)("idle"),[i,s]=(0,f.useState)(0),[a,o]=(0,f.useState)(null),[c,d]=(0,f.useState)([]),[u,h]=(0,f.useState)(!0),[p,m]=(0,f.useState)(null),[g,v]=(0,f.useState)([]),b=(0,f.useRef)(null),y=(0,f.useRef)(null),E=(0,f.useCallback)(()=>!!navigator.mediaDevices&&!!navigator.mediaDevices.getUserMedia||(Q.default.warning({title:"Tr\xecnh duy\u1EC7t kh\xf4ng h\u1ED7 tr\u1EE3",content:"Tr\xecnh duy\u1EC7t c\u1EE7a b\u1EA1n kh\xf4ng h\u1ED7 tr\u1EE3 ghi \xe2m. Vui l\xf2ng s\u1EED d\u1EE5ng Chrome, Firefox, ho\u1EB7c Edge phi\xean b\u1EA3n m\u1EDBi nh\u1EA5t."}),!1),[]),x=(0,f.useCallback)(async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!0});}catch(e){return"NotAllowedError"===e.name?eh.default.error("Vui l\xf2ng cho ph\xe9p truy c\u1EADp microphone \u0111\u1EC3 s\u1EED d\u1EE5ng t\xednh n\u0103ng n\xe0y"):"NotFoundError"===e.name?eh.default.error("Kh\xf4ng t\xecm th\u1EA5y microphone. Vui l\xf2ng ki\u1EC3m tra thi\u1EBFt b\u1ECB."):eh.default.error("Kh\xf4ng th\u1EC3 truy c\u1EADp microphone: "+e.message),null;}},[]),S=(0,f.useCallback)(()=>{y.current&&clearInterval(y.current),y.current=setInterval(()=>{s(e=>e+1);},1e3);},[]),T=(0,f.useCallback)(()=>{y.current&&(clearInterval(y.current),y.current=null);},[]),w=(0,f.useCallback)(async()=>{if(!a){eh.default.warning("Vui l\xf2ng ch\u1ECDn \u0111\u01A1n v\u1ECB tr\u01B0\u1EDBc khi b\u1EAFt \u0111\u1EA7u");return;}if(0===c.length){eh.default.warning("Vui l\xf2ng ch\u1ECDn \xedt nh\u1EA5t m\u1ED9t thi\u1EBFt b\u1ECB");return;}if(!E())return;let e=await x();if(!e)return;m(e);let t=new MediaRecorder(e);b.current=t;let n=[];t.ondataavailable=e=>{e.data.size>0&&n.push(e.data);},t.onstop=()=>{v(n);},t.start(),r("recording"),s(0),S(),eh.default.success("\u0110\xe3 b\u1EAFt \u0111\u1EA7u ph\xe1t thanh!");},[a,c,E,x,S]),C=(0,f.useCallback)(()=>{b.current&&"recording"===n&&(b.current.pause(),r("paused"),T(),eh.default.info("\u0110\xe3 t\u1EA1m d\u1EEBng ph\xe1t thanh"));},[n,T]),R=(0,f.useCallback)(()=>{b.current&&"paused"===n&&(b.current.resume(),r("recording"),S(),eh.default.success("\u0110\xe3 ti\u1EBFp t\u1EE5c ph\xe1t thanh"));},[n,S]),D=(0,f.useCallback)(()=>{b.current&&(b.current.stop(),r("completed"),T(),p&&p.getTracks().forEach(e=>e.stop()),eh.default.success("\u0110\xe3 k\u1EBFt th\xfac ph\xe1t thanh"));},[p,T]),j=(0,f.useCallback)(()=>{if(0===g.length){eh.default.warning("Kh\xf4ng c\xf3 d\u1EEF li\u1EC7u \xe2m thanh \u0111\u1EC3 l\u01B0u");return;}let e=new Blob(g,{type:"audio/webm"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`broadcast-${(0,ej.default)().format("YYYYMMDD-HHmmss")}.webm`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),eh.default.success("\u0110\xe3 l\u01B0u b\u1EA3n ghi \xe2m th\xe0nh c\xf4ng!");},[g]),O=(0,f.useCallback)(()=>{"recording"===n||"paused"===n?Q.default.confirm({title:"\u0110ang ph\xe1t thanh",content:"B\u1EA1n c\xf3 ch\u1EAFc ch\u1EAFn mu\u1ED1n \u0111\xf3ng? B\u1EA3n ghi \xe2m s\u1EBD kh\xf4ng \u0111\u01B0\u1EE3c l\u01B0u.",okText:"\u0110\xf3ng",okType:"danger",cancelText:"H\u1EE7y",onOk:()=>{b.current&&b.current.stop(),p&&p.getTracks().forEach(e=>e.stop()),T(),r("idle"),s(0),m(null),v([]),t();}}):(r("idle"),s(0),o(null),d([]),h(!0),m(null),v([]),t());},[n,p,T,t]);return(0,f.useEffect)(()=>{"recording"===n?y.current||(y.current=setInterval(()=>{s(e=>e+1);},1e3)):y.current&&(clearInterval(y.current),y.current=null);},[n]),(0,f.useEffect)(()=>()=>{y.current&&clearInterval(y.current),p&&p.getTracks().forEach(e=>e.stop());},[p]),(0,l.jsx)(Q.default,{title:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xl",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\u{1F399}\uFE0F"}),(0,l.jsx)("span",{children:"Ph\xe1t thanh tr\u1EF1c ti\u1EBFp"})]}),open:e,onCancel:O,footer:null,width:900,centered:!0,destroyOnClose:!0,children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(eV,{status:n,duration:i,audioStream:p,deviceCount:c.length,onStart:w,onPause:C,onResume:R,onStop:D,onSave:j}),"idle"===n&&(0,l.jsx)(eW,{selectedUnitId:a,onUnitChange:o,selectedDeviceIds:c,onDeviceIdsChange:d,selectAllDevices:u,onSelectAllChange:h}),"idle"!==n&&(0,l.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"\u{1F4CD} \u0110\u01A1n v\u1ECB:"}),(0,l.jsx)("span",{className:"font-semibold text-gray-800",children:a||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,l.jsx)("span",{children:"\u{1F4E1} Thi\u1EBFt b\u1ECB:"}),(0,l.jsxs)("span",{className:"font-semibold text-gray-800",children:[c.length," thi\u1EBFt b\u1ECB"]})]})]})})]})});};var eQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"},eK=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eQ}));}),eX=n("6d460bca"),eZ=s._(eX),eJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"},e0=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:eJ}));}),e1=n("719869e8"),e2=s._(e1),e3=n("1458582d"),e4=s._(e3),e6=n("c622754a"),e8=s._(e6),e5=n("6deebcc6"),e7=s._(e5),e9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},te=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:e9}));}),tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},tn=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:tt}));}),tr=n("68c9b6bc"),ti=n("c9242dcc");n("cff46b1a");let ts=[],ta={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},tl=Object.assign(Object.assign({},ta),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(e,t)=>"day"===t?"Today":`This ${e}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:e=>`Show ${e} more event${1===e?"":"s"}`});function to(e){let t=e.length>0?e[0].code:"en",n=ts.concat(e),r={en:tl};for(let e of n)r[e.code]=e;return{map:r,defaultCode:t};}function tc(e,t){let n,r;return"object"!=typeof e||Array.isArray(e)?(r=function(e,t){for(let n=0;n<e.length;n+=1){let r=e[n].toLocaleLowerCase().split("-");for(let e=r.length;e>0;e-=1){let n=r.slice(0,e).join("-");if(t[n])return t[n];}}return null;}(n=[].concat(e||[]),t)||tl,td(e,n,r)):td(e.code,[e.code],e);}function td(e,t,n){let r=(0,tr.m)([ta,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:e,codes:t,week:i,simpleNumberFormat:new Intl.NumberFormat(e),options:r};}function tu(e){return{id:(0,tr.g)(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}};}class th extends tr.T{}function tp(e,t,n,r){if(t[e])return t[e];let i=function(e,t,n,r){let i=n[e],s=r[e],a=e=>i&&null!==i[e]?i[e]:s&&null!==s[e]?s[e]:null,l=a("component"),o=a("superType"),c=null;if(o){if(o===e)throw Error("Can't have a custom view type that references itself");c=tp(o,t,n,r);}return(!l&&c&&(l=c.component),l)?{type:e,component:l,defaults:Object.assign(Object.assign({},c?c.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),s?s.rawOptions:{})}:null;}(e,t,n,r);return i&&(t[e]=i),i;}function tf(e){let t="function"==typeof e?{component:e}:e,{component:n}=t;return t.content?n=tm(t):!n||n.prototype instanceof tr.B||(n=tm(Object.assign(Object.assign({},t),{content:n}))),{superType:t.type,component:n,rawOptions:t};}function tm(e){return t=>(0,ti.createElement)(tr.V.Consumer,null,n=>(0,ti.createElement)(tr.C,{elTag:"div",elClasses:(0,tr.b)(n.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount}));}function tg(e,t,n,r){var i;let s=(0,tr.a)(e,tf),a=(i=t.views,(0,tr.a)(i,tf)),l=function(e,t){let n,r={};for(n in e)tp(n,r,e,t);for(n in t)tp(n,r,e,t);return r;}(s,a);return(0,tr.a)(l,e=>(function(e,t,n,r,i){let s,a,l=e.overrides.duration||e.defaults.duration||r.duration||n.duration,o=null,c="",d="",u={};if(l&&(void 0===(a=tv[s=JSON.stringify(l)])&&(a=(0,tr.d)(l),tv[s]=a),o=a)){let e=(0,tr.c)(o);c=e.unit,1===e.value&&(d=c,u=t[c]?t[c].rawOptions:{});}let h=t=>{let n=t.buttonText||{},r=e.defaults.buttonTextKey;return null!=r&&null!=n[r]?n[r]:null!=n[e.type]?n[e.type]:null!=n[d]?n[d]:null;},p=t=>{let n=t.buttonHints||{},r=e.defaults.buttonTextKey;return null!=r&&null!=n[r]?n[r]:null!=n[e.type]?n[e.type]:null!=n[d]?n[d]:null;};return{type:e.type,component:e.component,duration:o,durationUnit:c,singleUnit:d,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},u),e.overrides),buttonTextOverride:h(r)||h(n)||e.overrides.buttonText,buttonTextDefault:h(i)||e.defaults.buttonText||h(tr.e)||e.type,buttonTitleOverride:p(r)||p(n)||e.overrides.buttonHint,buttonTitleDefault:p(i)||e.defaults.buttonHint||p(tr.e)};})(e,a,t,n,r));}th.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},th.prototype.baseIconClass="fc-icon",th.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},th.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},th.prototype.iconOverrideOption="buttonIcons",th.prototype.iconOverrideCustomButtonOption="icon",th.prototype.iconOverridePrefix="fc-icon-";let tv={};function tb(e){for(let t in e)if(e[t].isFetching)return!0;return!1;}function ty(e,t,n,r){let i={};for(let e of t)i[e.sourceId]=e;return n&&(i=tE(i,n,r)),Object.assign(Object.assign({},e),i);}function tE(e,t,n){return tx(e,(0,tr.h)(e,e=>tT(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId),t,!1,n);}function tx(e,t,n,r,i){let s={};for(let a in e){let l=e[a];t[a]?s[a]=function(e,t,n,r){let{options:i,calendarApi:s}=r,a=r.pluginHooks.eventSourceDefs[e.sourceDefId],l=(0,tr.g)();return a.fetch({eventSource:e,range:t,isRefetch:n,context:r},n=>{let{rawEvents:a}=n;i.eventSourceSuccess&&(a=i.eventSourceSuccess.call(s,a,n.response)||a),e.success&&(a=e.success.call(s,a,n.response)||a),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:l,fetchRange:t,rawEvents:a});},n=>{let a=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,n),a=!0),e.failure&&(e.failure(n),a=!0),a||console.warn(n.message,n),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:l,fetchRange:t,error:n});}),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:l});}(l,n,r,i):s[a]=l;}return s;}function tS(e,t){return(0,tr.h)(e,e=>tT(e,t));}function tT(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange;}function tw(e,t,n,r,i){return{header:e.headerToolbar?tC(e.headerToolbar,e,t,n,r,i):null,footer:e.footerToolbar?tC(e.footerToolbar,e,t,n,r,i):null};}function tC(e,t,n,r,i,s){let a={},l=[],o=!1;for(let c in e){let d=function(e,t,n,r,i,s){let a="rtl"===t.direction,l=t.customButtons||{},o=n.buttonText||{},c=t.buttonText||{},d=n.buttonHints||{},u=t.buttonHints||{},h=e?e.split(" "):[],p=[],f=!1;return{widgets:h.map(e=>e.split(",").map(e=>{let n,h,m,g,v,b;if("title"===e)return f=!0,{buttonName:e};if(n=l[e])m=e=>{n.click&&n.click.call(e.target,e,e.target);},(g=r.getCustomButtonIconClass(n))||(g=r.getIconClass(e,a))||(v=n.text),b=n.hint||n.text;else if(h=i[e]){p.push(e),m=()=>{s.changeView(e);},(v=h.buttonTextOverride)||(g=r.getIconClass(e,a))||(v=h.buttonTextDefault);let n=h.buttonTextOverride||h.buttonTextDefault;b=(0,tr.k)(h.buttonTitleOverride||h.buttonTitleDefault||t.viewHint,[n,e],n);}else if(s[e]){if(m=()=>{s[e]();},(v=o[e])||(g=r.getIconClass(e,a))||(v=c[e]),"prevYear"===e||"nextYear"===e){let t="prevYear"===e?"prev":"next";b=(0,tr.k)(d[t]||u[t],[c.year||"year","year"],c[e]);}else b=t=>(0,tr.k)(d[e]||u[e],[c[t]||t,t],c[e]);}return{buttonName:e,buttonClick:m,buttonIcon:g,buttonText:v,buttonHint:b};})),viewsWithButtons:p,hasTitle:f};}(e[c],t,n,r,i,s);a[c]=d.widgets,l.push(...d.viewsWithButtons),o=o||d.hasTitle;}return{sectionWidgets:a,viewsWithButtons:l,hasTitle:o};}class tR{constructor(e,t,n){this.type=e,this.getCurrentData=t,this.dateEnv=n;}get calendar(){return this.getCurrentData().calendarApi;}get title(){return this.getCurrentData().viewTitle;}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);}getOption(e){return this.getCurrentData().options[e];}}let tD=tu({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:e=>Array.isArray(e.events)?e.events:null,fetch(e,t){t({rawEvents:e.eventSource.meta});}}]}),tj=tu({name:"func-event-source",eventSourceDefs:[{parseMeta:e=>"function"==typeof e.events?e.events:null,fetch(e,t,n){let{dateEnv:r}=e.context,i=e.eventSource.meta;(0,tr.u)(i.bind(null,(0,tr.l)(e.range,r)),e=>t({rawEvents:e}),n);}}]}),tO=tu({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:tr.n,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:e=>e.url&&("json"===e.format||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null,fetch(e,t,n){let{meta:r}=e.eventSource,i=function(e,t,n){let r,i,s,{dateEnv:a,options:l}=n,o={};return null==(r=e.startParam)&&(r=l.startParam),null==(i=e.endParam)&&(i=l.endParam),null==(s=e.timeZoneParam)&&(s=l.timeZoneParam),Object.assign(o,"function"==typeof e.extraParams?e.extraParams():e.extraParams||{}),o[r]=a.formatIso(t.start),o[i]=a.formatIso(t.end),"local"!==a.timeZone&&(o[s]=a.timeZone),o;}(r,e.range,e.context);(0,tr.r)(r.method,r.url,i).then(([e,n])=>{t({rawEvents:e,response:n});},n);}}]}),tI={daysOfWeek:tr.n,startTime:tr.d,endTime:tr.d,duration:tr.d,startRecur:tr.n,endRecur:tr.n};function tN(e,t){let n=(0,tr.v)(t.getCurrentData().eventSources);if(1===n.length&&1===e.length&&Array.isArray(n[0]._raw)&&Array.isArray(e[0])){t.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:e[0]});return;}let r=[];for(let t of e){let e=!1;for(let r=0;r<n.length;r+=1)if(n[r]._raw===t){n.splice(r,1),e=!0;break;}e||r.push(t);}for(let e of n)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:e.sourceId});for(let e of r)t.calendarApi.addEventSource(e);}let tM=[tD,tj,tO,tu({name:"simple-recurring-event",recurringTypes:[{parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let n,r={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null,dateEnv:t};return e.duration&&(n=e.duration),!n&&e.startTime&&e.endTime&&(n=(0,tr.s)(e.endTime,e.startTime)),{allDayGuess:!!(!e.startTime&&!e.endTime),duration:n,typeData:r};}return null;},expand(e,t,n){let r=(0,tr.o)(t,{start:e.startRecur,end:e.endRecur});return r?function(e,t,n,r,i){let s=e?(0,tr.f)(e):null,a=(0,tr.q)(i.start),l=i.end,o=[];for(t&&(t.milliseconds<0?l=(0,tr.t)(l,1):t.milliseconds>=864e5&&(a=(0,tr.t)(a,-1)));a<l;){let e;(!s||s[a.getUTCDay()])&&(e=t?r.add(a,t):a,o.push(r.createMarker(n.toDate(e)))),a=(0,tr.t)(a,1);}return o;}(e.daysOfWeek,e.startTime,e.dateEnv,n,r):[];}}],eventRefiners:tI}),tu({name:"change-handler",optionChangeHandlers:{events(e,t){tN([e],t);},eventSources:tN}}),tu({name:"misc",isLoadingFuncs:[e=>tb(e.eventSources)],propSetHandlers:{dateProfile:function(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},(0,tr.l)(e.activeRange,t.dateEnv)),{view:t.viewApi}));},eventStore:function(e,t){let{emitter:n}=t;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",(0,tr.w)(e,t));}}})];class tk{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new tr.D(this.drain.bind(this));}request(e,t){this.queue.push(e),this.delayedRunner.request(t);}pause(e){this.delayedRunner.pause(e);}resume(e,t){this.delayedRunner.resume(e,t);}drain(){let{queue:e}=this;for(;e.length;){let t,n=[];for(;t=e.shift();)this.runTask(t),n.push(t);this.drained(n);}}runTask(e){this.runTaskOption&&this.runTaskOption(e);}drained(e){this.drainedOption&&this.drainedOption(e);}}function tP(e,t,n){let r;return r=/^(year|month)$/.test(e.currentRangeUnit)?e.currentRange:e.activeRange,n.formatRange(r.start,r.end,(0,tr.x)(t.titleFormat||function(e){let{currentRangeUnit:t}=e;if("year"===t)return{year:"numeric"};if("month"===t)return{year:"numeric",month:"long"};let n=(0,tr.y)(e.currentRange.start,e.currentRange.end);return null!==n&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"};}(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator});}class tA{constructor(){this.resetListeners=new Set;}handleInput(e,t){let n=this.dateEnv;if(e!==n&&("function"==typeof t?this.nowFn=t:n||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,n))for(let e of this.resetListeners.values())e();}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn());}addResetListener(e){this.resetListeners.add(e);}removeResetListener(e){this.resetListeners.delete(e);}}class tL{constructor(e){var t,n,r,i;let s,a,l,o,c;this.computeCurrentViewData=(0,tr.z)(this._computeCurrentViewData),this.organizeRawLocales=(0,tr.z)(to),this.buildLocale=(0,tr.z)(tc),this.buildPluginHooks=(a=[],l=[],(e,t)=>(s&&(0,tr.i)(e,a)&&(0,tr.i)(t,l)||(s=function(e,t){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(e){for(let t of e){let e=t.name,s=n[e];void 0===s?(n[e]=t.id,i(t.deps),r=function(e,t){var n,r;return{premiumReleaseDate:(n=e.premiumReleaseDate,r=t.premiumReleaseDate,void 0===n?r:void 0===r?n:new Date(Math.max(n.valueOf(),r.valueOf()))),reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},e.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},e.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},e.propSetHandlers),t.propSetHandlers)};}(r,t)):s!==t.id&&console.warn(`Duplicate plugin '${e}'`);}}return e&&i(e),i(t),r;}(e,t)),a=e,l=t,s)),this.buildDateEnv=(0,tr.z)(tH),this.buildTheme=(0,tr.z)(tF),this.parseToolbars=(0,tr.z)(tw),this.buildViewSpecs=(0,tr.z)(tg),this.buildDateProfileGenerator=(0,tr.A)(tU),this.buildViewApi=(0,tr.z)(t_),this.buildViewUiProps=(0,tr.A)(t$),this.buildEventUiBySource=(0,tr.z)(tV,tr.E),this.buildEventUiBases=(0,tr.z)(tz),this.parseContextBusinessHours=(0,tr.A)(tq),this.buildTitle=(0,tr.z)(tP),this.nowManager=new tA,this.emitter=new tr.F,this.actionRunner=new tk(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=e=>{this.actionRunner.request(e);},this.props=e,this.actionRunner.pause(),this.nowManager=new tA;let d={},u=this.computeOptionsData(e.optionOverrides,d,e.calendarApi),h=u.calendarOptions.initialView||u.pluginHooks.initialView,p=this.computeCurrentViewData(h,u,e.optionOverrides,d);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(p.options);let f={nowManager:this.nowManager,dateEnv:u.dateEnv,options:u.calendarOptions,pluginHooks:u.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},m=(t=u.calendarOptions,n=u.dateEnv,r=this.nowManager,null!=(o=t.initialDate)?n.createMarker(o):r.getDateMarker()),g=p.dateProfileGenerator.build(m);for(let e of((0,tr.G)(g.activeRange,m)||(m=g.currentRange.start),u.pluginHooks.contextInit))e(f);let v=(i=u.calendarOptions,c=g?g.activeRange:null,ty({},function(e,t){let n=(0,tr.j)(t),r=[].concat(e.eventSources||[]),i=[];for(let s of(e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events),r)){let e=(0,tr.p)(s,t,n);e&&i.push(e);}return i;}(i,f),c,f)),b={dynamicOptionOverrides:d,currentViewType:h,currentDate:m,dateProfile:g,businessHours:this.parseContextBusinessHours(f),eventSources:v,eventUiBases:{},eventStore:(0,tr.H)(),renderableEventStore:(0,tr.H)(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(f).selectionConfig},y=Object.assign(Object.assign({},f),b);for(let e of u.pluginHooks.reducers)Object.assign(b,e(null,null,y));tG(b,f)&&this.emitter.trigger("loading",!0),this.state=b,this.updateData(),this.actionRunner.resume();}resetOptions(e,t){let{props:n}=this;void 0===t?n.optionOverrides=e:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(void 0===t||t.length)&&this.actionRunner.request({type:"NOTHING"});}_handleAction(e){var t,n,r;let{props:i,state:s,emitter:a}=this,l=(t=s.dynamicOptionOverrides,"SET_OPTION"===e.type?Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue}):t),o=this.computeOptionsData(i.optionOverrides,l,i.calendarApi),c=(n=s.currentViewType,"CHANGE_VIEW_TYPE"===e.type&&(n=e.viewType),n),d=this.computeCurrentViewData(c,o,i.optionOverrides,l);i.calendarApi.currentDataManager=this,a.setThisContext(i.calendarApi),a.setOptions(d.options);let u={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:h,dateProfile:p}=s;this.data&&this.data.dateProfileGenerator!==d.dateProfileGenerator&&(p=d.dateProfileGenerator.build(h)),r=h,h="CHANGE_DATE"===e.type?e.dateMarker:r,p=function(e,t,n,r){let i;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if((i=r.buildPrev(e,n)).isValid)return i;break;case"NEXT":if((i=r.buildNext(e,n)).isValid)return i;}return e;}(p,e,h,d.dateProfileGenerator),"PREV"!==e.type&&"NEXT"!==e.type&&(0,tr.G)(p.currentRange,h)||(h=p.currentRange.start);let f=function(e,t,n,r){var i,s,a,l;let o=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return ty(e,t.sources,o,r);case"REMOVE_EVENT_SOURCE":return i=t.sourceId,(0,tr.h)(e,e=>e.sourceId!==i);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":if(n)return tE(e,o,r);return e;case"FETCH_EVENT_SOURCES":return tx(e,t.sourceIds?(0,tr.f)(t.sourceIds):tS(e,r),o,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":let c;return s=t.sourceId,a=t.fetchId,l=t.fetchRange,(c=e[s])&&a===c.latestFetchId?Object.assign(Object.assign({},e),{[s]:Object.assign(Object.assign({},c),{isFetching:!1,fetchRange:l})}):e;case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e;}}(s.eventSources,e,p,u),m=(0,tr.I)(s.eventStore,e,f,p,u),g=tb(f)&&!d.options.progressiveEventRendering&&s.renderableEventStore||m,{eventUiSingleBase:v,selectionConfig:b}=this.buildViewUiProps(u),y=this.buildEventUiBySource(f),E=this.buildEventUiBases(g.defs,v,y),x={dynamicOptionOverrides:l,currentViewType:c,currentDate:h,dateProfile:p,eventSources:f,eventStore:m,renderableEventStore:g,selectionConfig:b,eventUiBases:E,businessHours:this.parseContextBusinessHours(u),dateSelection:function(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e;}}(s.dateSelection,e),eventSelection:function(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e;}}(s.eventSelection,e),eventDrag:function(e,t){let n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return{affectedEvents:(n=t.state).affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e;}}(s.eventDrag,e),eventResize:function(e,t){let n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return{affectedEvents:(n=t.state).affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e;}}(s.eventResize,e)},S=Object.assign(Object.assign({},u),x);for(let t of o.pluginHooks.reducers)Object.assign(x,t(s,e,S));let T=tG(s,u),w=tG(x,u);!T&&w?a.trigger("loading",!0):T&&!w&&a.trigger("loading",!1),this.state=x,i.onAction&&i.onAction(e);}updateData(){let{props:e,state:t}=this,n=this.data,r=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),i=this.computeCurrentViewData(t.currentViewType,r,e.optionOverrides,t.dynamicOptionOverrides),s=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,i.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),i),t),a=r.pluginHooks.optionChangeHandlers,l=n&&n.calendarOptions,o=r.calendarOptions;if(l&&l!==o){if(l.timeZone!==o.timeZone){var c,d;let e;t.eventSources=s.eventSources=(c=s.eventSources,e=(d=t.dateProfile)?d.activeRange:null,tx(c,tS(c,s),e,!0,s)),t.eventStore=s.eventStore=(0,tr.J)(s.eventStore,n.dateEnv,s.dateEnv),t.renderableEventStore=s.renderableEventStore=(0,tr.J)(s.renderableEventStore,n.dateEnv,s.dateEnv);}for(let e in a)(-1!==this.optionsForHandling.indexOf(e)||l[e]!==o[e])&&a[e](o[e],s);}this.optionsForHandling=[],e.onData&&e.onData(s);}computeOptionsData(e,t,n){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:i,localeDefaults:s,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,t);tY(l);let o=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,i,a,r.defaultRangeSeparator),c=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,s),d=this.buildTheme(r,i),u=this.parseToolbars(r,this.stableOptionOverrides,d,c,n);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:i,dateEnv:o,viewSpecs:c,theme:d,toolbarConfig:u,localeDefaults:s,availableRawLocales:a.map};}processRawCalendarOptions(e,t){let{locales:n,locale:r}=(0,tr.K)([tr.e,e,t]),i=this.organizeRawLocales(n),s=i.map,a=this.buildLocale(r||i.defaultCode,s).options,l=this.buildPluginHooks(e.plugins||[],tM),o=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tr.L),tr.M),tr.N),l.listenerRefiners),l.optionRefiners),c={},d=(0,tr.K)([tr.e,a,e,t]),u={},h=this.currentCalendarOptionsInput,p=this.currentCalendarOptionsRefined,f=!1;for(let e in d)-1===this.optionsForRefining.indexOf(e)&&(d[e]===h[e]||tr.O[e]&&e in h&&tr.O[e](h[e],d[e]))?u[e]=p[e]:o[e]?(u[e]=o[e](d[e]),f=!0):c[e]=h[e];return f&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=u,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:i,localeDefaults:a,extra:c};}_computeCurrentViewData(e,t,n,r){let i=t.viewSpecs[e];if(!i)throw Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:s,extra:a}=this.processRawViewOptions(i,t.pluginHooks,t.localeDefaults,n,r);tY(a),this.nowManager.handleInput(t.dateEnv,s.now);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,fixedWeekCount:s.fixedWeekCount});return{viewSpec:i,options:s,dateProfileGenerator:l,viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)};}processRawViewOptions(e,t,n,r,i){let s=(0,tr.K)([tr.e,e.optionDefaults,n,r,e.optionOverrides,i]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tr.L),tr.M),tr.N),tr.P),t.listenerRefiners),t.optionRefiners),l={},o=this.currentViewOptionsInput,c=this.currentViewOptionsRefined,d=!1,u={};for(let e in s)s[e]===o[e]||tr.O[e]&&tr.O[e](s[e],o[e])?l[e]=c[e]:(s[e]===this.currentCalendarOptionsInput[e]||tr.O[e]&&tr.O[e](s[e],this.currentCalendarOptionsInput[e])?e in this.currentCalendarOptionsRefined&&(l[e]=this.currentCalendarOptionsRefined[e]):a[e]?l[e]=a[e](s[e]):u[e]=s[e],d=!0);return d&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:u};}}function tH(e,t,n,r,i,s,a,l){let o=tc(t||a.defaultCode,a.map);return new tr.Q({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:o,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:l});}function tF(e,t){return new(t.themeClasses[e.themeSystem]||th)(e);}function tU(e){return new(e.dateProfileGeneratorClass||tr.R)(e);}function t_(e,t,n){return new tR(e,t,n);}function tV(e){return(0,tr.a)(e,e=>e.ui);}function tz(e,t,n){let r={"":t};for(let t in e){let i=e[t];i.sourceId&&n[i.sourceId]&&(r[t]=n[i.sourceId]);}return r;}function t$(e){let{options:t}=e;return{eventUiSingleBase:(0,tr.S)({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:"boolean"==typeof t.eventOverlap?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:(0,tr.S)({constraint:t.selectConstraint,overlap:"boolean"==typeof t.selectOverlap?t.selectOverlap:void 0,allow:t.selectAllow},e)};}function tG(e,t){for(let n of t.pluginHooks.isLoadingFuncs)if(n(e))return!0;return!1;}function tq(e){return(0,tr.U)(e.options.businessHours,e);}function tY(e,t){for(let n in e)console.warn(`Unknown option '${n}'`+(t?` for view '${t}'`:""));}class tW extends tr.B{render(){let e=this.props.widgetGroups.map(e=>this.renderWidgetGroup(e));return(0,ti.createElement)("div",{className:"fc-toolbar-chunk"},...e);}renderWidgetGroup(e){let{props:t}=this,{theme:n}=this.context,r=[],i=!0;for(let s of e){let{buttonName:e,buttonClick:a,buttonText:l,buttonIcon:o,buttonHint:c}=s;if("title"===e)i=!1,r.push((0,ti.createElement)("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let i=e===t.activeButton,s=!t.isTodayEnabled&&"today"===e||!t.isPrevEnabled&&"prev"===e||!t.isNextEnabled&&"next"===e,d=[`fc-${e}-button`,n.getClass("button")];i&&d.push(n.getClass("buttonActive")),r.push((0,ti.createElement)("button",{type:"button",title:"function"==typeof c?c(t.navUnit):c,disabled:s,"aria-pressed":i,className:d.join(" "),onClick:a},l||(o?(0,ti.createElement)("span",{className:o,role:"img"}):"")));}}if(r.length>1){let e=i&&n.getClass("buttonGroup")||"";return(0,ti.createElement)("div",{className:e},...r);}return r[0];}}class tB extends tr.B{render(){let e,t,{model:n,extraClassName:r}=this.props,i=!1,s=n.sectionWidgets,a=s.center;s.left?(i=!0,e=s.left):e=s.start,s.right?(i=!0,t=s.right):t=s.end;let l=[r||"","fc-toolbar",i?"fc-toolbar-ltr":""];return(0,ti.createElement)("div",{className:l.join(" ")},this.renderSection("start",e||[]),this.renderSection("center",a||[]),this.renderSection("end",t||[]));}renderSection(e,t){let{props:n}=this;return(0,ti.createElement)(tW,{key:e,widgetGroups:t,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId});}}class tQ extends tr.B{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,(0,tr.W)(this.props.elRef,e),this.updateAvailableWidth();},this.handleResize=()=>{this.updateAvailableWidth();};}render(){let{props:e,state:t}=this,{aspectRatio:n}=e,r=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",s="";return n?null!==t.availableWidth?i=t.availableWidth/n:s=`${1/n*100}%`:i=e.height||"",(0,ti.createElement)("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:i,paddingBottom:s}},e.children);}componentDidMount(){this.context.addResizeHandler(this.handleResize);}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize);}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth});}}class tK extends tr.X{constructor(e){super(e),this.handleSegClick=(e,t)=>{let{component:n}=this,{context:r}=n,i=(0,tr.Y)(t);if(i&&n.isValidSegDownEl(e.target)){let s=(0,tr.Z)(e.target,".fc-event-forced-url"),a=s?s.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:t,event:new tr._(n.context,i.eventRange.def,i.eventRange.instance),jsEvent:e,view:r.viewApi}),a&&!e.defaultPrevented&&(window.location.href=a);}},this.destroy=(0,tr.$)(e.el,"click",".fc-event",this.handleSegClick);}}class tX extends tr.X{constructor(e){super(e),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl);},this.handleSegEnter=(e,t)=>{(0,tr.Y)(t)&&(this.currentSegEl=t,this.triggerEvent("eventMouseEnter",e,t));},this.handleSegLeave=(e,t)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,t));},this.removeHoverListeners=(0,tr.a0)(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave);}destroy(){this.removeHoverListeners();}triggerEvent(e,t,n){let{component:r}=this,{context:i}=r,s=(0,tr.Y)(n);(!t||r.isValidSegDownEl(t.target))&&i.emitter.trigger(e,{el:n,event:new tr._(i,s.eventRange.def,s.eventRange.instance),jsEvent:t,view:i.viewApi});}}class tZ extends tr.a1{constructor(){super(...arguments),this.buildViewContext=(0,tr.z)(tr.a2),this.buildViewPropTransformers=(0,tr.z)(t0),this.buildToolbarProps=(0,tr.z)(tJ),this.headerRef=(0,ti.createRef)(),this.footerRef=(0,ti.createRef)(),this.interactionsStore={},this.state={viewLabelId:(0,tr.a3)()},this.registerInteractiveComponent=(e,t)=>{let n=(0,tr.a4)(e,t),r=[tK,tX].concat(this.props.pluginHooks.componentInteractions).map(e=>new e(n));this.interactionsStore[e.uid]=r,tr.a5[e.uid]=n;},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let e of t)e.destroy();delete this.interactionsStore[e.uid];}delete tr.a5[e.uid];},this.resizeRunner=new tr.D(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi});}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay);};}render(){let e,{props:t}=this,{toolbarConfig:n,options:r}=t,i=!1,s="";t.isHeightAuto||t.forPrint?s="":null!=r.height?i=!0:null!=r.contentHeight?s=r.contentHeight:e=Math.max(r.aspectRatio,.5);let a=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.nowManager,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),l=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return(0,ti.createElement)(tr.V.Provider,{value:a},(0,ti.createElement)(tr.a6,{unit:"day"},r=>{let a=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,r,t.viewTitle);return(0,ti.createElement)(ti.Fragment,null,n.header&&(0,ti.createElement)(tB,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:l},a)),(0,ti.createElement)(tQ,{liquid:i,height:s,aspectRatio:e,labeledById:l},this.renderView(t),this.buildAppendContent()),n.footer&&(0,ti.createElement)(tB,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},a)));}));}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(t=>new t(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let n in t)t[n](e[n],e);}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:n}=t.pluginHooks;for(let r in n)t[r]!==e[r]&&n[r](t[r],t);}componentWillUnmount(){for(let e of(window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear(),this.calendarInteractions))e.destroy();this.props.emitter.trigger("_unmount");}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(t=>t(e));return(0,ti.createElement)(ti.Fragment,{},...t);}renderView(e){let{pluginHooks:t}=e,{viewSpec:n}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint};for(let n of this.buildViewPropTransformers(t.viewPropsTransformers))Object.assign(r,n.transform(r,e));let i=n.component;return(0,ti.createElement)(i,Object.assign({},r));}}function tJ(e,t,n,r,i,s){let a=n.build(i,void 0,!1),l=n.buildPrev(t,r,!1),o=n.buildNext(t,r,!1);return{title:s,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:a.isValid&&!(0,tr.G)(t.currentRange,i),isPrevEnabled:l.isValid,isNextEnabled:o.isValid};}function t0(e){return e.map(e=>new e);}class t1 extends tr.a7{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=e=>{switch(e.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain();}},this.handleData=e=>{this.currentData=e,this.renderRunner.request(e.calendarOptions.rerenderDelay);},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:e}=this;(0,tr.a8)(()=>{(0,ti.render)((0,ti.createElement)(tr.a9,{options:e.calendarOptions,theme:e.theme,emitter:e.emitter},(t,n,r,i)=>(this.setClassNames(t),this.setHeight(n),(0,ti.createElement)(tr.aa.Provider,{value:this.customContentRenderId},(0,ti.createElement)(tZ,Object.assign({isHeightAuto:r,forPrint:i},e))))),this.el);});}else this.isRendered&&(this.isRendered=!1,(0,ti.render)(null,this.el),this.setClassNames([]),this.setHeight(""));},(0,tr.ab)(e),this.el=e,this.renderRunner=new tr.D(this.handleRenderRequest),new tL({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData});}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize();}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request());}updateSize(){(0,tr.a8)(()=>{super.updateSize();});}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering");}pauseRendering(){this.renderRunner.pause("pauseRendering");}resumeRendering(){this.renderRunner.resume("pauseRendering",!0);}resetOptions(e,t){this.currentDataManager.resetOptions(e,t);}setClassNames(e){if(!(0,tr.i)(e,this.currentClassNames)){let{classList:t}=this.el;for(let e of this.currentClassNames)t.remove(e);for(let n of e)t.add(n);this.currentClassNames=e;}}setHeight(e){(0,tr.ac)(this.el,"height",e);}}var t2=n("e23a8a60");n("a43389cb");var t3=tu({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:t2.DayGridView,dateProfileGeneratorClass:t2.TableDateProfileGenerator},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});tr.bG.touchMouseIgnoreWait=500;let t4=0,t6=0,t8=!1;class t5{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{var t;if(!this.shouldIgnoreMouse()&&0===(t=e).button&&!t.ctrlKey&&this.tryStart(e)){let t=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp);}},this.handleMouseMove=e=>{let t=this.createEventFromMouse(e);this.recordCoords(t),this.emitter.trigger("pointermove",t);},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup();},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let t=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let n=e.target;this.shouldIgnoreMove||n.addEventListener("touchmove",this.handleTouchMove),n.addEventListener("touchend",this.handleTouchEnd),n.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0);}},this.handleTouchMove=e=>{let t=this.createEventFromTouch(e);this.recordCoords(t),this.emitter.trigger("pointermove",t);},this.handleTouchEnd=e=>{if(this.isDragging){let t=e.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,t4+=1,setTimeout(()=>{t4-=1;},tr.bG.touchMouseIgnoreWait);}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0;},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let t=window.scrollX-this.prevScrollX+this.prevPageX,n=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:n,deltaX:t-this.origPageX,deltaY:n-this.origPageY});}},this.containerEl=e,this.emitter=new tr.F,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),1===(t6+=1)&&window.addEventListener("touchmove",t7,{passive:!1});}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),(t6-=1)||window.removeEventListener("touchmove",t7,{passive:!1});}tryStart(e){let t=this.querySubjectEl(e),n=e.target;return!!(t&&(!this.handleSelector||(0,tr.Z)(n,this.handleSelector)))&&(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0);}cleanup(){t8=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch();}querySubjectEl(e){return this.selector?(0,tr.Z)(e.target,this.selector):this.containerEl;}shouldIgnoreMouse(){return t4||this.isTouchDragging;}cancelTouchScroll(){this.isDragging&&(t8=!0);}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0));}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY);}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0);}createEventFromMouse(e,t){let n=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:r};}createEventFromTouch(e,t){let n,r,i=e.touches,s=0,a=0;return i&&i.length?(n=i[0].pageX,r=i[0].pageY):(n=e.pageX,r=e.pageY),t?(this.origPageX=n,this.origPageY=r):(s=n-this.origPageX,a=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:r,deltaX:s,deltaY:a};}}function t7(e){t8&&e.preventDefault();}class t9{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0;}start(e,t,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition();}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition();}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e);}stop(e,t){let n=()=>{this.cleanup(),t();};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0);}doRevertAnimation(e,t){let n=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();n.style.transition="top "+t+"ms,left "+t+"ms",(0,tr.aN)(n,{left:r.left,top:r.top}),(0,tr.b0)(n,()=>{n.style.transition="",e();});}cleanup(){this.mirrorEl&&((0,tr.aM)(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null;}updateElPosition(){this.sourceEl&&this.isVisible&&(0,tr.aN)(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY});}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||((t=this.mirrorEl=this.sourceEl.cloneNode(!0)).style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),(0,tr.aN)(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t;}}class ne extends tr.b9{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange();},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll);}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll);}getScrollTop(){return this.scrollTop;}getScrollLeft(){return this.scrollLeft;}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange());}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange());}getClientWidth(){return this.clientWidth;}getClientHeight(){return this.clientHeight;}getScrollWidth(){return this.scrollWidth;}getScrollHeight(){return this.scrollHeight;}handleScrollChange(){}}class nt extends ne{constructor(e,t){super(new tr.ba(e),t);}getEventTarget(){return this.scrollController.el;}computeClientRect(){return(0,tr.b1)(this.scrollController.el);}}class nn extends ne{constructor(e){super(new tr.bb,e);}getEventTarget(){return window;}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight};}handleScrollChange(){this.clientRect=this.computeClientRect();}}let nr="function"==typeof performance?performance.now:Date.now;class ni{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=nr();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t);}else this.isAnimating=!1;}};}start(e,t,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t));}handleMove(e,t){if(this.isEnabled){let n=e-window.scrollX,r=t-window.scrollY,i=null===this.pointerScreenY?0:r-this.pointerScreenY,s=null===this.pointerScreenX?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(nr()));}}stop(){if(this.isEnabled){for(let e of(this.isAnimating=!1,this.scrollCaches))e.destroy();this.scrollCaches=null;}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate);}handleSide(e,t){let{scrollCache:n}=e,{edgeThreshold:r}=this,i=r-e.distance,s=i*i/(r*r)*this.maxVelocity*t,a=1;switch(e.name){case"left":a=-1;case"right":n.setScrollLeft(n.getScrollLeft()+s*a);break;case"top":a=-1;case"bottom":n.setScrollTop(n.getScrollTop()+s*a);}}computeBestEdge(e,t){let{edgeThreshold:n}=this,r=null;for(let i of this.scrollCaches||[]){let s=i.clientRect,a=e-s.left,l=s.right-e,o=t-s.top,c=s.bottom-t;a>=0&&l>=0&&o>=0&&c>=0&&(o<=n&&this.everMovedUp&&i.canScrollUp()&&(!r||r.distance>o)&&(r={scrollCache:i,name:"top",distance:o}),c<=n&&this.everMovedDown&&i.canScrollDown()&&(!r||r.distance>c)&&(r={scrollCache:i,name:"bottom",distance:c}),a<=n&&this.everMovedLeft&&i.canScrollLeft()&&(!r||r.distance>a)&&(r={scrollCache:i,name:"left",distance:a}),l<=n&&this.everMovedRight&&i.canScrollRight()&&(!r||r.distance>l)&&(r={scrollCache:i,name:"right",distance:l}));}return r;}buildCaches(e){return this.queryScrollEls(e).map(e=>e===window?new nn(!1):new nt(e,!1));}queryScrollEls(e){let t=[];for(let n of this.scrollQuery)"object"==typeof n?t.push(n):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(n)));return t;}}class ns extends tr.bF{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=e=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,(0,tr.ap)(document.body),(0,tr.ar)(document.body),e.isTouch||e.origEvent.preventDefault(),this.emitter.trigger("pointerdown",e),!this.isInteracting||this.pointer.shouldIgnoreMove||(this.mirror.setIsVisible(!1),this.mirror.start(e.subjectEl,e.pageX,e.pageY),this.startDelay(e),this.minDistance||this.handleDistanceSurpassed(e)));},this.onPointerMove=e=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",e),!this.isDistanceSurpassed){let t=this.minDistance,{deltaX:n,deltaY:r}=e;n*n+r*r>=t*t&&this.handleDistanceSurpassed(e);}this.isDragging&&("scroll"!==e.origEvent.type&&(this.mirror.handleMove(e.pageX,e.pageY),this.autoScroller.handleMove(e.pageX,e.pageY)),this.emitter.trigger("dragmove",e));}},this.onPointerUp=e=>{this.isInteracting&&(this.isInteracting=!1,(0,tr.aq)(document.body),(0,tr.as)(document.body),this.emitter.trigger("pointerup",e),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(e)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null));};let n=this.pointer=new t5(e);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),t&&(n.selector=t),this.mirror=new t9,this.autoScroller=new ni;}destroy(){this.pointer.destroy(),this.onPointerUp({});}startDelay(e){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e);},this.delay):this.handleDelayEnd(e);}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e);}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e);}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll());}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e));}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e);}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e;}setMirrorIsVisible(e){this.mirror.setIsVisible(e);}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e;}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e;}}class na{constructor(e){this.el=e,this.origRect=(0,tr.b4)(e),this.scrollCaches=(0,tr.b3)(e).map(e=>new nt(e,!0));}destroy(){for(let e of this.scrollCaches)e.destroy();}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e;}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e;}isWithinClipping(e,t){let n={left:e,top:t};for(let e of this.scrollCaches)if(!function(e){let t=e.tagName;return"HTML"===t||"BODY"===t;}(e.getEventTarget())&&!(0,tr.aD)(n,e.clientRect))return!1;return!0;}}class nl{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=e=>{let{dragging:t}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(e),this.initialHit||!this.requireInitial?(t.setIgnoreMove(!1),this.emitter.trigger("pointerdown",e)):t.setIgnoreMove(!0);},this.handleDragStart=e=>{this.emitter.trigger("dragstart",e),this.handleMove(e,!0);},this.handleDragMove=e=>{this.emitter.trigger("dragmove",e),this.handleMove(e);},this.handlePointerUp=e=>{this.releaseHits(),this.emitter.trigger("pointerup",e);},this.handleDragEnd=e=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,e),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",e);},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new tr.F;}processFirstCoord(e){let t,n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl;i instanceof HTMLElement&&(t=(0,tr.b4)(i),r=(0,tr.aE)(r,t));let s=this.initialHit=this.queryHitForOffset(r.left,r.top);if(s){if(this.useSubjectCenter&&t){let e=(0,tr.aC)(t,s.rect);e&&(r=(0,tr.aF)(e));}this.coordAdjust=(0,tr.aG)(r,n);}else this.coordAdjust={left:0,top:0};}handleMove(e,t){let n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!no(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e));}prepareHits(){this.offsetTrackers=(0,tr.a)(this.droppableStore,e=>(e.component.prepareHits(),new na(e.el)));}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={};}queryHitForOffset(e,t){let{droppableStore:n,offsetTrackers:r}=this,i=null;for(let s in n){let a=n[s].component,l=r[s];if(l&&l.isWithinClipping(e,t)){let n=l.computeLeft(),r=l.computeTop(),o=e-n,c=t-r,{origRect:d}=l,u=d.right-d.left,h=d.bottom-d.top;if(o>=0&&o<u&&c>=0&&c<h){let e=a.queryHit(o,c,u,h);e&&(0,tr.b7)(e.dateProfile.activeRange,e.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(o+n-window.scrollX,c+r-window.scrollY)))&&(!i||e.layer>i.layer)&&(e.componentId=s,e.context=a.context,e.rect.left+=n,e.rect.right+=n,e.rect.top+=r,e.rect.bottom+=r,i=e);}}}return i;}}function no(e,t){return!e&&!t||!!e==!!t&&(0,tr.bd)(e.dateSpan,t.dateSpan);}function nc(e,t){var n;let r={};for(let n of t.pluginHooks.datePointTransforms)Object.assign(r,n(e,t));return Object.assign(r,{date:(n=t.dateEnv).toDate(e.range.start),dateStr:n.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}),r;}class nd extends tr.X{constructor(e){super(e),this.handlePointerDown=e=>{let{dragging:t}=this,n=e.origEvent.target;t.setIgnoreMove(!this.component.isValidDateDownEl(n));},this.handleDragEnd=e=>{let{component:t}=this,{pointer:n}=this.dragging;if(!n.wasTouchScroll){let{initialHit:n,finalHit:r}=this.hitDragging;if(n&&r&&no(n,r)){let{context:r}=t,i=Object.assign(Object.assign({},nc(n.dateSpan,r)),{dayEl:n.dayEl,jsEvent:e.origEvent,view:r.viewApi||r.calendarApi.view});r.emitter.trigger("dateClick",i);}}},this.dragging=new ns(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new nl(this.dragging,(0,tr.bE)(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd);}destroy(){this.dragging.destroy();}}class nu extends tr.X{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=e=>{let{component:t,dragging:n}=this,{options:r}=t.context,i=r.selectable&&t.isValidDateDownEl(e.origEvent.target);n.setIgnoreMove(!i),n.delay=e.isTouch?function(e){let{options:t}=e.context,n=t.selectLongPressDelay;return null==n&&(n=t.longPressDelay),n;}(t):null;},this.handleDragStart=e=>{this.component.context.calendarApi.unselect(e);},this.handleHitUpdate=(e,t)=>{let{context:n}=this.component,r=null,i=!1;if(e){let t=this.hitDragging.initialHit;e.componentId===t.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(t,e)||(r=function(e,t,n){let r=e.dateSpan,i=t.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(tr.at);let a={};for(let r of n){let n=r(e,t);if(!1===n)return null;n&&Object.assign(a,n);}return a.range={start:s[0],end:s[3]},a.allDay=r.allDay,a;}(t,e,n.pluginHooks.dateSelectionTransformers)),r&&(0,tr.bY)(r,e.dateProfile,n)||(i=!0,r=null);}r?n.dispatch({type:"SELECT_DATES",selection:r}):t||n.dispatch({type:"UNSELECT_DATES"}),i?(0,tr.av)():(0,tr.au)(),t||(this.dragSelection=r);},this.handlePointerUp=e=>{this.dragSelection&&((0,tr.cr)(this.dragSelection,e,this.component.context),this.dragSelection=null);};let{component:t}=e,{options:n}=t.context,r=this.dragging=new ns(e.el);r.touchScrollAllowed=!1,r.minDistance=n.selectMinDistance||0,r.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new nl(this.dragging,(0,tr.bE)(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp);}destroy(){this.dragging.destroy();}}class nh extends tr.X{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let t=e.origEvent.target,{component:n,dragging:r}=this,{mirror:i}=r,{options:s}=n.context,a=n.context;this.subjectEl=e.subjectEl;let l=this.subjectSeg=(0,tr.Y)(e.subjectEl),o=(this.eventRange=l.eventRange).instance.instanceId;this.relevantEvents=(0,tr.aT)(a.getCurrentData().eventStore,o),r.minDistance=e.isTouch?0:s.eventDragMinDistance,r.delay=e.isTouch&&o!==n.props.eventSelection?function(e){let{options:t}=e.context,n=t.eventLongPressDelay;return null==n&&(n=t.longPressDelay),n;}(n):null,s.fixedMirrorParent?i.parentNode=s.fixedMirrorParent:i.parentNode=(0,tr.Z)(t,".fc"),i.revertDuration=s.dragRevertDuration;let c=n.isValidSegDownEl(t)&&!(0,tr.Z)(t,".fc-event-resizer");r.setIgnoreMove(!c),this.isDragging=c&&e.subjectEl.classList.contains("fc-event-draggable");},this.handleDragStart=e=>{let t=this.component.context,n=this.eventRange,r=n.instance.instanceId;e.isTouch?r!==this.component.props.eventSelection&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:r}):t.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(t.calendarApi.unselect(e),t.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new tr._(t,n.def,n.instance),jsEvent:e.origEvent,view:t.viewApi}));},this.handleHitUpdate=(e,t)=>{if(!this.isDragging)return;let n=this.relevantEvents,r=this.hitDragging.initialHit,i=this.component.context,s=null,a=null,l=null,o=!1,c={affectedEvents:n,mutatedEvents:(0,tr.H)(),isEvent:!0};if(e){let t=(s=e.context).options;i===s||t.editable&&t.droppable?(a=function(e,t,n,r){let i=e.dateSpan,s=t.dateSpan,a=i.range.start,l=s.range.start,o={};i.allDay!==s.allDay&&(o.allDay=s.allDay,o.hasEnd=t.context.options.allDayMaintainDuration,a=s.allDay?(0,tr.q)(n):n);let c=(0,tr.ay)(a,l,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);c.milliseconds&&(o.allDay=!1);let d={datesDelta:c,standardProps:o};for(let n of r)n(d,e,t);return d;}(r,e,this.eventRange.instance.range.start,s.getCurrentData().pluginHooks.eventDragMutationMassagers))&&(l=(0,tr.bV)(n,s.getCurrentData().eventUiBases,a,s),c.mutatedEvents=l,(0,tr.bX)(c,e.dateProfile,s)||(o=!0,a=null,l=null,c.mutatedEvents=(0,tr.H)())):s=null;}this.displayDrag(s,c),o?(0,tr.av)():(0,tr.au)(),t||(i===s&&no(r,e)&&(a=null),this.dragging.setMirrorNeedsRevert(!a),this.dragging.setMirrorIsVisible(!e||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=s,this.validMutation=a,this.mutatedRelevantEvents=l);},this.handlePointerUp=()=>{this.isDragging||this.cleanup();},this.handleDragEnd=e=>{if(this.isDragging){let t=this.component.context,n=t.viewApi,{receivingContext:r,validMutation:i}=this,s=this.eventRange.def,a=this.eventRange.instance,l=new tr._(t,s,a),o=this.relevantEvents,c=this.mutatedRelevantEvents,{finalHit:d}=this.hitDragging;if(this.clearDrag(),t.emitter.trigger("eventDragStop",{el:this.subjectEl,event:l,jsEvent:e.origEvent,view:n}),i){if(r===t){let r=new tr._(t,c.defs[s.defId],a?c.instances[a.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:c});let d={oldEvent:l,event:r,relatedEvents:(0,tr.w)(c,t,a),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:o});}},u={};for(let e of t.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(u,e(i,t));t.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},d),u),{el:e.subjectEl,delta:i.datesDelta,jsEvent:e.origEvent,view:n})),t.emitter.trigger("eventChange",d);}else if(r){let i={event:l,relatedEvents:(0,tr.w)(o,t,a),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:o});}};t.emitter.trigger("eventLeave",Object.assign(Object.assign({},i),{draggedEl:e.subjectEl,view:n})),t.dispatch({type:"REMOVE_EVENTS",eventStore:o}),t.emitter.trigger("eventRemove",i);let u=c.defs[s.defId],h=c.instances[a.instanceId],p=new tr._(r,u,h);r.dispatch({type:"MERGE_EVENTS",eventStore:c});let f={event:p,relatedEvents:(0,tr.w)(c,r,h),revert(){r.dispatch({type:"REMOVE_EVENTS",eventStore:c});}};r.emitter.trigger("eventAdd",f),e.isTouch&&r.dispatch({type:"SELECT_EVENT",eventInstanceId:a.instanceId}),r.emitter.trigger("drop",Object.assign(Object.assign({},nc(d.dateSpan,r)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:d.context.viewApi})),r.emitter.trigger("eventReceive",Object.assign(Object.assign({},f),{draggedEl:e.subjectEl,view:d.context.viewApi}));}}else t.emitter.trigger("_noEventDrop");}this.cleanup();};let{component:t}=this,{options:n}=t.context,r=this.dragging=new ns(e.el);r.pointer.selector=nh.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new nl(this.dragging,tr.a5);i.useSubjectCenter=e.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd);}destroy(){this.dragging.destroy();}displayDrag(e,t){let n=this.component.context,r=this.receivingContext;r&&r!==e&&(r===n?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:(0,tr.H)(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t});}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"});}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null;}}nh.SELECTOR=".fc-event-draggable, .fc-event-resizable";class np extends tr.X{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let{component:t}=this,n=this.querySegEl(e),r=(0,tr.Y)(n),i=this.eventRange=r.eventRange;this.dragging.minDistance=t.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(e.origEvent.target)||e.isTouch&&this.component.props.eventSelection!==i.instance.instanceId);},this.handleDragStart=e=>{let{context:t}=this.component,n=this.eventRange;this.relevantEvents=(0,tr.aT)(t.getCurrentData().eventStore,this.eventRange.instance.instanceId);let r=this.querySegEl(e);this.draggingSegEl=r,this.draggingSeg=(0,tr.Y)(r),t.calendarApi.unselect(),t.emitter.trigger("eventResizeStart",{el:r,event:new tr._(t,n.def,n.instance),jsEvent:e.origEvent,view:t.viewApi});},this.handleHitUpdate=(e,t,n)=>{let{context:r}=this.component,i=this.relevantEvents,s=this.hitDragging.initialHit,a=this.eventRange.instance,l=null,o=null,c=!1,d={affectedEvents:i,mutatedEvents:(0,tr.H)(),isEvent:!0};e&&!(e.componentId===s.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(s,e))&&(l=function(e,t,n,r){let i=e.context.dateEnv,s=e.dateSpan.range.start,a=t.dateSpan.range.start,l=(0,tr.ay)(s,a,i,e.largeUnit);if(n){if(i.add(r.start,l)<r.end)return{startDelta:l};}else if(i.add(r.end,l)>r.start)return{endDelta:l};return null;}(s,e,n.subjectEl.classList.contains("fc-event-resizer-start"),a.range)),l&&(o=(0,tr.bV)(i,r.getCurrentData().eventUiBases,l,r),d.mutatedEvents=o,(0,tr.bX)(d,e.dateProfile,r)||(c=!0,l=null,o=null,d.mutatedEvents=null)),o?r.dispatch({type:"SET_EVENT_RESIZE",state:d}):r.dispatch({type:"UNSET_EVENT_RESIZE"}),c?(0,tr.av)():(0,tr.au)(),t||(l&&no(s,e)&&(l=null),this.validMutation=l,this.mutatedRelevantEvents=o);},this.handleDragEnd=e=>{let{context:t}=this.component,n=this.eventRange.def,r=this.eventRange.instance,i=new tr._(t,n,r),s=this.relevantEvents,a=this.mutatedRelevantEvents;if(t.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:i,jsEvent:e.origEvent,view:t.viewApi}),this.validMutation){let l=new tr._(t,a.defs[n.defId],r?a.instances[r.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:a});let o={oldEvent:i,event:l,relatedEvents:(0,tr.w)(a,t,r),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:s});}};t.emitter.trigger("eventResize",Object.assign(Object.assign({},o),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||(0,tr.d)(0),endDelta:this.validMutation.endDelta||(0,tr.d)(0),jsEvent:e.origEvent,view:t.viewApi})),t.emitter.trigger("eventChange",o);}else t.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null;};let{component:t}=e,n=this.dragging=new ns(e.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=t.context.options.dragScroll;let r=this.hitDragging=new nl(this.dragging,(0,tr.bE)(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd);}destroy(){this.dragging.destroy();}querySegEl(e){return(0,tr.Z)(e.subjectEl,".fc-event");}}let nf={fixedMirrorParent:tr.n},nm={dateClick:tr.n,eventDragStart:tr.n,eventDragStop:tr.n,eventDrop:tr.n,eventResizeStart:tr.n,eventResizeStop:tr.n,eventResize:tr.n,drop:tr.n,eventReceive:tr.n,eventLeave:tr.n};tr.bG.dataAttrPrefix="";var ng=tu({name:"@fullcalendar/interaction",componentInteractions:[nd,nu,nh,np],calendarInteractions:[class{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=e=>{e.jsEvent&&(this.isRecentPointerDateSelect=!0);},this.onDocumentPointerDown=e=>{let t=this.context.options.unselectCancel,n=(0,tr.aP)(e.origEvent);this.matchesCancel=!!(0,tr.Z)(n,t),this.matchesEvent=!!(0,tr.Z)(n,nh.SELECTOR);},this.onDocumentPointerUp=e=>{let{context:t}=this,{documentPointer:n}=this,r=t.getCurrentData();if(!n.wasTouchScroll){if(r.dateSelection&&!this.isRecentPointerDateSelect){let n=t.options.unselectAuto;!n||n&&this.matchesCancel||t.calendarApi.unselect(e);}r.eventSelection&&!this.matchesEvent&&t.dispatch({type:"UNSELECT_EVENT"});}this.isRecentPointerDateSelect=!1;};let t=this.documentPointer=new t5(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect);}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy();}}],elementDraggingImpl:ns,optionRefiners:nf,listenerRefiners:nm}),nv=n("6ea22b3c");let nb=18>parseInt(String(f.default.version).split(".")[0]);class ny extends f.Component{constructor(){super(...arguments),this.elRef=(0,f.createRef)(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize();}));};}render(){let e=[];for(let t of this.state.customRenderingMap.values())e.push(f.default.createElement(nE,{key:t.id,customRendering:t}));return f.default.createElement("div",{ref:this.elRef},e);}componentDidMount(){let e;this.isUnmounting=!1;let t=new tr.cv;this.handleCustomRendering=t.handle.bind(t),this.calendar=new t1(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{(0,nv.flushSync)(()=>{});}),t.subscribe(t=>{let n=Date.now(),r=!e;(nb||r||this.isUpdating||this.isUnmounting||n-e<100?nx:nv.flushSync)(()=>{this.setState({customRenderingMap:t},()=>{e=n,r?this.doResize():this.requestResize();});});});}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1;}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy();}doResize(){this.calendar.updateSize();}cancelResize(){void 0!==this.resizeId&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0);}getApi(){return this.calendar;}}ny.act=nx;class nE extends f.PureComponent{render(){let{customRendering:e}=this.props,{generatorMeta:t}=e,n="function"==typeof t?t(e.renderProps):t;return(0,nv.createPortal)(n,e.containerEl);}}function nx(e){e();}class nS extends tr.aW{getKeyInfo(){return{allDay:{},timed:{}};}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"];}getKeysForEventDef(e){return e.allDay?(0,tr.bN)(e)?["timed","allDay"]:["allDay"]:["timed"];}}let nT=(0,tr.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function nw(e){let t=["fc-timegrid-slot","fc-timegrid-slot-label",e.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return(0,ti.createElement)(tr.V.Consumer,null,n=>{if(!e.isLabeled)return(0,ti.createElement)("td",{className:t.join(" "),"data-time":e.isoTimeStr});let{dateEnv:r,options:i,viewApi:s}=n,a=null==i.slotLabelFormat?nT:Array.isArray(i.slotLabelFormat)?(0,tr.x)(i.slotLabelFormat[0]):(0,tr.x)(i.slotLabelFormat),l={level:0,time:e.time,date:r.toDate(e.date),view:s,text:r.format(e.date,a)};return(0,ti.createElement)(tr.C,{elTag:"td",elClasses:t,elAttrs:{"data-time":e.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:i.slotLabelContent,defaultGenerator:nC,classNameGenerator:i.slotLabelClassNames,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},e=>(0,ti.createElement)("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},(0,ti.createElement)(e,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})));});}function nC(e){return e.text;}class nR extends tr.B{render(){return this.props.slatMetas.map(e=>(0,ti.createElement)("tr",{key:e.key},(0,ti.createElement)(nw,Object.assign({},e))));}}let nD=(0,tr.x)({week:"short"});class nj extends tr.bc{constructor(){super(...arguments),this.allDaySplitter=new nS,this.headerElRef=(0,ti.createRef)(),this.rootElRef=(0,ti.createRef)(),this.scrollerElRef=(0,ti.createRef)(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e);},this.renderHeadAxis=(e,t="")=>{let{options:n}=this.context,{dateProfile:r}=this.props,i=r.renderRange,s=1===(0,tr.bj)(i.start,i.end)?(0,tr.a_)(this.context,i.start,"week"):{};return n.weekNumbers&&"day"===e?(0,ti.createElement)(tr.cn,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:i.start,defaultFormat:nD},e=>(0,ti.createElement)("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid",style:{height:t}},(0,ti.createElement)(e,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:s}))):(0,ti.createElement)("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},(0,ti.createElement)("div",{className:"fc-timegrid-axis-frame",style:{height:t}}));},this.renderTableRowAxis=e=>{let{options:t,viewApi:n}=this.context,r={text:t.allDayText,view:n};return(0,ti.createElement)(tr.C,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:nO,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},t=>(0,ti.createElement)("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==e?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},(0,ti.createElement)(t,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})));},this.handleSlatCoords=e=>{this.setState({slatCoords:e});};}renderSimpleLayout(e,t,n){let{context:r,props:i}=this,s=[],a=(0,tr.ca)(r.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(s.push({type:"body",key:"all-day",chunk:{content:t}}),s.push({type:"body",key:"all-day-divider",outerContent:(0,ti.createElement)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,ti.createElement)("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),s.push({type:"body",key:"body",liquid:!0,expandRows:!!r.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:n}}),(0,ti.createElement)(tr.cq,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},(0,ti.createElement)(tr.bZ,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[{width:"shrink"}],sections:s}));}renderHScrollLayout(e,t,n,r,i,s,a){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw Error("No ScrollGrid implementation");let{context:o,props:c}=this,d=!c.forPrint&&(0,tr.ca)(o.options),u=!c.forPrint&&(0,tr.c9)(o.options),h=[];e&&h.push({type:"header",key:"header",isSticky:d,syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>(0,ti.createElement)("tr",{role:"presentation"},this.renderHeadAxis("day",e.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(h.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>(0,ti.createElement)("tr",{role:"presentation"},this.renderTableRowAxis(e.rowSyncHeights[0]))},{key:"cols",content:t}]}),h.push({key:"all-day-divider",type:"body",outerContent:(0,ti.createElement)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,ti.createElement)("td",{colSpan:2,className:"fc-timegrid-divider "+o.theme.getClass("tableCellShaded")}))}));let p=o.options.nowIndicator;return h.push({type:"body",key:"body",liquid:!0,expandRows:!!o.options.expandRows,chunks:[{key:"axis",content:e=>(0,ti.createElement)("div",{className:"fc-timegrid-axis-chunk"},(0,ti.createElement)("table",{"aria-hidden":!0,style:{height:e.expandRows?e.clientHeight:""}},e.tableColGroupNode,(0,ti.createElement)("tbody",null,(0,ti.createElement)(nR,{slatMetas:s}))),(0,ti.createElement)("div",{className:"fc-timegrid-now-indicator-container"},(0,ti.createElement)(tr.a6,{unit:p?"minute":"day"},e=>{let t=p&&a&&a.safeComputeTop(e);return"number"==typeof t?(0,ti.createElement)(tr.ch,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:e}):null;})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),u&&h.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:tr.c8},{key:"cols",content:tr.c8}]}),(0,ti.createElement)(tr.cq,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:o.viewSpec},(0,ti.createElement)(l,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:i}]}],sections:h}));}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return(!0===e||!0===t)&&(e=void 0,t=5),{dayMaxEvents:e,dayMaxEventRows:t};}}function nO(e){return e.text;}class nI{constructor(e,t,n){this.positions=e,this.dateProfile=t,this.slotDuration=n;}safeComputeTop(e){let{dateProfile:t}=this;if((0,tr.G)(t.currentRange,e)){let n=(0,tr.q)(e),r=e.valueOf()-n.valueOf();if(r>=(0,tr.bq)(t.slotMinTime)&&r<(0,tr.bq)(t.slotMaxTime))return this.computeTimeTop((0,tr.d)(r));}return null;}computeDateTop(e,t){return t||(t=(0,tr.q)(e)),this.computeTimeTop((0,tr.d)(e.valueOf()-t.valueOf()));}computeTimeTop(e){let t,n,{positions:r,dateProfile:i}=this,s=r.els.length,a=(e.milliseconds-(0,tr.bq)(i.slotMinTime))/(0,tr.bq)(this.slotDuration);return t=Math.min(t=Math.floor(a=Math.min(s,a=Math.max(0,a))),s-1),n=a-t,r.tops[t]+r.getHeight(t)*n;}}class nN extends tr.B{render(){let{props:e,context:t}=this,{options:n}=t,{slatElRefs:r}=e;return(0,ti.createElement)("tbody",null,e.slatMetas.map((i,s)=>{let a={time:i.time,date:t.dateEnv.toDate(i.date),view:t.viewApi};return(0,ti.createElement)("tr",{key:i.key,ref:r.createRef(i.key)},e.axis&&(0,ti.createElement)(nw,Object.assign({},i)),(0,ti.createElement)(tr.C,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!i.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":i.isoTimeStr},renderProps:a,generatorName:"slotLaneContent",customGenerator:n.slotLaneContent,classNameGenerator:n.slotLaneClassNames,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount}));}));}}class nM extends tr.B{constructor(){super(...arguments),this.rootElRef=(0,ti.createRef)(),this.slatElRefs=new tr.cd;}render(){let{props:e,context:t}=this;return(0,ti.createElement)("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},(0,ti.createElement)("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,(0,ti.createElement)(nN,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})));}componentDidMount(){this.updateSizing();}componentDidUpdate(){this.updateSizing();}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null);}updateSizing(){var e;let{context:t,props:n}=this;n.onCoords&&null!==n.clientWidth&&this.rootElRef.current.offsetHeight&&n.onCoords(new nI(new tr.b8(this.rootElRef.current,(e=this.slatElRefs.currentMap,n.slatMetas.map(t=>e[t.key])),!1,!0),this.props.dateProfile,t.options.slotDuration));}}function nk(e,t){let n,r=[];for(n=0;n<t;n+=1)r.push([]);if(e)for(n=0;n<e.length;n+=1)r[e[n].col].push(e[n]);return r;}function nP(e,t){let n=[];if(e){for(let r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)n[t.col].segs.push(t);}else for(let e=0;e<t;e+=1)n[e]=null;return n;}class nA extends tr.B{render(){let{props:e}=this;return(0,ti.createElement)(tr.co,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>nq(e.hiddenSegs,e),defaultGenerator:nL,forceTimed:!0},e=>(0,ti.createElement)(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}));}}function nL(e){return e.shortText;}function nH(e,t){if(!e)return[[],0];let{level:n,lateralStart:r,lateralEnd:i}=e,s=r,a=[];for(;s<i;)a.push(t(n,s)),s+=1;return a.sort(nF),[a.map(nU),a[0][1]];}function nF(e,t){return t[1]-e[1];}function nU(e){return e[0];}function n_(e,t){let n={};return(...r)=>{let i=e(...r);return i in n?n[i]:n[i]=t(...r);};}function nV(e,t,n=null,r=0){let i=[];if(n)for(let s=0;s<e.length;s+=1){let a=e[s],l=n.computeDateTop(a.start,t),o=Math.max(l+(r||0),n.computeDateTop(a.end,t));i.push({start:Math.round(l),end:Math.round(o)});}return i;}let nz=(0,tr.x)({hour:"numeric",minute:"2-digit",meridiem:!1});class n$ extends tr.B{render(){return(0,ti.createElement)(tr.cg,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:nz}));}}class nG extends tr.B{constructor(){super(...arguments),this.sortEventSegs=(0,tr.z)(tr.bP);}render(){let{props:e,context:t}=this,{options:n}=t,r=n.selectMirror,i=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],s=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},a=this.sortEventSegs(e.fgEventSegs,n.eventOrder);return(0,ti.createElement)(tr.ci,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},t=>(0,ti.createElement)("div",{className:"fc-timegrid-col-frame"},(0,ti.createElement)("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),(0,ti.createElement)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,s,!1,!1,!1)),(0,ti.createElement)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(i,{},!!e.eventDrag,!!e.eventResize,!!r,"mirror")),(0,ti.createElement)("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),(0,tr.cj)(n)&&(0,ti.createElement)(t,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})));}renderFgSegs(e,t,n,r,i,s){let{props:a}=this;return a.forPrint?nq(e,a):this.renderPositionedFgSegs(e,t,n,r,i,s);}renderPositionedFgSegs(e,t,n,r,i,s){let{eventMaxStack:a,eventShortHeight:l,eventOrderStrict:o,eventMinHeight:c}=this.context.options,{date:d,slatCoords:u,eventSelection:h,todayRange:p,nowDate:f}=this.props,m=n||r||i,g=nV(e,d,u,c),{segPlacements:v,hiddenGroups:b}=function(e,t,n,r){let i,s,a,l=[],o=[];for(let n=0;n<e.length;n+=1){let r=t[n];r?l.push({index:n,thickness:1,span:r}):o.push(e[n]);}let{segRects:c,hiddenGroups:d}=(i=new tr.by,null!=n&&(i.strictOrder=n),null!=r&&(i.maxStackCnt=r),s=i.addSegs(l),a=(0,tr.bC)(s),{segRects:function(e){let t=[],n=n_((e,t,n)=>(0,tr.bz)(e),(e,n,i)=>{let s=Object.assign(Object.assign({},e),{levelCoord:n,stackDepth:i,stackForward:0});return t.push(s),s.stackForward=r(e.nextLevelNodes,n+e.thickness,i+1)+1;});function r(e,t,r){let i=0;for(let s of e)i=Math.max(n(s,t,r),i);return i;}return r(e,0,0),t;}(function(e,t){let n=n_((e,t,n)=>(0,tr.bz)(e),(e,t,r)=>{let i,{nextLevelNodes:s,thickness:a}=e,l=a+r,o=a/l,c=[];if(s.length)for(let e of s)if(void 0===i){let r=n(e,t,l);i=r[0],c.push(r[1]);}else{let t=n(e,i,0);c.push(t[1]);}else i=1;let d=(i-t)*o;return[i-d,Object.assign(Object.assign({},e),{thickness:d,nextLevelNodes:c})];});return e.map(e=>n(e,0,0)[1]);}(function(e){let{entriesByLevel:t}=e,n=n_((e,t)=>e+":"+t,(r,i)=>{let s=nH(function(e,t,n){let{levelCoords:r,entriesByLevel:i}=e,s=i[t][n],a=r[t]+s.thickness,l=r.length,o=t;for(;o<l&&r[o]<a;o+=1);for(;o<l;o+=1){let e,t=i[o],n=(0,tr.bB)(t,s.span.start,tr.bA),r=n[0]+n[1],a=r;for(;(e=t[a])&&e.span.start<s.span.end;)a+=1;if(r<a)return{level:o,lateralStart:r,lateralEnd:a};}return null;}(e,r,i),n),a=t[r][i];return[Object.assign(Object.assign({},a),{nextLevelNodes:s[0]}),a.thickness+s[1]];});return nH(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,n)[0];}(i),0)),hiddenGroups:a}),u=[];for(let t of c)u.push({seg:e[t.index],rect:t});for(let e of o)u.push({seg:e,rect:null});return{segPlacements:u,hiddenGroups:d};}(e,g,o,a);return(0,ti.createElement)(ti.Fragment,null,this.renderHiddenGroups(b,e),v.map(e=>{let{seg:a,rect:o}=e,c=a.eventRange.instance.instanceId,d=m||!!(!t[c]&&o),u=nY(o&&o.span),g=!m&&o?this.computeSegHStyle(o):{left:0,right:0},v=!!o&&o.stackForward>0,b=!!o&&o.span.end-o.span.start<l;return(0,ti.createElement)("div",{className:"fc-timegrid-event-harness"+(v?" fc-timegrid-event-harness-inset":""),key:s||c,style:Object.assign(Object.assign({visibility:d?"":"hidden"},u),g)},(0,ti.createElement)(n$,Object.assign({seg:a,isDragging:n,isResizing:r,isDateSelecting:i,isSelected:c===h,isShort:b},(0,tr.bQ)(a,p,f))));}));}renderHiddenGroups(e,t){let{extraDateSpan:n,dateProfile:r,todayRange:i,nowDate:s,eventSelection:a,eventDrag:l,eventResize:o}=this.props;return(0,ti.createElement)(ti.Fragment,null,e.map(e=>{let c=nY(e.span),d=e.entries.map(e=>t[e.index]);return(0,ti.createElement)(nA,{key:(0,tr.bu)((0,tr.cp)(d)),hiddenSegs:d,top:c.top,bottom:c.bottom,extraDateSpan:n,dateProfile:r,todayRange:i,nowDate:s,eventSelection:a,eventDrag:l,eventResize:o});}));}renderFillSegs(e,t){let{props:n,context:r}=this,i=nV(e,n.date,n.slatCoords,r.options.eventMinHeight).map((r,i)=>{let s=e[i];return(0,ti.createElement)("div",{key:(0,tr.bR)(s.eventRange),className:"fc-timegrid-bg-harness",style:nY(r)},"bg-event"===t?(0,ti.createElement)(tr.cm,Object.assign({seg:s},(0,tr.bQ)(s,n.todayRange,n.nowDate))):(0,tr.cl)(t));});return(0,ti.createElement)(ti.Fragment,null,i);}renderNowIndicator(e){let{slatCoords:t,date:n}=this.props;return t?e.map((e,r)=>(0,ti.createElement)(tr.ch,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(e.start,n)},isAxis:!1,date:n})):null;}computeSegHStyle(e){let t,n,{isRtl:r,options:i}=this.context,s=i.slotEventOverlap,a=e.levelCoord,l=e.levelCoord+e.thickness;s&&(l=Math.min(1,a+(l-a)*2)),r?(t=1-l,n=a):(t=a,n=1-l);let o={zIndex:e.stackDepth+1,left:100*t+"%",right:100*n+"%"};return s&&!e.stackForward&&(o[r?"marginLeft":"marginRight"]=20),o;}}function nq(e,{todayRange:t,nowDate:n,eventSelection:r,eventDrag:i,eventResize:s}){let a=(i?i.affectedInstances:null)||(s?s.affectedInstances:null)||{};return(0,ti.createElement)(ti.Fragment,null,e.map(e=>{let i=e.eventRange.instance.instanceId;return(0,ti.createElement)("div",{key:i,style:{visibility:a[i]?"hidden":""}},(0,ti.createElement)(n$,Object.assign({seg:e,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:i===r,isShort:!1},(0,tr.bQ)(e,t,n))));}));}function nY(e){return e?{top:e.start,bottom:-e.end}:{top:"",bottom:""};}class nW extends tr.B{constructor(){super(...arguments),this.splitFgEventSegs=(0,tr.z)(nk),this.splitBgEventSegs=(0,tr.z)(nk),this.splitBusinessHourSegs=(0,tr.z)(nk),this.splitNowIndicatorSegs=(0,tr.z)(nk),this.splitDateSelectionSegs=(0,tr.z)(nk),this.splitEventDrag=(0,tr.z)(nP),this.splitEventResize=(0,tr.z)(nP),this.rootElRef=(0,ti.createRef)(),this.cellElRefs=new tr.cd;}render(){let{props:e,context:t}=this,n=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,i=this.splitFgEventSegs(e.fgEventSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitBusinessHourSegs(e.businessHourSegs,r),l=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r);return(0,ti.createElement)("div",{className:"fc-timegrid-cols",ref:this.rootElRef},(0,ti.createElement)("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,(0,ti.createElement)("tbody",{role:"presentation"},(0,ti.createElement)("tr",{role:"row"},e.axis&&(0,ti.createElement)("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},(0,ti.createElement)("div",{className:"fc-timegrid-col-frame"},(0,ti.createElement)("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof n&&(0,ti.createElement)(tr.ch,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:n},isAxis:!0,date:e.nowDate})))),e.cells.map((t,n)=>(0,ti.createElement)(nG,{key:t.key,elRef:this.cellElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,fgEventSegs:i[n],bgEventSegs:s[n],businessHourSegs:a[n],nowIndicatorSegs:l[n],dateSelectionSegs:o[n],eventDrag:c[n],eventResize:d[n],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))));}componentDidMount(){this.updateCoords();}componentDidUpdate(){this.updateCoords();}updateCoords(){var e;let{props:t}=this;t.onColCoords&&null!==t.clientWidth&&t.onColCoords(new tr.b8(this.rootElRef.current,(e=this.cellElRefs.currentMap,t.cells.map(t=>e[t.key])),!0,!1));}}class nB extends tr.bc{constructor(){super(...arguments),this.processSlotOptions=(0,tr.z)(nQ),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this);},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:n}=this.state;if(t&&n){if(e.time){let r=n.computeTimeTop(e.time);(r=Math.ceil(r))&&(r+=1),t(r);}return!0;}return!1;},this.handleColCoords=e=>{this.colCoords=e;},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e);};}render(){let{props:e,state:t}=this;return(0,ti.createElement)("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},(0,ti.createElement)(nM,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),(0,ti.createElement)(nW,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}));}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest);}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile);}componentWillUnmount(){this.scrollResponder.detach();}queryHit(e,t){let{dateEnv:n,options:r}=this.context,{colCoords:i}=this,{dateProfile:s}=this.props,{slatCoords:a}=this.state,{snapDuration:l,snapsPerSlot:o}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),c=i.leftToIndex(e),d=a.positions.topToIndex(t);if(null!=c&&null!=d){let e=this.props.cells[c],r=a.positions.tops[d],u=a.positions.getHeight(d),h=Math.floor((t-r)/u*o),p=this.props.cells[c].date,f=(0,tr.bn)(s.slotMinTime,(0,tr.bm)(l,d*o+h)),m=n.add(p,f),g=n.add(m,l);return{dateProfile:s,dateSpan:Object.assign({range:{start:m,end:g},allDay:!1},e.extraDateSpan),dayEl:i.els[c],rect:{left:i.lefts[c],right:i.rights[c],top:r,bottom:r+u},layer:0};}return null;}}function nQ(e,t){let n=t||e,r=(0,tr.br)(e,n);return null===r&&(n=e,r=1),{snapDuration:n,snapsPerSlot:r};}class nK extends tr.bU{sliceRange(e,t){let n=[];for(let r=0;r<t.length;r+=1){let i=(0,tr.o)(e,t[r]);i&&n.push({start:i.start,end:i.end,isStart:i.start.valueOf()===e.start.valueOf(),isEnd:i.end.valueOf()===e.end.valueOf(),col:r});}return n;}}class nX extends tr.bc{constructor(){super(...arguments),this.buildDayRanges=(0,tr.z)(nZ),this.slicer=new nK,this.timeColsRef=(0,ti.createRef)();}render(){let{props:e,context:t}=this,{dateProfile:n,dayTableModel:r}=e,{nowIndicator:i,nextDayThreshold:s}=t.options,a=this.buildDayRanges(r,n,t.dateEnv);return(0,ti.createElement)(tr.a6,{unit:i?"minute":"day"},(l,o)=>(0,ti.createElement)(nB,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,n,null,t,a),{forPrint:e.forPrint,axis:e.axis,dateProfile:n,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:l,nowIndicatorSegs:i&&this.slicer.sliceNowDate(l,n,s,t,a),todayRange:o,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})));}}function nZ(e,t,n){let r=[];for(let i of e.headerDates)r.push({start:n.add(i,t.slotMinTime),end:n.add(i,t.slotMaxTime)});return r;}let nJ=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function n0(e,t,n,r,i){let s=new Date(0),a=e,l=(0,tr.d)(0),o=n||function(e){let t,n,r;for(t=nJ.length-1;t>=0;t-=1)if(n=(0,tr.d)(nJ[t]),null!==(r=(0,tr.br)(n,e))&&r>1)return n;return e;}(r),c=[];for(;(0,tr.bq)(a)<(0,tr.bq)(t);){let e=i.add(s,a),t=null!==(0,tr.br)(l,o);c.push({date:e,time:a,key:e.toISOString(),isoTimeStr:(0,tr.bs)(e),isLabeled:t}),a=(0,tr.bn)(a,r),l=(0,tr.bn)(l,r);}return c;}function n1(e,t){let n=new tr.bM(e.renderRange,t);return new tr.bT(n,!1);}(0,tr.ct)('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var n2=tu({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class extends nj{constructor(){super(...arguments),this.buildTimeColsModel=(0,tr.z)(n1),this.buildSlatMetas=(0,tr.z)(n0);}render(){let{options:e,dateEnv:t,dateProfileGenerator:n}=this.context,{props:r}=this,{dateProfile:i}=r,s=this.buildTimeColsModel(i,n),a=this.allDaySplitter.splitProps(r),l=this.buildSlatMetas(i.slotMinTime,i.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:o}=e,c=!o,d=e.dayHeaders&&(0,ti.createElement)(tr.bI,{dates:s.headerDates,dateProfile:i,datesRepDistinctDays:!0,renderIntro:c?this.renderHeadAxis:null}),u=!1!==e.allDaySlot&&(t=>(0,ti.createElement)(t2.DayTable,Object.assign({},a.allDay,{dateProfile:i,dayTableModel:s,nextDayThreshold:e.nextDayThreshold,tableMinWidth:t.tableMinWidth,colGroupNode:t.tableColGroupNode,renderRowIntro:c?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),h=t=>(0,ti.createElement)(nX,Object.assign({},a.timed,{dayTableModel:s,dateProfile:i,axis:c,slotDuration:e.slotDuration,slatMetas:l,forPrint:r.forPrint,tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:t.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return o?this.renderHScrollLayout(d,u,h,s.colCnt,o,l,this.state.slatCoords):this.renderSimpleLayout(d,u,h);}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}}),n3=n("b1f3b325"),n4=s._(n3),n6=n("67a2a3a3"),n8=s._(n6),n5=n("4ec956fb"),n7=s._(n5),n9=n("ceaa6e2b"),re=s._(n9);n("85bd30b0");var rt=n("95ad263f");let rn=e=>e[Math.floor(Math.random()*e.length)],rr=(e,t)=>[...e].sort(()=>.5-Math.random()).slice(0,Math.min(t,e.length)),ri=[{title:"B\u1EA3n tin s\xe1ng",duration:30,priority:7,type:ee.ScheduleType.ROUTINE},{title:"Ch\xe0o c\u1EDD \u0111\u1EA7u tu\u1EA7n",duration:15,priority:8,type:ee.ScheduleType.ROUTINE},{title:"Th\xf4ng b\xe1o th\u1EDDi ti\u1EBFt",duration:10,priority:5,type:ee.ScheduleType.ROUTINE},{title:"Tin t\u1EE9c trong n\u01B0\u1EDBc",duration:20,priority:6,type:ee.ScheduleType.ONE_TIME},{title:"Tin t\u1EE9c qu\u1ED1c t\u1EBF",duration:15,priority:5,type:ee.ScheduleType.ONE_TIME},{title:"B\u1EA3n tin tr\u01B0a",duration:30,priority:7,type:ee.ScheduleType.ROUTINE},{title:"Th\xf4ng tin th\u1ECB tr\u01B0\u1EDDng",duration:15,priority:5,type:ee.ScheduleType.ONE_TIME},{title:"T\u01B0 v\u1EA5n n\xf4ng nghi\u1EC7p",duration:20,priority:6,type:ee.ScheduleType.ROUTINE},{title:"Ch\u01B0\u01A1ng tr\xecnh ca nh\u1EA1c",duration:60,priority:4,type:ee.ScheduleType.ONE_TIME},{title:"Tuy\xean truy\u1EC1n ph\xe1p lu\u1EADt",duration:30,priority:6,type:ee.ScheduleType.ROUTINE},{title:"Gi\xe1o d\u1EE5c s\u1EE9c kh\u1ECFe",duration:25,priority:5,type:ee.ScheduleType.ONE_TIME},{title:"V\u0103n h\xf3a \u0111\u1ECBa ph\u01B0\u01A1ng",duration:30,priority:5,type:ee.ScheduleType.ONE_TIME},{title:"B\u1EA3n tin t\u1ED1i",duration:30,priority:7,type:ee.ScheduleType.ROUTINE},{title:"Ch\u01B0\u01A1ng tr\xecnh gi\u1EA3i tr\xed",duration:60,priority:4,type:ee.ScheduleType.ONE_TIME},{title:"Nh\u1EA1c d\xe2n ca",duration:45,priority:4,type:ee.ScheduleType.ONE_TIME},{title:"Th\u1EC3 thao trong tu\u1EA7n",duration:30,priority:5,type:ee.ScheduleType.ROUTINE},{title:"Th\xf4ng b\xe1o kh\u1EA9n c\u1EA5p",duration:15,priority:10,type:ee.ScheduleType.EMERGENCY},{title:"C\u1EA3nh b\xe1o thi\xean tai",duration:10,priority:10,type:ee.ScheduleType.EMERGENCY},{title:"H\u01B0\u1EDBng d\u1EABn s\u01A1 t\xe1n",duration:20,priority:10,type:ee.ScheduleType.EMERGENCY},{title:"Th\xf4ng b\xe1o quan tr\u1ECDng",duration:15,priority:9,type:ee.ScheduleType.EMERGENCY},{title:"H\u1ECDc ti\u1EBFng Anh qua radio",duration:30,priority:5,type:ee.ScheduleType.ROUTINE},{title:"K\u1EF9 n\u0103ng s\u1ED1ng",duration:25,priority:5,type:ee.ScheduleType.ONE_TIME},{title:"T\u01B0 v\u1EA5n ph\xe1p lu\u1EADt",duration:30,priority:6,type:ee.ScheduleType.ROUTINE},{title:"G\xf3c th\u01B0 b\u1EA1n \u0111\u1ECDc",duration:20,priority:4,type:ee.ScheduleType.ONE_TIME},{title:"C\xe2u chuy\u1EC7n l\xe0ng x\xf3m",duration:30,priority:4,type:ee.ScheduleType.ONE_TIME},{title:"Tuy\xean d\u01B0\u01A1ng \u0111i\u1EC3n h\xecnh",duration:25,priority:6,type:ee.ScheduleType.ONE_TIME}],rs=[6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5,19,19.5,20,20.5,21,21.5],ra=o.mockUnits.getAll().filter(e=>e.id.startsWith("ward-")&&!e.id.includes("admin")),rl=ez.mockDevices.getAll(),ro=[],rc=1,rd=new Date,ru=rd.getHours(),rh=rd.getMinutes();for(let e=-10;e<=10;e++){let t=new Date(rd);t.setDate(rd.getDate()+e),t.setHours(0,0,0,0);let n=e<0,r=0===e,i=e>0,s=Math.floor(11*Math.random())+10;for(let a=0;a<s;a++){let s,a,l,o,c,d,u;let h=rn(ri),p=rn(rs),f=new Date(t),m=Math.floor(p),g=p%1*60;f.setHours(m,g,0,0);let v=new Date(f);v.setMinutes(v.getMinutes()+h.duration);let b=r&&ru===m&&rh>=g&&rh<g+h.duration;if(h.type===ee.ScheduleType.EMERGENCY)s=n?Math.random()>.8?ee.ScheduleStatus.CANCELED:ee.ScheduleStatus.COMPLETED:b?ee.ScheduleStatus.RUNNING:Math.random()>.5?ee.ScheduleStatus.READY:ee.ScheduleStatus.APPROVED;else if(n){let e=Math.random();s=e<.85?ee.ScheduleStatus.COMPLETED:e<.95?ee.ScheduleStatus.CANCELED:ee.ScheduleStatus.REJECTED;}else if(b)s=ee.ScheduleStatus.RUNNING;else if(i||r){let e=Math.random();s=e<.05?ee.ScheduleStatus.DRAFT:e<.2?ee.ScheduleStatus.PENDING_APPROVAL:e<.45?ee.ScheduleStatus.READY:e<.7?ee.ScheduleStatus.APPROVED:e<.85?ee.ScheduleStatus.READY:e<.95?ee.ScheduleStatus.PENDING_APPROVAL:ee.ScheduleStatus.REJECTED;}else s=ee.ScheduleStatus.READY;let y=Math.random();y<.5?(a=ee.ScheduleSourceType.FILE,l=`https://storage.example.com/audio/${rc}.mp3`):y<.7?(a=ee.ScheduleSourceType.STREAM,l=`http://stream.example.com/channel-${Math.floor(5*Math.random())+1}`):y<.85?(a=ee.ScheduleSourceType.TTS,l="",o=`N\u{1ED9}i dung ${h.title} - ${new Date().toLocaleDateString("vi-VN")}`):(a=ee.ScheduleSourceType.RELAY,l=`relay://province-hanoi/channel-${Math.floor(3*Math.random())+1}`,c="province-hanoi",d=rn(["PROVINCE","DISTRICT"]));let E=Math.random(),x=[],S=[];if(E<.3?x=rr(ra,Math.floor(3*Math.random())+1).map(e=>e.id):E<.6?S=rr(rl,Math.floor(10*Math.random())+1).map(e=>e.id):x=rr(ra,Math.floor(5*Math.random())+1).map(e=>e.id),h.type===ee.ScheduleType.ROUTINE){let e=Math.random();u=e<.5?[1,2,3,4,5]:e<.7?[0,6]:[0,1,2,3,4,5,6];}let T={id:`schedule-${rc}`,title:`${h.title} ${0!==e?`(${e>0?"+":""}${e}d)`:""}`,description:Math.random()>.7?`M\xf4 t\u{1EA3} chi ti\u{1EBF}t cho ${h.title}`:void 0,ownerUnitId:x[0]||"province-hanoi",type:h.type,priority:h.priority,sourceType:a,sourceUrl:l,ttsContent:o,sourceUnitId:c,relayFromLevel:d,startTime:f,endTime:v,daysOfWeek:u,targetUnitIds:x,targetDeviceIds:S,status:s,approvedBy:[ee.ScheduleStatus.APPROVED,ee.ScheduleStatus.RUNNING,ee.ScheduleStatus.COMPLETED].includes(s)?`admin-${Math.floor(100*Math.random())}`:void 0,createdAt:new Date(t.getTime()-6048e5*Math.random())};ro.push(T),rc++;}}ro.sort((e,t)=>e.startTime.getTime()-t.startTime.getTime()),console.log(`\u{2705} Generated ${ro.length} mock schedules`),console.log(`\u{1F4CA} Status distribution:`,{DRAFT:ro.filter(e=>e.status===ee.ScheduleStatus.DRAFT).length,PENDING_APPROVAL:ro.filter(e=>e.status===ee.ScheduleStatus.PENDING_APPROVAL).length,READY:ro.filter(e=>e.status===ee.ScheduleStatus.READY).length,RUNNING:ro.filter(e=>e.status===ee.ScheduleStatus.RUNNING).length,COMPLETED:ro.filter(e=>e.status===ee.ScheduleStatus.COMPLETED).length,APPROVED:ro.filter(e=>e.status===ee.ScheduleStatus.APPROVED).length,CANCELED:ro.filter(e=>e.status===ee.ScheduleStatus.CANCELED).length,REJECTED:ro.filter(e=>e.status===ee.ScheduleStatus.REJECTED).length});let rp=new rt.AbstractMock({defaultData:ro});var rf=n("5e47de0d"),rm=n("1f36ab3a"),rg=class extends k.Subscribable{constructor(e,t){super(),this.options=t,this.#h=e,this.#p=null,this.#f=(0,rf.pendingThenable)(),this.bindMethods(),this.setOptions(t);}#h;#m=void 0;#g=void 0;#v=void 0;#b;#y;#f;#p;#E;#x;#S;#T;#w;#C;#R=new Set;bindMethods(){this.refetch=this.refetch.bind(this);}onSubscribe(){1===this.listeners.size&&(this.#m.addObserver(this),rv(this.#m,this.options)?this.#D():this.updateResult(),this.#j());}onUnsubscribe(){this.hasListeners()||this.destroy();}shouldFetchOnReconnect(){return rb(this.#m,this.options,this.options.refetchOnReconnect);}shouldFetchOnWindowFocus(){return rb(this.#m,this.options,this.options.refetchOnWindowFocus);}destroy(){this.listeners=new Set,this.#O(),this.#I(),this.#m.removeObserver(this);}setOptions(e){let t=this.options,n=this.#m;if(this.options=this.#h.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,I.resolveEnabled)(this.options.enabled,this.#m))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#m.setOptions(this.options),t._defaulted&&!(0,I.shallowEqualObjects)(this.options,t)&&this.#h.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#m,observer:this});let r=this.hasListeners();r&&ry(this.#m,n,this.options,t)&&this.#D(),this.updateResult(),r&&(this.#m!==n||(0,I.resolveEnabled)(this.options.enabled,this.#m)!==(0,I.resolveEnabled)(t.enabled,this.#m)||(0,I.resolveStaleTime)(this.options.staleTime,this.#m)!==(0,I.resolveStaleTime)(t.staleTime,this.#m))&&this.#M();let i=this.#k();r&&(this.#m!==n||(0,I.resolveEnabled)(this.options.enabled,this.#m)!==(0,I.resolveEnabled)(t.enabled,this.#m)||i!==this.#C)&&this.#P(i);}getOptimisticResult(e){let t=this.#h.getQueryCache().build(this.#h,e),n=this.createResult(t,e);return(0,I.shallowEqualObjects)(this.getCurrentResult(),n)||(this.#v=n,this.#y=this.options,this.#b=this.#m.state),n;}getCurrentResult(){return this.#v;}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null==t||t(n),"promise"!==n||(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#f.status||this.#f.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))});}trackProp(e){this.#R.add(e);}getCurrentQuery(){return this.#m;}refetch({...e}={}){return this.fetch({...e});}fetchOptimistic(e){let t=this.#h.defaultQueryOptions(e),n=this.#h.getQueryCache().build(this.#h,t);return n.fetch().then(()=>this.createResult(n,t));}fetch(e){return this.#D({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#v));}#D(e){this.#N();let t=this.#m.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(I.noop)),t;}#M(){this.#O();let e=(0,I.resolveStaleTime)(this.options.staleTime,this.#m);if(I.isServer||this.#v.isStale||!(0,I.isValidTimeout)(e))return;let t=(0,I.timeUntilStale)(this.#v.dataUpdatedAt,e);this.#T=rm.timeoutManager.setTimeout(()=>{this.#v.isStale||this.updateResult();},t+1);}#k(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#m):this.options.refetchInterval)??!1;}#P(e){this.#I(),this.#C=e,!I.isServer&&!1!==(0,I.resolveEnabled)(this.options.enabled,this.#m)&&(0,I.isValidTimeout)(this.#C)&&0!==this.#C&&(this.#w=rm.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||F.focusManager.isFocused())&&this.#D();},this.#C));}#j(){this.#M(),this.#P(this.#k());}#O(){this.#T&&(rm.timeoutManager.clearTimeout(this.#T),this.#T=void 0);}#I(){this.#w&&(rm.timeoutManager.clearInterval(this.#w),this.#w=void 0);}createResult(e,t){let n;let r=this.#m,i=this.options,s=this.#v,a=this.#b,l=this.#y,o=e!==r?e.state:this.#g,{state:c}=e,d={...c},u=!1;if(t._optimisticResults){let n=this.hasListeners(),s=!n&&rv(e,t),a=n&&ry(e,r,t,i);(s||a)&&(d={...d,...(0,N.fetchState)(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle");}let{error:h,errorUpdatedAt:p,status:f}=d;n=d.data;let m=!1;if(void 0!==t.placeholderData&&void 0===n&&"pending"===f){let e;if((null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))e=s.data,m=!0;else{var g;e="function"==typeof t.placeholderData?t.placeholderData(null===(g=this.#S)||void 0===g?void 0:g.state.data,this.#S):t.placeholderData;}void 0!==e&&(f="success",n=(0,I.replaceData)(null==s?void 0:s.data,e,t),u=!0);}if(t.select&&void 0!==n&&!m){if(s&&n===(null==a?void 0:a.data)&&t.select===this.#E)n=this.#x;else try{this.#E=t.select,n=t.select(n),n=(0,I.replaceData)(null==s?void 0:s.data,n,t),this.#x=n,this.#p=null;}catch(e){this.#p=e;}}this.#p&&(h=this.#p,n=this.#x,p=Date.now(),f="error");let v="fetching"===d.fetchStatus,b="pending"===f,y="error"===f,E=b&&v,x=void 0!==n,S={status:f,fetchStatus:d.fetchStatus,isPending:b,isSuccess:"success"===f,isError:y,isInitialLoading:E,isLoading:E,data:n,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>o.dataUpdateCount||d.errorUpdateCount>o.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:y&&!x,isPaused:"paused"===d.fetchStatus,isPlaceholderData:u,isRefetchError:y&&x,isStale:rE(e,t),refetch:this.refetch,promise:this.#f,isEnabled:!1!==(0,I.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==S.data,n="error"===S.status&&!t,i=e=>{n?e.reject(S.error):t&&e.resolve(S.data);},s=()=>{i(this.#f=S.promise=(0,rf.pendingThenable)());},a=this.#f;switch(a.status){case"pending":e.queryHash===r.queryHash&&i(a);break;case"fulfilled":(n||S.data!==a.value)&&s();break;case"rejected":n&&S.error===a.reason||s();}}return S;}updateResult(){let e=this.#v,t=this.createResult(this.#m,this.options);this.#b=this.#m.state,this.#y=this.options,void 0!==this.#b.data&&(this.#S=this.#m),(0,I.shallowEqualObjects)(t,e)||(this.#v=t,this.#A({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.#R.size)return!0;let r=new Set(n??this.#R);return this.options.throwOnError&&r.add("error"),Object.keys(this.#v).some(t=>this.#v[t]!==e[t]&&r.has(t));})()}));}#N(){let e=this.#h.getQueryCache().build(this.#h,this.options);if(e===this.#m)return;let t=this.#m;this.#m=e,this.#g=e.state,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this));}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#j();}#A(e){M.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#v);}),this.#h.getQueryCache().notify({query:this.#m,type:"observerResultsUpdated"});});}};function rv(e,t){return!1!==(0,I.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)||void 0!==e.state.data&&rb(e,t,t.refetchOnMount);}function rb(e,t,n){if(!1!==(0,I.resolveEnabled)(t.enabled,e)&&"static"!==(0,I.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&rE(e,t);}return!1;}function ry(e,t,n,r){return(e!==t||!1===(0,I.resolveEnabled)(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&rE(e,n);}function rE(e,t){return!1!==(0,I.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,I.resolveStaleTime)(t.staleTime,e));}var rx=f.createContext((r=!1,{clearReset:()=>{r=!1;},reset:()=>{r=!0;},isReset:()=>r})),rS=()=>f.useContext(rx),rT=(e,t,n)=>{let r=(null==n?void 0:n.state.error)&&"function"==typeof e.throwOnError?(0,I.shouldThrowError)(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&!t.isReset()&&(e.retryOnMount=!1);},rw=e=>{f.useEffect(()=>{e.clearReset();},[e]);},rC=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&void 0===e.data||(0,I.shouldThrowError)(n,[e.error,r])),rR=f.createContext(!1),rD=()=>f.useContext(rR);rR.Provider;var rj=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>t(n(...e)):t(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3));}},rO=(e,t)=>e.isLoading&&e.isFetching&&!t,rI=(e,t)=>(null==e?void 0:e.suspense)&&t.isPending,rN=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset();});function rM(e,t){return function(e,t,n){var r,i,s,a;let l=rD(),o=rS(),c=(0,$.useQueryClient)(n),d=c.defaultQueryOptions(e);null===(i=c.getDefaultOptions().queries)||void 0===i||null===(r=i._experimental_beforeQuery)||void 0===r||r.call(i,d);let u=c.getQueryCache().get(d.queryHash);d._optimisticResults=l?"isRestoring":"optimistic",rj(d),rT(d,o,u),rw(o);let h=!c.getQueryCache().get(d.queryHash),[p]=f.useState(()=>new t(c,d)),m=p.getOptimisticResult(d),g=!l&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=g?p.subscribe(M.notifyManager.batchCalls(e)):I.noop;return p.updateResult(),t;},[p,g]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),f.useEffect(()=>{p.setOptions(d);},[d,p]),rI(d,m))throw rN(d,p,o);if(rC({result:m,errorResetBoundary:o,throwOnError:d.throwOnError,query:u,suspense:d.suspense}))throw m.error;if(null===(a=c.getDefaultOptions().queries)||void 0===a||null===(s=a._experimental_afterQuery)||void 0===s||s.call(a,d,m),d.experimental_prefetchInRender&&!I.isServer&&rO(m,l)){let e=h?rN(d,p,o):null==u?void 0:u.promise;null==e||e.catch(I.noop).finally(()=>{p.updateResult();});}return d.notifyOnChangeProps?m:p.trackResult(m);}(e,rg,t);}let rk=()=>rM({queryKey:["schedules"],queryFn:async()=>(await new Promise(e=>setTimeout(e,800)),rp.getAll())});ej.default.locale("vi");let{Text:rP}=re.default,rA=({onEdit:e,selectedUnitId:t,scheduleFilter:n="all"})=>{let{data:r,isLoading:i}=rk(),s=(0,f.useRef)(null),[a,c]=(0,f.useState)((0,ej.default)()),[d,u]=(0,f.useState)("timeGridWeek"),h=ez.mockDevices,p=o.mockUnits,m=e=>{let t=p.getAll(),n=[e],r=e=>{t.filter(t=>t.parentId===e).forEach(e=>{n.push(e.id),r(e.id);});};return r(e),n;},g=(()=>{if(!t||!r)return r;let e=m(t);return r.filter(t=>{if(e.includes(t.ownerUnitId)||t.targetUnitIds.some(t=>e.includes(t)))return!0;let n=h.getAll().filter(t=>e.includes(t.unitId)).map(e=>e.id);return!!t.targetDeviceIds.some(e=>n.includes(e));});})(),v=(()=>{if(!g)return[];switch(n){case"all":default:return g;case"unit":return g.filter(e=>e.sourceType!==ee.ScheduleSourceType.RELAY);case"relay":return g.filter(e=>e.sourceType===ee.ScheduleSourceType.RELAY);}})(),b=null==v?void 0:v.map(t=>{var n;let r=rz(t.status,t.type);return{id:t.id,title:t.title,start:t.startTime,end:t.endTime,backgroundColor:r.bg,borderColor:r.border,textColor:r.text,extendedProps:{status:t.status,type:t.type,sourceType:t.sourceType,originalData:t,accentColor:r.border,onEdit:e},daysOfWeek:t.daysOfWeek,...t.type===ee.ScheduleType.ROUTINE&&t.daysOfWeek?{startTime:t.startTime.toTimeString().slice(0,8),endTime:null===(n=t.endTime)||void 0===n?void 0:n.toTimeString().slice(0,8),startRecur:t.startTime}:{}};});return(0,l.jsxs)(eo.default,{title:"L\u1ECBch ph\xe1t s\xf3ng",bordered:!1,className:"shadow-md",children:[(0,l.jsx)(n8.default,{spinning:i,children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-100 shadow-sm",children:[(0,l.jsxs)(eU.default,{size:"middle",children:[(0,l.jsx)(W.default,{icon:(0,l.jsx)(e2.default,{}),onClick:()=>{var e;let t=null===(e=s.current)||void 0===e?void 0:e.getApi();null==t||t.prev(),c((0,ej.default)(null==t?void 0:t.getDate()));}}),(0,l.jsx)(W.default,{icon:(0,l.jsx)(e8.default,{}),onClick:()=>{var e;let t=null===(e=s.current)||void 0===e?void 0:e.getApi();null==t||t.next(),c((0,ej.default)(null==t?void 0:t.getDate()));}}),(0,l.jsx)(W.default,{type:"primary",ghost:!0,onClick:()=>{var e;let t=null===(e=s.current)||void 0===e?void 0:e.getApi();null==t||t.today(),c((0,ej.default)(null==t?void 0:t.getDate()));},children:"H\xf4m nay"}),(0,l.jsx)(n4.default,{value:a,onChange:e=>{if(e){var t;let n=null===(t=s.current)||void 0===t?void 0:t.getApi();null==n||n.gotoDate(e.toDate()),c(e);}},allowClear:!1,format:"DD/MM/YYYY",className:"w-36"}),(0,l.jsx)(rP,{strong:!0,className:"text-lg ml-2 capitalize text-blue-900",children:a.format("MMMM YYYY")})]}),(0,l.jsx)(X.default,{value:d,onChange:e=>{var t;let n=null===(t=s.current)||void 0===t?void 0:t.getApi();null==n||n.changeView(e),u(e);},options:[{label:"Th\xe1ng",value:"dayGridMonth"},{label:"Tu\u1EA7n",value:"timeGridWeek"},{label:"Ng\xe0y",value:"timeGridDay"}]})]}),(0,l.jsxs)("div",{className:"h-[600px]",children:[(0,l.jsx)(ny,{ref:s,plugins:[t3,n2,ng],initialView:"timeGridWeek",headerToolbar:!1,events:b,eventContent:rH,locale:"vi",firstDay:1,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",allDaySlot:!1,height:"100%",slotEventOverlap:!1,dayMaxEvents:!0,datesSet:e=>c((0,ej.default)(e.view.currentStart))}),(0,l.jsx)("style",{children:`
                .fc-event {
                    transition: all 0.2s ease;
                    cursor: pointer;
                }
                .fc-event:hover {
                    transform: translateY(-1px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
                }
            `})]})]})}),(0,l.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,l.jsx)(rP,{strong:!0,className:"block mb-3 text-gray-700",children:"Ch\xfa th\xedch tr\u1EA1ng th\xe1i:"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsx)(rL,{color:"#10B981",label:"\u0110ang ch\u1EA1y"}),(0,l.jsx)(rL,{color:"#06B6D4",label:"S\u1EB5n s\xe0ng"}),(0,l.jsx)(rL,{color:"#3B82F6",label:"\u0110\xe3 ho\xe0n th\xe0nh"}),(0,l.jsx)(rL,{color:"#2563EB",label:"\u0110\xe3 duy\u1EC7t"}),(0,l.jsx)(rL,{color:"#F59E0B",label:"Ch\u1EDD duy\u1EC7t"}),(0,l.jsx)(rL,{color:"#9CA3AF",label:"Nh\xe1p"}),(0,l.jsx)(rL,{color:"#64748B",label:"\u0110\xe3 h\u1EE7y"}),(0,l.jsx)(rL,{color:"#DC2626",label:"Kh\u1EA9n c\u1EA5p / T\u1EEB ch\u1ED1i"})]})]})]});},rL=({color:e,label:t})=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:e}}),(0,l.jsx)(rP,{className:"text-sm text-gray-600",children:t})]});function rH(e){var t,n;let{extendedProps:r,title:i}=e.event,{timeText:s}=e,a=r.originalData,o=rU(a.sourceType),c=(0,ej.default)(a.startTime),d=(a.endTime?(0,ej.default)(a.endTime):c.add(1,"hour")).diff(c,"minute"),u=((null===(t=a.targetUnitIds)||void 0===t?void 0:t.length)||0)+((null===(n=a.targetDeviceIds)||void 0===n?void 0:n.length)||0),h=r_(a.priority),p=a.sourceType===ee.ScheduleSourceType.RELAY?rV(a):null,f=(0,l.jsxs)("div",{className:"min-w-[280px] max-w-[350px]",children:[(0,l.jsx)("div",{className:"flex items-start justify-between gap-2 mb-3 pb-2 border-b border-gray-200",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold text-base text-blue-700 mb-1",children:i}),(0,l.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,l.jsx)(ef.default,{color:r$(a.status),className:"text-xs",children:rG(a.status)}),a.type===ee.ScheduleType.EMERGENCY&&(0,l.jsx)(ef.default,{color:"red",icon:(0,l.jsx)(eK,{}),className:"text-xs",children:"KH\u1EA8N C\u1EA4P"}),h]})]})}),(0,l.jsxs)("div",{className:"space-y-2 text-sm mb-3",children:[(0,l.jsx)(rF,{icon:(0,l.jsx)(eb.default,{}),label:"Th\u1EDDi gian",value:`${s} (${d} ph\xfat)`}),(0,l.jsx)(rF,{icon:o.icon,label:"Ngu\u1ED3n ph\xe1t",value:o.text}),(0,l.jsx)(rF,{icon:(0,l.jsx)(te,{}),label:"Ph\u1EA1m vi",value:u>0?`${u} \u{111}i\u{1EC3}m ph\xe1t`:"To\xe0n b\u1ED9 h\u1EC7 th\u1ED1ng"}),p&&(0,l.jsx)(rF,{icon:(0,l.jsx)(tn,{}),label:"Ti\u1EBFp s\xf3ng",value:p}),a.description&&(0,l.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,l.jsx)(rP,{className:"text-xs text-gray-500 italic",children:a.description})})]}),r.onEdit&&(0,l.jsx)("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:(0,l.jsx)(W.default,{type:"primary",size:"small",icon:(0,l.jsx)(eZ.default,{}),onClick:e=>{e.stopPropagation(),r.onEdit(a.id);},className:"flex-1",children:"Xem chi ti\u1EBFt"})})]});return(0,l.jsx)(n7.default,{title:f,placement:"rightTop",color:"white",overlayInnerStyle:{color:"black",padding:"12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},overlayStyle:{maxWidth:"400px"},children:(0,l.jsxs)("div",{className:"p-1.5 h-full flex flex-col rounded-md shadow-sm hover:shadow-md transition-all cursor-pointer",style:{backgroundColor:r.accentColor,color:"#FFFFFF",borderLeft:"4px solid rgba(0,0,0,0.2)"},children:[(0,l.jsxs)("div",{className:"font-semibold text-xs opacity-95 flex justify-between items-center mb-1",children:[(0,l.jsx)("span",{children:s}),(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:[a.priority>=8&&(0,l.jsx)(e0,{className:"text-white animate-pulse"}),a.type===ee.ScheduleType.EMERGENCY&&(0,l.jsx)(eK,{className:"text-white animate-pulse"})]})]}),(0,l.jsx)("div",{className:"font-bold text-sm leading-tight flex-1 line-clamp-2 mb-1",children:i}),(0,l.jsxs)("div",{className:"mt-auto flex gap-2 opacity-90 text-xs items-center",children:[o.icon,u>0&&(0,l.jsxs)("span",{className:"flex items-center gap-0.5",children:[(0,l.jsx)(te,{}),(0,l.jsx)("span",{className:"text-[10px]",children:u})]}),a.sourceType===ee.ScheduleSourceType.RELAY&&(0,l.jsx)(tn,{})]})]})});}let rF=({icon:e,label:t,value:n})=>(0,l.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,l.jsx)("span",{className:"text-gray-400 mt-0.5",children:e}),(0,l.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,l.jsxs)("span",{className:"text-gray-500 font-medium min-w-[80px]",children:[t,":"]}),(0,l.jsx)("span",{className:"text-gray-700 flex-1",children:n})]})]}),rU=e=>{switch(e){case ee.ScheduleSourceType.STREAM:return{icon:(0,l.jsx)(e4.default,{}),text:"Ti\u1EBFp s\xf3ng tr\u1EF1c ti\u1EBFp"};case ee.ScheduleSourceType.TTS:return{icon:(0,l.jsx)(e7.default,{}),text:"Chuy\u1EC3n v\u0103n b\u1EA3n (TTS)"};case ee.ScheduleSourceType.RELAY:return{icon:(0,l.jsx)(tn,{}),text:"Ti\u1EBFp s\xf3ng t\u1EEB c\u1EA5p tr\xean"};case ee.ScheduleSourceType.FILE:default:return{icon:(0,l.jsx)(E.default,{}),text:"File \xe2m thanh"};}},r_=e=>e>=8?(0,l.jsx)(ef.default,{color:"red",icon:(0,l.jsx)(e0,{}),className:"text-xs",children:"\u01AFu ti\xean cao"}):e>=5?(0,l.jsx)(ef.default,{color:"orange",className:"text-xs",children:"\u01AFu ti\xean TB"}):null,rV=e=>{let t=[];return e.relayFromLevel&&t.push(`T\u{1EEB} c\u{1EA5}p ${{PROVINCE:"T\u1EC9nh",DISTRICT:"Huy\u1EC7n",COMMUNE:"X\xe3"}[e.relayFromLevel]}`),e.sourceUnitId&&t.push(`\u{110}\u{1A1}n v\u{1ECB}: ${e.sourceUnitId}`),t.join(" \u2022 ")||"Ti\u1EBFp s\xf3ng t\u1EEB c\u1EA5p tr\xean";},rz=(e,t)=>{if(t===ee.ScheduleType.EMERGENCY)return{bg:"#FEE2E2",border:"#DC2626",text:"#991B1B"};switch(e){case ee.ScheduleStatus.RUNNING:return{bg:"#D1FAE5",border:"#10B981",text:"#065F46"};case ee.ScheduleStatus.READY:return{bg:"#CFFAFE",border:"#06B6D4",text:"#164E63"};case ee.ScheduleStatus.COMPLETED:return{bg:"#DBEAFE",border:"#3B82F6",text:"#1E40AF"};case ee.ScheduleStatus.APPROVED:return{bg:"#EFF6FF",border:"#2563EB",text:"#1E3A8A"};case ee.ScheduleStatus.PENDING_APPROVAL:return{bg:"#FEF3C7",border:"#F59E0B",text:"#92400E"};case ee.ScheduleStatus.DRAFT:return{bg:"#F3F4F6",border:"#9CA3AF",text:"#374151"};case ee.ScheduleStatus.CANCELED:return{bg:"#F1F5F9",border:"#64748B",text:"#334155"};case ee.ScheduleStatus.REJECTED:return{bg:"#FEE2E2",border:"#EF4444",text:"#991B1B"};default:return{bg:"#F9FAFB",border:"#D1D5DB",text:"#6B7280"};}},r$=e=>{switch(e){case ee.ScheduleStatus.RUNNING:return"green";case ee.ScheduleStatus.READY:return"cyan";case ee.ScheduleStatus.COMPLETED:case ee.ScheduleStatus.APPROVED:return"blue";case ee.ScheduleStatus.PENDING_APPROVAL:return"orange";case ee.ScheduleStatus.DRAFT:case ee.ScheduleStatus.CANCELED:return"default";case ee.ScheduleStatus.REJECTED:return"red";default:return"default";}},rG=e=>{switch(e){case ee.ScheduleStatus.RUNNING:return"\u0110ang ch\u1EA1y";case ee.ScheduleStatus.READY:return"S\u1EB5n s\xe0ng";case ee.ScheduleStatus.COMPLETED:return"\u0110\xe3 ho\xe0n th\xe0nh";case ee.ScheduleStatus.PENDING_APPROVAL:return"Ch\u1EDD duy\u1EC7t";case ee.ScheduleStatus.APPROVED:return"\u0110\xe3 duy\u1EC7t";case ee.ScheduleStatus.DRAFT:return"Nh\xe1p";case ee.ScheduleStatus.CANCELED:return"\u0110\xe3 h\u1EE7y";case ee.ScheduleStatus.REJECTED:return"T\u1EEB ch\u1ED1i";default:return e;}};var rq=n("d1a6b6a0"),rY=s._(rq),rW=n("3875edc9"),rB=s._(rW),rQ=n("86bdbbf4"),rK=s._(rQ),rX=n("10cb4b6e");n("065b3f83");var rZ=n("ef784904"),rJ=n("421e8958"),r0=s._(rJ),r1=n("f7341001"),r2=s._(r1);let r3={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};var r4=n("89a15619"),r6=s._(r4),r8=n("1750aefa"),r5=s._(r8),r7=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let r9=e=>(0,r5.default)(e).map(e=>Object.assign(Object.assign({},null==e?void 0:e.props),{key:e.key}));var ie=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let it=(e,t)=>{let[n,r]=(0,f.useMemo)(()=>{let n,r,i,s;return n=[],r=[],i=!1,s=0,t.filter(e=>e).forEach(t=>{let{filled:a}=t,l=ie(t,["filled"]);if(a){r.push(l),n.push(r),r=[],s=0;return;}let o=e-s;(s+=t.span||1)>=e?(s>e?(i=!0,r.push(Object.assign(Object.assign({},l),{span:o}))):r.push(l),n.push(r),r=[],s=0):r.push(l);}),r.length>0&&n.push(r),[n=n.map(t=>{let n=t.reduce((e,t)=>e+(t.span||1),0);if(n<e){let r=t[t.length-1];r.span=e-(n-(r.span||1));}return t;}),i];},[t,e]);return n;},ir=e=>null!=e,ii=e=>{let{itemPrefixCls:t,component:n,span:r,className:i,style:s,labelStyle:a,contentStyle:l,bordered:o,label:c,content:d,colon:u,type:h,styles:p}=e,{classNames:m}=f.useContext(r6.default),g=Object.assign(Object.assign({},a),null==p?void 0:p.label),v=Object.assign(Object.assign({},l),null==p?void 0:p.content);return o?f.createElement(n,{colSpan:r,style:s,className:(0,rK.default)(i,{[`${t}-item-${h}`]:"label"===h||"content"===h,[null==m?void 0:m.label]:(null==m?void 0:m.label)&&"label"===h,[null==m?void 0:m.content]:(null==m?void 0:m.content)&&"content"===h})},ir(c)&&f.createElement("span",{style:g},c),ir(d)&&f.createElement("span",{style:v},d)):f.createElement(n,{colSpan:r,style:s,className:(0,rK.default)(`${t}-item`,i)},f.createElement("div",{className:`${t}-item-container`},ir(c)&&f.createElement("span",{style:g,className:(0,rK.default)(`${t}-item-label`,null==m?void 0:m.label,{[`${t}-item-no-colon`]:!u})},c),ir(d)&&f.createElement("span",{style:v,className:(0,rK.default)(`${t}-item-content`,null==m?void 0:m.content)},d)));};function is(e,{colon:t,prefixCls:n,bordered:r},{component:i,type:s,showLabel:a,showContent:l,labelStyle:o,contentStyle:c,styles:d}){return e.map(({label:e,children:u,prefixCls:h=n,className:p,style:m,labelStyle:g,contentStyle:v,span:b=1,key:y,styles:E},x)=>"string"==typeof i?f.createElement(ii,{key:`${s}-${y||x}`,className:p,style:m,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},o),null==d?void 0:d.label),g),null==E?void 0:E.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},c),null==d?void 0:d.content),v),null==E?void 0:E.content)},span:b,colon:t,component:i,itemPrefixCls:h,bordered:r,label:a?e:null,content:l?u:null,type:s}):[f.createElement(ii,{key:`label-${y||x}`,className:p,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),null==d?void 0:d.label),m),g),null==E?void 0:E.label),span:1,colon:t,component:i[0],itemPrefixCls:h,bordered:r,label:e,type:"label"}),f.createElement(ii,{key:`content-${y||x}`,className:p,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c),null==d?void 0:d.content),m),v),null==E?void 0:E.content),span:2*b-1,component:i[1],itemPrefixCls:h,bordered:r,content:u,type:"content"})]);}let ia=e=>{let t=f.useContext(r6.default),{prefixCls:n,vertical:r,row:i,index:s,bordered:a}=e;return r?f.createElement(f.Fragment,null,f.createElement("tr",{key:`label-${s}`,className:`${n}-row`},is(i,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),f.createElement("tr",{key:`content-${s}`,className:`${n}-row`},is(i,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):f.createElement("tr",{key:s,className:`${n}-row`},is(i,e,Object.assign({component:a?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)));};var il=n("80b9bda6"),io=n("fcc85618"),ic=n("acdb6e73"),id=n("2921cdc3");let iu=e=>{let{componentCls:t,labelBg:n}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${(0,il.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${(0,il.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,il.unit)(e.padding)} ${(0,il.unit)(e.paddingLG)}`,borderInlineEnd:`${(0,il.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:n,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,il.unit)(e.paddingSM)} ${(0,il.unit)(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,il.unit)(e.paddingXS)} ${(0,il.unit)(e.padding)}`}}}}};},ih=e=>{let{componentCls:t,extraColor:n,itemPaddingBottom:r,itemPaddingEnd:i,colonMarginRight:s,colonMarginLeft:a,titleMarginBottom:l}=e;return{[t]:Object.assign(Object.assign(Object.assign({},(0,io.resetComponent)(e)),iu(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:l},[`${t}-title`]:Object.assign(Object.assign({},io.textEllipsis),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:n,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:r,paddingInlineEnd:i},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${(0,il.unit)(a)} ${(0,il.unit)(s)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})};};var ip=(0,ic.genStyleHooks)("Descriptions",e=>ih((0,id.mergeToken)(e,{})),e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText})),im=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let ig=e=>{let{prefixCls:t,title:n,extra:r,column:i,colon:s=!0,bordered:a,layout:l,children:o,className:c,rootClassName:d,style:u,size:h,labelStyle:p,contentStyle:m,styles:g,items:v,classNames:b}=e,y=im(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:E,direction:x,className:S,style:T,classNames:w,styles:C}=(0,rZ.useComponentConfig)("descriptions"),R=E("descriptions",t),D=(0,r2.default)(),j=f.useMemo(()=>{var e;return"number"==typeof i?i:null!==(e=(0,rX.matchScreen)(D,Object.assign(Object.assign({},r3),i)))&&void 0!==e?e:3;},[D,i]),O=function(e,t,n){let r=f.useMemo(()=>t||r9(n),[t,n]);return f.useMemo(()=>r.map(t=>{var{span:n}=t,r=r7(t,["span"]);return"filled"===n?Object.assign(Object.assign({},r),{filled:!0}):Object.assign(Object.assign({},r),{span:"number"==typeof n?n:(0,rX.matchScreen)(e,n)});}),[r,e]);}(D,v,o),I=(0,r0.default)(h),N=it(j,O),[M,k,P]=ip(R),A=f.useMemo(()=>({labelStyle:p,contentStyle:m,styles:{content:Object.assign(Object.assign({},C.content),null==g?void 0:g.content),label:Object.assign(Object.assign({},C.label),null==g?void 0:g.label)},classNames:{label:(0,rK.default)(w.label,null==b?void 0:b.label),content:(0,rK.default)(w.content,null==b?void 0:b.content)}}),[p,m,g,b,w,C]);return M(f.createElement(r6.default.Provider,{value:A},f.createElement("div",Object.assign({className:(0,rK.default)(R,S,w.root,null==b?void 0:b.root,{[`${R}-${I}`]:I&&"default"!==I,[`${R}-bordered`]:!!a,[`${R}-rtl`]:"rtl"===x},c,d,k,P),style:Object.assign(Object.assign(Object.assign(Object.assign({},T),C.root),null==g?void 0:g.root),u)},y),(n||r)&&f.createElement("div",{className:(0,rK.default)(`${R}-header`,w.header,null==b?void 0:b.header),style:Object.assign(Object.assign({},C.header),null==g?void 0:g.header)},n&&f.createElement("div",{className:(0,rK.default)(`${R}-title`,w.title,null==b?void 0:b.title),style:Object.assign(Object.assign({},C.title),null==g?void 0:g.title)},n),r&&f.createElement("div",{className:(0,rK.default)(`${R}-extra`,w.extra,null==b?void 0:b.extra),style:Object.assign(Object.assign({},C.extra),null==g?void 0:g.extra)},r)),f.createElement("div",{className:`${R}-view`},f.createElement("table",null,f.createElement("tbody",null,N.map((e,t)=>f.createElement(ia,{key:t,index:t,colon:s,prefixCls:R,vertical:"vertical"===l,bordered:a,row:e}))))))));};ig.Item=({children:e})=>e;var iv=n("460cd151"),ib=s._(iv);let iy=({open:e,schedule:t,onClose:n,onEdit:r})=>{var i,s,a;if(!t)return null;let c=e=>{let t=o.mockUnits.getAll().find(t=>t.id===e);return(null==t?void 0:t.name)||e;},d=(i=t.status,({[ee.ScheduleStatus.DRAFT]:{color:"default",text:"Nh\xe1p"},[ee.ScheduleStatus.PENDING_APPROVAL]:{color:"orange",text:"Ch\u1EDD duy\u1EC7t"},[ee.ScheduleStatus.READY]:{color:"cyan",text:"S\u1EB5n s\xe0ng"},[ee.ScheduleStatus.RUNNING]:{color:"green",text:"\u0110ang ch\u1EA1y"},[ee.ScheduleStatus.COMPLETED]:{color:"blue",text:"\u0110\xe3 ho\xe0n th\xe0nh"},[ee.ScheduleStatus.APPROVED]:{color:"blue",text:"\u0110\xe3 duy\u1EC7t"},[ee.ScheduleStatus.CANCELED]:{color:"default",text:"\u0110\xe3 h\u1EE7y"},[ee.ScheduleStatus.REJECTED]:{color:"red",text:"T\u1EEB ch\u1ED1i"}})[i]),u=t.endTime?(0,ej.default)(t.endTime).diff((0,ej.default)(t.startTime),"minute"):0;return(0,l.jsx)(Q.default,{title:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(rY.default,{className:"text-2xl text-blue-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lg font-semibold",children:t.title}),(0,l.jsx)("div",{className:"text-sm font-normal text-gray-500",children:"Chi ti\u1EBFt l\u1ECBch ph\xe1t"})]})]}),open:e,onCancel:n,width:800,footer:(0,l.jsxs)(eU.default,{children:[(0,l.jsx)(W.default,{onClick:n,children:"\u0110\xf3ng"}),r&&(0,l.jsx)(W.default,{type:"primary",icon:(0,l.jsx)(rB.default,{}),onClick:()=>{r(t),n();},children:"Ch\u1EC9nh s\u1EEDa"})]}),children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,l.jsx)(ef.default,{color:d.color,className:"text-sm px-3 py-1",children:d.text}),t.type===ee.ScheduleType.ROUTINE&&(0,l.jsx)(ef.default,{color:"blue",className:"text-sm px-3 py-1",children:"\u0110\u1ECBnh k\u1EF3"}),t.type===ee.ScheduleType.ONE_TIME&&(0,l.jsx)(ef.default,{className:"text-sm px-3 py-1",children:"M\u1ED9t l\u1EA7n"}),t.type===ee.ScheduleType.EMERGENCY&&(0,l.jsx)(ef.default,{color:"red",icon:(0,l.jsx)(eK,{}),className:"text-sm px-3 py-1",children:"KH\u1EA8N C\u1EA4P"}),t.priority>=8&&(0,l.jsxs)(ef.default,{color:"red",icon:(0,l.jsx)(e0,{}),className:"text-sm px-3 py-1",children:["\u01AFu ti\xean cao (",t.priority,")"]})]}),(0,l.jsx)(ib.default,{className:"my-4"}),(0,l.jsxs)(ig,{title:"Th\xf4ng tin c\u01A1 b\u1EA3n",bordered:!0,column:2,size:"small",children:[(0,l.jsx)(ig.Item,{label:"ID",span:2,children:(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:t.id})}),(0,l.jsx)(ig.Item,{label:"\u0110\u01A1n v\u1ECB qu\u1EA3n l\xfd",span:2,children:c(t.ownerUnitId)}),t.description&&(0,l.jsx)(ig.Item,{label:"M\xf4 t\u1EA3",span:2,children:t.description}),(0,l.jsx)(ig.Item,{label:"\u0110\u1ED9 \u01B0u ti\xean",children:t.priority}),(0,l.jsx)(ig.Item,{label:"Ng\xe0y t\u1EA1o",children:(0,ej.default)(t.createdAt).format("DD/MM/YYYY HH:mm")}),t.approvedBy&&(0,l.jsx)(ig.Item,{label:"Ng\u01B0\u1EDDi duy\u1EC7t",span:2,children:t.approvedBy})]}),(0,l.jsx)(ib.default,{className:"my-4"}),(0,l.jsxs)(ig,{title:"Th\u1EDDi gian ph\xe1t s\xf3ng",bordered:!0,column:2,size:"small",children:[(0,l.jsx)(ig.Item,{label:(0,l.jsxs)("span",{children:[(0,l.jsx)(eb.default,{className:"mr-2"}),"B\u1EAFt \u0111\u1EA7u"]}),children:(0,ej.default)(t.startTime).format("DD/MM/YYYY HH:mm")}),(0,l.jsx)(ig.Item,{label:(0,l.jsxs)("span",{children:[(0,l.jsx)(eb.default,{className:"mr-2"}),"K\u1EBFt th\xfac"]}),children:t.endTime?(0,ej.default)(t.endTime).format("DD/MM/YYYY HH:mm"):"Kh\xf4ng x\xe1c \u0111\u1ECBnh"}),(0,l.jsx)(ig.Item,{label:"Th\u1EDDi l\u01B0\u1EE3ng",span:2,children:u>0?`${u} ph\xfat`:"Kh\xf4ng x\xe1c \u0111\u1ECBnh"}),t.type===ee.ScheduleType.ROUTINE&&t.daysOfWeek&&(0,l.jsx)(ig.Item,{label:"Ng\xe0y l\u1EB7p l\u1EA1i",span:2,children:t.daysOfWeek.map(e=>["Ch\u1EE7 nh\u1EADt","Th\u1EE9 2","Th\u1EE9 3","Th\u1EE9 4","Th\u1EE9 5","Th\u1EE9 6","Th\u1EE9 7"][e]).join(", ")})]}),(0,l.jsx)(ib.default,{className:"my-4"}),(0,l.jsxs)(ig,{title:"Ngu\u1ED3n ph\xe1t s\xf3ng",bordered:!0,column:1,size:"small",children:[(0,l.jsx)(ig.Item,{label:"Lo\u1EA1i ngu\u1ED3n",children:(0,l.jsxs)(eU.default,{children:[(s=t.sourceType,({[ee.ScheduleSourceType.FILE]:(0,l.jsx)(E.default,{}),[ee.ScheduleSourceType.STREAM]:(0,l.jsx)(e4.default,{}),[ee.ScheduleSourceType.TTS]:(0,l.jsx)(e7.default,{}),[ee.ScheduleSourceType.RELAY]:(0,l.jsx)(tn,{})})[s]),(a=t.sourceType,({[ee.ScheduleSourceType.FILE]:"File \xe2m thanh",[ee.ScheduleSourceType.STREAM]:"Ti\u1EBFp s\xf3ng tr\u1EF1c ti\u1EBFp",[ee.ScheduleSourceType.TTS]:"Text-to-Speech",[ee.ScheduleSourceType.RELAY]:"Ti\u1EBFp s\xf3ng t\u1EEB c\u1EA5p tr\xean"})[a])]})}),t.sourceType===ee.ScheduleSourceType.FILE&&(0,l.jsx)(ig.Item,{label:"File \xe2m thanh",children:(0,l.jsx)("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:t.sourceUrl})}),t.sourceType===ee.ScheduleSourceType.STREAM&&(0,l.jsx)(ig.Item,{label:"URL Stream",children:(0,l.jsx)("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:t.sourceUrl})}),t.sourceType===ee.ScheduleSourceType.TTS&&(0,l.jsx)(ig.Item,{label:"N\u1ED9i dung TTS",children:(0,l.jsx)("div",{className:"bg-gray-50 p-2 rounded border border-gray-200",children:t.ttsContent})}),t.sourceType===ee.ScheduleSourceType.RELAY&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ig.Item,{label:"Ti\u1EBFp s\xf3ng t\u1EEB",children:t.sourceUnitId?c(t.sourceUnitId):"N/A"}),t.relayFromLevel&&(0,l.jsx)(ig.Item,{label:"C\u1EA5p ti\u1EBFp s\xf3ng",children:t.relayFromLevel})]})]}),(0,l.jsx)(ib.default,{className:"my-4"}),(0,l.jsx)(ig,{title:"Ph\u1EA1m vi ph\xe1t s\xf3ng",bordered:!0,column:1,size:"small",children:0===t.targetUnitIds.length&&0===t.targetDeviceIds.length?(0,l.jsx)(ig.Item,{label:"Ph\u1EA1m vi",children:(0,l.jsx)(ef.default,{color:"blue",icon:(0,l.jsx)(te,{}),children:"To\xe0n b\u1ED9 h\u1EC7 th\u1ED1ng"})}):(0,l.jsxs)(l.Fragment,{children:[t.targetUnitIds.length>0&&(0,l.jsx)(ig.Item,{label:`\u{110}\u{1A1}n v\u{1ECB} (${t.targetUnitIds.length})`,children:(0,l.jsx)("div",{className:"max-h-32 overflow-y-auto",children:(e=>{let t=o.mockUnits.getAll();return e.map(e=>{let n=t.find(t=>t.id===e);return(null==n?void 0:n.name)||e;}).join(", ");})(t.targetUnitIds)})}),t.targetDeviceIds.length>0&&(0,l.jsx)(ig.Item,{label:`Thi\u{1EBF}t b\u{1ECB} (${t.targetDeviceIds.length})`,children:(0,l.jsx)("div",{className:"max-h-32 overflow-y-auto",children:(e=>{let t=ez.mockDevices.getAll();return e.map(e=>{let n=t.find(t=>t.id===e);return(null==n?void 0:n.name)||e;}).join(", ");})(t.targetDeviceIds)})})]})})]})});};var iE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},ix=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:iE}));}),iS=n("96321d0e"),iT=n("bb08821e"),iw=s._(iT),iC=n("90746c75"),iR=s._(iC),iD=n("2e174c18"),ij=s._(iD),iO=n("2aaa19e6"),iI=s._(iO),iN=n("6a4b5c6a"),iM=s._(iN),ik=n("388ebcaa"),iP=s._(ik),iA=n("7429a679"),iL=s._(iA),iH=n("aeb133da"),iF=s._(iH),iU=n("9d84dbff"),i_=s._(iU),iV=n("31d6742e"),iz=s._(iV),i$=n("6cef630f"),iG=s._(i$),iq=n("22b0d1aa"),iY=s._(iq),iW=n("7bb13c88"),iB=s._(iW),iQ=n("6f6c3829"),iK=s._(iQ),iX=n("3b894a78"),iZ=s._(iX),iJ=n("b0bb0adc"),i0=s._(iJ),i1=n("fbbdce3b"),i2=s._(i1),i3=n("19f061d9"),i4=s._(i3),i6=n("33d81c0c"),i8=s._(i6),i5=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",s=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),a=t.toLowerCase(),l=[a];return(".jpg"===a||".jpeg"===a)&&(l=[".jpg",".jpeg"]),l.some(function(e){return n.endsWith(e);});}return/\/\*$/.test(t)?s===t.replace(/\/.*$/,""):i===t||!!/^\w+$/.test(t)&&((0,i8.default)(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0);});}return!0;};function i7(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t);}catch(e){return t;}}function i9(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t);});var n=new FormData;e.data&&Object.keys(e.data).forEach(function(t){var r=e.data[t];if(Array.isArray(r)){r.forEach(function(e){n.append("".concat(t,"[]"),e);});return;}n.append(t,r);}),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t);},t.onload=function(){if(t.status<200||t.status>=300){var n;return e.onError(((n=Error("cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"))).status=t.status,n.method=e.method,n.url=e.action,n),i7(t));}return e.onSuccess(i7(t),t);},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach(function(e){null!==r[e]&&t.setRequestHeader(e,r[e]);}),t.send(n),{abort:function(){t.abort();}};}var se=(i=(0,i2.default)((0,i0.default)().mark(function e(t,n){var r,i,s,a,l,o,c,d;return(0,i0.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=function(){return(o=(0,i2.default)((0,i0.default)().mark(function e(t){return(0,i0.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.file(function(r){n(r)?(t.fullPath&&!r.webkitRelativePath&&(Object.defineProperties(r,{webkitRelativePath:{writable:!0}}),r.webkitRelativePath=t.fullPath.replace(/^\//,""),Object.defineProperties(r,{webkitRelativePath:{writable:!1}})),e(r)):e(null);});}));case 1:case"end":return e.stop();}},e);}))).apply(this,arguments);},l=function(e){return o.apply(this,arguments);},a=function(){return(a=(0,i2.default)((0,i0.default)().mark(function e(t){var n,r,i,s,a;return(0,i0.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.createReader(),r=[];case 2:return e.next=5,new Promise(function(e){n.readEntries(e,function(){return e([]);});});case 5:if(s=(i=e.sent).length){e.next=9;break;}return e.abrupt("break",12);case 9:for(a=0;a<s;a++)r.push(i[a]);e.next=2;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop();}},e);}))).apply(this,arguments);},s=function(e){return a.apply(this,arguments);},r=[],i=[],t.forEach(function(e){return i.push(e.webkitGetAsEntry());}),c=function(){var e=(0,i2.default)((0,i0.default)().mark(function e(t,n){var a,o;return(0,i0.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break;}return e.abrupt("return");case 2:if(t.path=n||"",!t.isFile){e.next=10;break;}return e.next=6,l(t);case 6:(a=e.sent)&&r.push(a),e.next=15;break;case 10:if(!t.isDirectory){e.next=15;break;}return e.next=13,s(t);case 13:o=e.sent,i.push.apply(i,(0,iP.default)(o));case 15:case"end":return e.stop();}},e);}));return function(t,n){return e.apply(this,arguments);};}(),d=0;case 9:if(!(d<i.length)){e.next=15;break;}return e.next=12,c(i[d]);case 12:d++,e.next=9;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop();}},e);})),function(e,t){return i.apply(this,arguments);}),st=+new Date,sn=0;function sr(){return"rc-upload-".concat(st,"-").concat(++sn);}var si=["component","prefixCls","className","classNames","disabled","id","name","style","styles","multiple","accept","capture","children","directory","folder","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],ss=function(e){(0,iz.default)(n,e);var t=(0,iG.default)(n);function n(){(0,iL.default)(this,n);for(var e,r,i,s,a,l=arguments.length,o=Array(l),c=0;c<l;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),(0,iY.default)((0,i_.default)(e),"state",{uid:sr()}),(0,iY.default)((0,i_.default)(e),"reqs",{}),(0,iY.default)((0,i_.default)(e),"fileInput",void 0),(0,iY.default)((0,i_.default)(e),"_isMounted",void 0),(0,iY.default)((0,i_.default)(e),"onChange",function(t){var n=e.props,r=n.accept,i=n.directory,s=t.target.files,a=(0,iP.default)(s).filter(function(e){return!i||i5(e,r);});e.uploadFiles(a),e.reset();}),(0,iY.default)((0,i_.default)(e),"onClick",function(t){var n=e.fileInput;if(n){var r=t.target,i=e.props.onClick;r&&"BUTTON"===r.tagName&&(n.parentNode.focus(),r.blur()),n.click(),i&&i(t);}}),(0,iY.default)((0,i_.default)(e),"onKeyDown",function(t){"Enter"===t.key&&e.onClick(t);}),(0,iY.default)((0,i_.default)(e),"onDataTransferFiles",(r=(0,i2.default)((0,i0.default)().mark(function t(n,r){var i,s,a,l,o,c,d;return(0,i0.default)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=(i=e.props).multiple,a=i.accept,l=i.directory,o=(0,iP.default)(n.items||[]),((c=(0,iP.default)(n.files||[])).length>0||o.some(function(e){return"file"===e.kind;}))&&(null==r||r()),!l){t.next=11;break;}return t.next=7,se(Array.prototype.slice.call(o),function(t){return i5(t,e.props.accept);});case 7:c=t.sent,e.uploadFiles(c),t.next=14;break;case 11:d=(0,iP.default)(c).filter(function(e){return i5(e,a);}),!1===s&&(d=c.slice(0,1)),e.uploadFiles(d);case 14:case"end":return t.stop();}},t);})),function(e,t){return r.apply(this,arguments);})),(0,iY.default)((0,i_.default)(e),"onFilePaste",(i=(0,i2.default)((0,i0.default)().mark(function t(n){var r;return(0,i0.default)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.pastable){t.next=3;break;}return t.abrupt("return");case 3:if("paste"!==n.type){t.next=6;break;}return r=n.clipboardData,t.abrupt("return",e.onDataTransferFiles(r,function(){n.preventDefault();}));case 6:case"end":return t.stop();}},t);})),function(e){return i.apply(this,arguments);})),(0,iY.default)((0,i_.default)(e),"onFileDragOver",function(e){e.preventDefault();}),(0,iY.default)((0,i_.default)(e),"onFileDrop",(s=(0,i2.default)((0,i0.default)().mark(function t(n){var r;return(0,i0.default)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),"drop"!==n.type){t.next=4;break;}return r=n.dataTransfer,t.abrupt("return",e.onDataTransferFiles(r));case 4:case"end":return t.stop();}},t);})),function(e){return s.apply(this,arguments);})),(0,iY.default)((0,i_.default)(e),"uploadFiles",function(t){var n=(0,iP.default)(t);Promise.all(n.map(function(t){return t.uid=sr(),e.processFile(t,n);})).then(function(t){var n=e.props.onBatchStart;null==n||n(t.map(function(e){return{file:e.origin,parsedFile:e.parsedFile};})),t.filter(function(e){return null!==e.parsedFile;}).forEach(function(t){e.post(t);});});}),(0,iY.default)((0,i_.default)(e),"processFile",(a=(0,i2.default)((0,i0.default)().mark(function t(n,r){var i,s,a,l,o,c,d,u,h;return(0,i0.default)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.beforeUpload,s=n,!i){t.next=14;break;}return t.prev=3,t.next=6,i(n,r);case 6:s=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),s=!1;case 12:if(!1!==s){t.next=14;break;}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(a=e.props.action)){t.next=21;break;}return t.next=18,a(n);case 18:l=t.sent,t.next=22;break;case 21:l=a;case 22:if("function"!=typeof(o=e.props.data)){t.next=29;break;}return t.next=26,o(n);case 26:c=t.sent,t.next=30;break;case 29:c=o;case 30:return(d=("object"===(0,iZ.default)(s)||"string"==typeof s)&&s?s:n)instanceof File?u=d:u=new File([d],n.name,{type:n.type}),(h=u).uid=n.uid,t.abrupt("return",{origin:n,data:c,parsedFile:h,action:l});case 35:case"end":return t.stop();}},t,null,[[3,9]]);})),function(e,t){return a.apply(this,arguments);})),(0,iY.default)((0,i_.default)(e),"saveFileInput",function(t){e.fileInput=t;}),e;}return(0,iF.default)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.pastable&&document.addEventListener("paste",this.onFilePaste);}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste);}},{key:"componentDidUpdate",value:function(e){var t=this.props.pastable;t&&!e.pastable?document.addEventListener("paste",this.onFilePaste):!t&&e.pastable&&document.removeEventListener("paste",this.onFilePaste);}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,i=e.action,s=e.parsedFile;if(this._isMounted){var a=this.props,l=a.onStart,o=a.customRequest,c=a.name,d=a.headers,u=a.withCredentials,h=a.method,p=r.uid,f=o||i9;l(r),this.reqs[p]=f({action:i,filename:c,data:n,file:s,headers:d,withCredentials:u,method:h||"post",onProgress:function(e){var n=t.props.onProgress;null==n||n(e,s);},onSuccess:function(e,n){var r=t.props.onSuccess;null==r||r(e,s,n),delete t.reqs[p];},onError:function(e,n){var r=t.props.onError;null==r||r(e,n,s),delete t.reqs[p];}},{defaultRequest:i9});}}},{key:"reset",value:function(){this.setState({uid:sr()});}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n];}else Object.keys(t).forEach(function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e];});}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.prefixCls,r=e.className,i=e.classNames,s=e.disabled,a=e.id,l=e.name,o=e.style,c=e.styles,d=e.multiple,u=e.accept,p=e.capture,m=e.children,g=e.directory,v=e.folder,b=e.openFileDialogOnClick,y=e.onMouseEnter,E=e.onMouseLeave,x=e.hasControlInside,S=(0,iK.default)(e,si),T=(0,rK.default)((0,iY.default)((0,iY.default)((0,iY.default)({},n,!0),"".concat(n,"-disabled"),s),r,r)),w=s?{}:{onClick:b?this.onClick:function(){},onKeyDown:b?this.onKeyDown:function(){},onMouseEnter:y,onMouseLeave:E,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:x?void 0:"0"};return f.default.createElement(t,(0,h.default)({},w,{className:T,role:x?void 0:"button",style:o}),f.default.createElement("input",(0,h.default)({},(0,i4.default)(S,{aria:!0,data:!0}),{id:a,name:l,disabled:s,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation();},key:this.state.uid,style:(0,iB.default)({display:"none"},(void 0===c?{}:c).input),className:(void 0===i?{}:i).input,accept:u},g||v?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},{multiple:d,onChange:this.onChange},null!=p?{capture:p}:{})),m);}}]),n;}(f.Component);function sa(){}var sl=function(e){(0,iz.default)(n,e);var t=(0,iG.default)(n);function n(){var e;(0,iL.default)(this,n);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,iY.default)((0,i_.default)(e),"uploader",void 0),(0,iY.default)((0,i_.default)(e),"saveUploader",function(t){e.uploader=t;}),e;}return(0,iF.default)(n,[{key:"abort",value:function(e){this.uploader.abort(e);}},{key:"render",value:function(){return f.default.createElement(ss,(0,h.default)({},this.props,{ref:this.saveUploader}));}}]),n;}(f.Component);(0,iY.default)(sl,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:sa,onError:sa,onSuccess:sa,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});var so=n("fe12e993"),sc=s._(so),sd=n("71a86a24"),su=s._(sd),sh=n("a48a1367"),sp=s._(sh),sf=n("36216159"),sm=s._(sf),sg=n("950b21b6"),sv=s._(sg),sb={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]};},name:"file",theme:"twotone"},sy=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:sb}));}),sE=n("826770c1"),sx=s._(sE),sS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},sT=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:sS}));}),sw={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]};},name:"picture",theme:"twotone"},sC=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:sw}));}),sR=n("2f54f259"),sD=a._(sR),sj=n("68228bdf"),sO=s._(sj),sI=n("8735d5cb"),sN=n("81c997ac"),sM=s._(sN),sk=n("b4c2c129");function sP(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e});}function sA(e,t){let n=(0,iP.default)(t),r=n.findIndex(({uid:t})=>t===e.uid);return -1===r?n.push(e):n[r]=e,n;}function sL(e,t){let n=void 0!==e.uid?"uid":"name";return t.filter(t=>t[n]===e[n])[0];}let sH=(e="")=>{let t=e.split("/"),n=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0];},sF=e=>0===e.indexOf("image/"),sU=e=>{if(e.type&&!e.thumbUrl)return sF(e.type);let t=e.thumbUrl||e.url||"",n=sH(t);return!!(/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(t)&&!n;};function s_(e){return new Promise(t=>{if(!e.type||!sF(e.type)){t("");return;}let n=document.createElement("canvas");n.width=200,n.height=200,n.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",document.body.appendChild(n);let r=n.getContext("2d"),i=new Image;if(i.onload=()=>{let{width:e,height:s}=i,a=200,l=200,o=0,c=0;e>s?c=-((l=200/e*s)-a)/2:o=-((a=200/s*e)-l)/2,r.drawImage(i,o,c,a,l);let d=n.toDataURL();document.body.removeChild(n),window.URL.revokeObjectURL(i.src),t(d);},i.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){let t=new FileReader;t.onload=()=>{t.result&&"string"==typeof t.result&&(i.src=t.result);},t.readAsDataURL(e);}else if(e.type.startsWith("image/gif")){let n=new FileReader;n.onload=()=>{n.result&&t(n.result);},n.readAsDataURL(e);}else i.src=window.URL.createObjectURL(e);});}var sV=n("1fa3e3a2"),sz=s._(sV),s$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},sG=f.forwardRef(function(e,t){return f.createElement(v.default,(0,h.default)({},e,{ref:t,icon:s$}));}),sq=n("b50edced"),sY=s._(sq);let sW=f.forwardRef(({prefixCls:e,className:t,style:n,locale:r,listType:i,file:s,items:a,progress:l,iconRender:o,actionIconRender:c,itemRender:d,isImgUrl:u,showPreviewIcon:h,showRemoveIcon:p,showDownloadIcon:m,previewIcon:g,removeIcon:v,downloadIcon:b,extra:y,onPreview:E,onDownload:x,onClose:S},T)=>{var w,C;let{status:R}=s,[D,j]=f.useState(R);f.useEffect(()=>{"removed"!==R&&j(R);},[R]);let[O,I]=f.useState(!1);f.useEffect(()=>{let e=setTimeout(()=>{I(!0);},300);return()=>{clearTimeout(e);};},[]);let N=o(s),M=f.createElement("div",{className:`${e}-icon`},N);if("picture"===i||"picture-card"===i||"picture-circle"===i){if("uploading"!==D&&(s.thumbUrl||s.url)){let t=(null==u?void 0:u(s))?f.createElement("img",{src:s.thumbUrl||s.url,alt:s.name,className:`${e}-list-item-image`,crossOrigin:s.crossOrigin}):N,n=(0,rK.default)(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:u&&!u(s)});M=f.createElement("a",{className:n,onClick:e=>E(s,e),href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer"},t);}else{let t=(0,rK.default)(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:"uploading"!==D});M=f.createElement("div",{className:t},N);}}let k=(0,rK.default)(`${e}-list-item`,`${e}-list-item-${D}`),P="string"==typeof s.linkProps?JSON.parse(s.linkProps):s.linkProps,A=("function"==typeof p?p(s):p)?c(("function"==typeof v?v(s):v)||f.createElement(sz.default,null),()=>S(s),e,r.removeFile,!0):null,L=("function"==typeof m?m(s):m)&&"done"===D?c(("function"==typeof b?b(s):b)||f.createElement(sG,null),()=>x(s),e,r.downloadFile):null,H="picture-card"!==i&&"picture-circle"!==i&&f.createElement("span",{key:"download-delete",className:(0,rK.default)(`${e}-list-item-actions`,{picture:"picture"===i})},L,A),F="function"==typeof y?y(s):y,U=F&&f.createElement("span",{className:`${e}-list-item-extra`},F),_=(0,rK.default)(`${e}-list-item-name`),V=s.url?f.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:_,title:s.name},P,{href:s.url,onClick:e=>E(s,e)}),s.name,U):f.createElement("span",{key:"view",className:_,onClick:e=>E(s,e),title:s.name},s.name,U),z=("function"==typeof h?h(s):h)&&(s.url||s.thumbUrl)?f.createElement("a",{href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>E(s,e),title:r.previewFile},"function"==typeof g?g(s):g||f.createElement(eZ.default,null)):null,$=("picture-card"===i||"picture-circle"===i)&&"uploading"!==D&&f.createElement("span",{className:`${e}-list-item-actions`},z,"done"===D&&L,A),{getPrefixCls:G}=f.useContext(rZ.ConfigContext),q=G(),Y=f.createElement("div",{className:k},M,V,H,$,O&&f.createElement(sD.default,{motionName:`${q}-fade`,visible:"uploading"===D,motionDeadline:2e3},({className:t})=>{let n="percent"in s?f.createElement(sY.default,Object.assign({type:"line",percent:s.percent,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"]},l)):null;return f.createElement("div",{className:(0,rK.default)(`${e}-list-item-progress`,t)},n);})),W=s.response&&"string"==typeof s.response?s.response:(null===(w=s.error)||void 0===w?void 0:w.statusText)||(null===(C=s.error)||void 0===C?void 0:C.message)||r.uploadError,B="error"===D?f.createElement(n7.default,{title:W,getPopupContainer:e=>e.parentNode},Y):Y;return f.createElement("div",{className:(0,rK.default)(`${e}-list-item-container`,t),style:n,ref:T},d?d(B,s,a,{download:x.bind(null,s),preview:E.bind(null,s),remove:S.bind(null,s)}):B);}),sB=f.forwardRef((e,t)=>{let{listType:n="text",previewFile:r=s_,onPreview:i,onDownload:s,onRemove:a,locale:l,iconRender:o,isImageUrl:c=sU,prefixCls:d,items:u=[],showPreviewIcon:h=!0,showRemoveIcon:p=!0,showDownloadIcon:m=!1,removeIcon:g,previewIcon:v,downloadIcon:b,extra:y,progress:E={size:[-1,2],showInfo:!1},appendAction:x,appendActionVisible:S=!0,itemRender:T,disabled:w}=e,[,C]=(0,sI.useForceUpdate)(),[R,D]=f.useState(!1),j=["picture-card","picture-circle"].includes(n);f.useEffect(()=>{n.startsWith("picture")&&(u||[]).forEach(e=>{(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",null==r||r(e.originFileObj).then(t=>{e.thumbUrl=t||"",C();}));});},[n,u,r]),f.useEffect(()=>{D(!0);},[]);let O=(e,t)=>{if(i)return null==t||t.preventDefault(),i(e);},I=e=>{"function"==typeof s?s(e):e.url&&window.open(e.url);},N=e=>{null==a||a(e);},M=e=>{if(o)return o(e,n);let t="uploading"===e.status;if(n.startsWith("picture")){let r="picture"===n?f.createElement(sx.default,null):l.uploading,i=(null==c?void 0:c(e))?f.createElement(sC,null):f.createElement(sy,null);return t?r:i;}return t?f.createElement(sx.default,null):f.createElement(sT,null);},k=(e,t,n,r,i)=>{let s={type:"text",size:"small",title:r,onClick:n=>{var r,i;t(),f.isValidElement(e)&&(null===(i=(r=e.props).onClick)||void 0===i||i.call(r,n));},className:`${n}-list-item-action`,disabled:!!i&&w};return f.isValidElement(e)?f.createElement(W.default,Object.assign({},s,{icon:(0,sk.cloneElement)(e,Object.assign(Object.assign({},e.props),{onClick:()=>{}}))})):f.createElement(W.default,Object.assign({},s),f.createElement("span",null,e));};f.useImperativeHandle(t,()=>({handlePreview:O,handleDownload:I}));let{getPrefixCls:P}=f.useContext(rZ.ConfigContext),A=P("upload",d),L=P(),H=(0,rK.default)(`${A}-list`,`${A}-list-${n}`),F=f.useMemo(()=>(0,sO.default)((0,sM.default)(L),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[L]),U=Object.assign(Object.assign({},j?{}:F),{motionDeadline:2e3,motionName:`${A}-${j?"animate-inline":"animate"}`,keys:(0,iP.default)(u.map(e=>({key:e.uid,file:e}))),motionAppear:R});return f.createElement("div",{className:H},f.createElement(sD.CSSMotionList,Object.assign({},U,{component:!1}),({key:e,file:t,className:r,style:i})=>f.createElement(sW,{key:e,locale:l,prefixCls:A,className:r,style:i,file:t,items:u,progress:E,listType:n,isImgUrl:c,showPreviewIcon:h,showRemoveIcon:p,showDownloadIcon:m,removeIcon:g,previewIcon:v,downloadIcon:b,extra:y,iconRender:M,actionIconRender:k,itemRender:T,onPreview:O,onDownload:I,onClose:N})),x&&f.createElement(sD.default,Object.assign({},U,{visible:S,forceRender:!0}),({className:e,style:t})=>(0,sk.cloneElement)(x,n=>({className:(0,rK.default)(n.className,e),style:Object.assign(Object.assign(Object.assign({},t),{pointerEvents:e?"none":void 0}),n.style)}))));});var sQ=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{o(r.next(e));}catch(e){s(e);}}function l(e){try{o(r.throw(e));}catch(e){s(e);}}function o(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(a,l);}o((r=r.apply(e,t||[])).next());});};let sK=`__LIST_IGNORE_${Date.now()}__`,sX=f.forwardRef((e,t)=>{let n=(0,rZ.useComponentConfig)("upload"),{fileList:r,defaultFileList:i,onRemove:s,showUploadList:a=!0,listType:l="text",onPreview:o,onDownload:c,onChange:d,onDrop:u,previewFile:h,disabled:p,locale:m,iconRender:g,isImageUrl:v,progress:b,prefixCls:y,className:E,type:x="select",children:S,style:T,itemRender:w,maxCount:C,data:R={},multiple:D=!1,hasControlInside:j=!0,action:O="",accept:I="",supportServerRender:N=!0,rootClassName:M}=e,k=f.useContext(su.default),P=null!=p?p:k,A=e.customRequest||n.customRequest,[L,H]=(0,sc.default)(i||[],{value:r,postState:e=>null!=e?e:[]}),[F,U]=f.useState("drop"),_=f.useRef(null),V=f.useRef(null);f.useMemo(()=>{let e=Date.now();(r||[]).forEach((t,n)=>{t.uid||Object.isFrozen(t)||(t.uid=`__AUTO__${e}_${n}__`);});},[r]);let z=(e,t,n)=>{let r=(0,iP.default)(t),i=!1;1===C?r=r.slice(-1):C&&(i=r.length>C,r=r.slice(0,C)),(0,nv.flushSync)(()=>{H(r);});let s={file:e,fileList:r};n&&(s.event=n),(!i||"removed"===e.status||r.some(t=>t.uid===e.uid))&&(0,nv.flushSync)(()=>{null==d||d(s);});},$=e=>{let t=e.filter(e=>!e.file[sK]);if(!t.length)return;let n=t.map(e=>sP(e.file)),r=(0,iP.default)(L);n.forEach(e=>{r=sA(e,r);}),n.forEach((e,n)=>{let i=e;if(t[n].parsedFile)e.status="uploading";else{let t;let{originFileObj:n}=e;try{t=new File([n],n.name,{type:n.type});}catch(e){(t=new Blob([n],{type:n.type})).name=n.name,t.lastModifiedDate=new Date,t.lastModified=new Date().getTime();}t.uid=e.uid,i=t;}z(i,r);});},G=(e,t,n)=>{try{"string"==typeof e&&(e=JSON.parse(e));}catch(e){}if(!sL(t,L))return;let r=sP(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;let i=sA(r,L);z(r,i);},q=(e,t)=>{if(!sL(t,L))return;let n=sP(t);n.status="uploading",n.percent=e.percent;let r=sA(n,L);z(n,r,e);},Y=(e,t,n)=>{if(!sL(n,L))return;let r=sP(n);r.error=e,r.response=t,r.status="error";let i=sA(r,L);z(r,i);},W=e=>{let t;Promise.resolve("function"==typeof s?s(e):s).then(n=>{var r;if(!1===n)return;let i=function(e,t){let n=void 0!==e.uid?"uid":"name",r=t.filter(t=>t[n]!==e[n]);return r.length===t.length?null:r;}(e,L);i&&(t=Object.assign(Object.assign({},e),{status:"removed"}),null==L||L.forEach(e=>{let n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed");}),null===(r=_.current)||void 0===r||r.abort(t),z(t,i));});},B=e=>{U(e.type),"drop"===e.type&&(null==u||u(e));};f.useImperativeHandle(t,()=>({onBatchStart:$,onSuccess:G,onProgress:q,onError:Y,fileList:L,upload:_.current,nativeElement:V.current}));let{getPrefixCls:Q,direction:K,upload:X}=f.useContext(rZ.ConfigContext),Z=Q("upload",y),J=Object.assign(Object.assign({onBatchStart:$,onError:Y,onProgress:q,onSuccess:G},e),{customRequest:A,data:R,multiple:D,action:O,accept:I,supportServerRender:N,prefixCls:Z,disabled:P,beforeUpload:(t,n)=>sQ(void 0,void 0,void 0,function*(){let{beforeUpload:r,transformFile:i}=e,s=t;if(r){let e=yield r(t,n);if(!1===e)return!1;if(delete t[sK],e===sK)return Object.defineProperty(t,sK,{value:!0,configurable:!0}),!1;"object"==typeof e&&e&&(s=e);}return i&&(s=yield i(s)),s;}),onChange:void 0,hasControlInside:j});delete J.className,delete J.style,(!S||P)&&delete J.id;let ee=`${Z}-wrapper`,[et,en,er]=(0,sv.default)(Z,ee),[ei]=(0,sp.default)("Upload",sm.default.Upload),{showRemoveIcon:es,showPreviewIcon:ea,showDownloadIcon:el,removeIcon:eo,previewIcon:ec,downloadIcon:ed,extra:eu}="boolean"==typeof a?{}:a,eh=void 0===es?!P:es,ep=(e,t)=>a?f.createElement(sB,{prefixCls:Z,listType:l,items:L,previewFile:h,onPreview:o,onDownload:c,onRemove:W,showRemoveIcon:eh,showPreviewIcon:ea,showDownloadIcon:el,removeIcon:eo,previewIcon:ec,downloadIcon:ed,iconRender:g,extra:eu,locale:Object.assign(Object.assign({},ei),m),isImageUrl:v,progress:b,appendAction:e,appendActionVisible:t,itemRender:w,disabled:P}):e,ef=(0,rK.default)(ee,E,M,en,er,null==X?void 0:X.className,{[`${Z}-rtl`]:"rtl"===K,[`${Z}-picture-card-wrapper`]:"picture-card"===l,[`${Z}-picture-circle-wrapper`]:"picture-circle"===l}),em=Object.assign(Object.assign({},null==X?void 0:X.style),T);if("drag"===x){let e=(0,rK.default)(en,Z,`${Z}-drag`,{[`${Z}-drag-uploading`]:L.some(e=>"uploading"===e.status),[`${Z}-drag-hover`]:"dragover"===F,[`${Z}-disabled`]:P,[`${Z}-rtl`]:"rtl"===K});return et(f.createElement("span",{className:ef,ref:V},f.createElement("div",{className:e,style:em,onDrop:B,onDragOver:B,onDragLeave:B},f.createElement(sl,Object.assign({},J,{ref:_,className:`${Z}-btn`}),f.createElement("div",{className:`${Z}-drag-container`},S))),ep()));}let eg=(0,rK.default)(Z,`${Z}-select`,{[`${Z}-disabled`]:P,[`${Z}-hidden`]:!S}),ev=f.createElement("div",{className:eg,style:em},f.createElement(sl,Object.assign({},J,{ref:_})));return et("picture-card"===l||"picture-circle"===l?f.createElement("span",{className:ef,ref:V},ep(ev,!!S)):f.createElement("span",{className:ef,ref:V},ev,ep()));});var sZ=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n;};let sJ=f.forwardRef((e,t)=>{let{style:n,height:r,hasControlInside:i=!1,children:s}=e,a=sZ(e,["style","height","hasControlInside","children"]),l=Object.assign(Object.assign({},n),{height:r});return f.createElement(sX,Object.assign({ref:t,hasControlInside:i},a,{style:l,type:"drag"}),s);});sX.Dragger=sJ,sX.LIST_IGNORE=sK;var s0=n("a5c2f660"),s1=n("f84920f4"),s2=a._(s1);let s3=s2.object({title:s2.string().min(5,"Ti\xeau \u0111\u1EC1 ph\u1EA3i c\xf3 \xedt nh\u1EA5t 5 k\xfd t\u1EF1").max(100,"Ti\xeau \u0111\u1EC1 kh\xf4ng qu\xe1 100 k\xfd t\u1EF1"),description:s2.string().optional(),type:s2.nativeEnum(ee.ScheduleType),priority:s2.number().min(1).max(10),sourceType:s2.nativeEnum(ee.ScheduleSourceType),sourceUrl:s2.string().optional(),fileUrl:s2.string().optional(),streamUrl:s2.string().optional(),ttsContent:s2.string().optional(),sourceUnitId:s2.string().optional(),sourceChannelId:s2.string().optional(),relayFromLevel:s2.enum(["PROVINCE","DISTRICT","COMMUNE"]).optional(),startTime:s2.date({error:"Vui l\xf2ng ch\u1ECDn th\u1EDDi gian b\u1EAFt \u0111\u1EA7u"}),endTime:s2.date().optional(),targetUnitIds:s2.array(s2.string()).min(1,"Vui l\xf2ng ch\u1ECDn \xedt nh\u1EA5t m\u1ED9t \u0111\u01A1n v\u1ECB"),targetDeviceIds:s2.array(s2.string()),daysOfWeek:s2.array(s2.number()).optional()}).superRefine((e,t)=>{e.sourceType===ee.ScheduleSourceType.TTS?e.ttsContent&&0!==e.ttsContent.trim().length||t.addIssue({code:s2.ZodIssueCode.custom,message:"Vui l\xf2ng nh\u1EADp n\u1ED9i dung v\u0103n b\u1EA3n",path:["ttsContent"]}):e.sourceType===ee.ScheduleSourceType.FILE?e.fileUrl&&0!==e.fileUrl.trim().length||t.addIssue({code:s2.ZodIssueCode.custom,message:"Vui l\xf2ng nh\u1EADp \u0111\u01B0\u1EDDng d\u1EABn file",path:["fileUrl"]}):e.sourceType===ee.ScheduleSourceType.STREAM?e.streamUrl&&0!==e.streamUrl.trim().length||t.addIssue({code:s2.ZodIssueCode.custom,message:"Vui l\xf2ng nh\u1EADp \u0111\u01B0\u1EDDng d\u1EABn stream",path:["streamUrl"]}):e.sourceType!==ee.ScheduleSourceType.RELAY||(e.sourceUnitId&&0!==e.sourceUnitId.trim().length||t.addIssue({code:s2.ZodIssueCode.custom,message:"Vui l\xf2ng ch\u1ECDn \u0111\u01A1n v\u1ECB ngu\u1ED3n",path:["sourceUnitId"]}),e.sourceChannelId&&0!==e.sourceChannelId.trim().length||t.addIssue({code:s2.ZodIssueCode.custom,message:"Vui l\xf2ng ch\u1ECDn k\xeanh ph\xe1t s\xf3ng",path:["sourceChannelId"]}));}),s4=[{id:"ch-1",name:"K\xeanh Trung \u01B0\u01A1ng 1",unitId:"province-1"},{id:"ch-2",name:"K\xeanh Trung \u01B0\u01A1ng 2",unitId:"province-1"},{id:"ch-3",name:"K\xeanh Huy\u1EC7n A",unitId:"district-1"},{id:"ch-4",name:"K\xeanh Huy\u1EC7n B",unitId:"district-2"},{id:"ch-5",name:"K\xeanh X\xe3 1",unitId:"commune-1"}],s6=({sourceUnitId:e,sourceChannelId:t,relayFromLevel:n,onSourceUnitChange:r,onSourceChannelChange:i,onRelayLevelChange:s,errors:a})=>{let u=(0,f.useMemo)(()=>(0,d.buildTree)(o.mockUnits.getAll().filter(e=>e.type!==c.UnitType.EMPLOYEE)),[]),h=(0,f.useMemo)(()=>e?s4.filter(t=>t.unitId===e).map(e=>({label:e.name,value:e.id})):[],[e]);return f.default.useEffect(()=>{if(e){let t=o.mockUnits.getAll().find(t=>t.id===e);t&&s({[c.UnitType.DEPARTMENT]:"DISTRICT",[c.UnitType.EMPLOYEE]:"COMMUNE"}[t.type]||"COMMUNE");}},[e,s]),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(iR.default.Item,{label:"Ch\u1ECDn c\u01A1 s\u1EDF / K\xeanh ph\xe1t ngu\u1ED3n",required:!0,validateStatus:(null==a?void 0:a.sourceUnitId)?"error":"",help:null==a?void 0:a.sourceUnitId,children:(0,l.jsx)(J.default,{value:e,onChange:r,treeData:u,placeholder:"Ch\u1ECDn \u0111\u01A1n v\u1ECB ngu\u1ED3n (c\u1EA5p tr\xean)...",showSearch:!0,treeDefaultExpandAll:!0,allowClear:!0})}),(0,l.jsx)(iR.default.Item,{label:"K\xeanh ph\xe1t s\xf3ng",required:!0,validateStatus:(null==a?void 0:a.sourceChannelId)?"error":"",help:null==a?void 0:a.sourceChannelId,children:(0,l.jsx)(eY.default,{value:t,onChange:i,options:h,placeholder:"Ch\u1ECDn k\xeanh ph\xe1t s\xf3ng...",disabled:!e,allowClear:!0})}),n&&(0,l.jsx)("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:(0,l.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,l.jsx)("strong",{children:"C\u1EA5p truy\u1EC1n xu\u1ED1ng:"})," ","PROVINCE"===n?"T\u1EC9nh/Th\xe0nh ph\u1ED1":"DISTRICT"===n?"Qu\u1EADn/Huy\u1EC7n":"Ph\u01B0\u1EDDng/X\xe3"]})})]});},s8=({open:e,onCancel:t,onSubmit:n,initialValues:r})=>{var i,s,a,u,h,p,m,g;let{control:v,handleSubmit:b,watch:y,reset:E,setValue:x,formState:{errors:S,isValid:T}}=(0,s0.useForm)({resolver:(0,iS.zodResolver)(s3),defaultValues:{type:ee.ScheduleType.ROUTINE,priority:5,sourceType:ee.ScheduleSourceType.FILE,targetUnitIds:[],targetDeviceIds:[],...r}}),w=y("sourceType"),C=y("targetUnitIds");y("type");let[R,D]=f.default.useState("unit");(0,f.useEffect)(()=>{e&&(r?E({...r,startTime:r.startTime?(0,ej.default)(r.startTime):void 0,endTime:r.endTime?(0,ej.default)(r.endTime):void 0,fileUrl:r.sourceType===ee.ScheduleSourceType.FILE?r.sourceUrl:void 0,streamUrl:r.sourceType===ee.ScheduleSourceType.STREAM?r.sourceUrl:void 0}):E({type:ee.ScheduleType.ROUTINE,priority:5,sourceType:ee.ScheduleSourceType.FILE,targetUnitIds:[],targetDeviceIds:[]}));},[e,r,E]);let j=(0,d.buildTree)(o.mockUnits.getAll().filter(e=>e.type!==c.UnitType.EMPLOYEE)),O=f.default.useMemo(()=>{let e=C||[];return ez.mockDevices.getAll().filter(t=>0===e.length||e.includes(t.unitId)).map(e=>{var t;return{label:`${e.name} (${null===(t=e.hardwareInfo)||void 0===t?void 0:t.ipAddress})`,value:e.id};});},[C]);return(0,l.jsx)(Q.default,{title:r?"C\u1EADp nh\u1EADt l\u1ECBch ph\xe1t":"T\u1EA1o l\u1ECBch ph\xe1t m\u1EDBi",width:800,open:e,onCancel:t,footer:(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)(W.default,{onClick:t,children:"H\u1EE7y"}),(0,l.jsx)(W.default,{type:"primary",onClick:b(e=>{var i,s;let a={...e};e.sourceType===ee.ScheduleSourceType.FILE?a.sourceUrl=e.fileUrl:e.sourceType===ee.ScheduleSourceType.STREAM&&(a.sourceUrl=e.streamUrl);let l={...a,startTime:(null===(i=a.startTime)||void 0===i?void 0:i.toDate)?a.startTime.toDate():a.startTime,endTime:(null===(s=a.endTime)||void 0===s?void 0:s.toDate)?a.endTime.toDate():a.endTime};console.log("Form Submit:",l),n(l),eh.default.success(r?"C\u1EADp nh\u1EADt l\u1ECBch th\xe0nh c\xf4ng!":"T\u1EA1o l\u1ECBch th\xe0nh c\xf4ng!"),t();}),children:r?"C\u1EADp nh\u1EADt":"T\u1EA1o m\u1EDBi"})]}),destroyOnHidden:!0,children:(0,l.jsxs)(iR.default,{layout:"vertical",className:"mt-4",children:[(0,l.jsxs)(iM.default,{gutter:16,children:[(0,l.jsx)(iw.default,{span:16,children:(0,l.jsx)(iR.default.Item,{label:"T\xean l\u1ECBch ph\xe1t",validateStatus:S.title?"error":"",help:null===(i=S.title)||void 0===i?void 0:i.message,required:!0,children:(0,l.jsx)(s0.Controller,{name:"title",control:v,render:({field:e})=>(0,l.jsx)(ij.default,{...e,placeholder:"Nh\u1EADp t\xean l\u1ECBch ph\xe1t..."})})})}),(0,l.jsx)(iw.default,{span:8,children:(0,l.jsx)(iR.default.Item,{label:"Lo\u1EA1i l\u1ECBch",validateStatus:S.type?"error":"",help:null===(s=S.type)||void 0===s?void 0:s.message,required:!0,children:(0,l.jsx)(s0.Controller,{name:"type",control:v,render:({field:e})=>(0,l.jsx)(eY.default,{...e,options:[{label:"\u0110\u1ECBnh k\u1EF3 (H\xe0ng ng\xe0y/Tu\u1EA7n)",value:ee.ScheduleType.ROUTINE},{label:"M\u1ED9t l\u1EA7n",value:ee.ScheduleType.ONE_TIME},{label:"Kh\u1EA9n c\u1EA5p",value:ee.ScheduleType.EMERGENCY}]})})})})]}),(0,l.jsx)(iR.default.Item,{label:"M\xf4 t\u1EA3",children:(0,l.jsx)(s0.Controller,{name:"description",control:v,render:({field:e})=>(0,l.jsx)(ij.default.TextArea,{...e,placeholder:"M\xf4 t\u1EA3 n\u1ED9i dung...",rows:5})})}),(0,l.jsx)(iR.default.Item,{label:"Lo\u1EA1i l\u1ECBch ph\xe1t",children:(0,l.jsx)(X.default,{value:R,onChange:e=>{D(e),"relay"===e?x("sourceType",ee.ScheduleSourceType.RELAY):"unit"===e&&x("sourceType",ee.ScheduleSourceType.FILE);},options:[{label:"T\u1EA5t c\u1EA3",value:"all"},{label:"\u0110\u01A1n v\u1ECB",value:"unit"},{label:"Ti\u1EBFp s\xf3ng",value:"relay"}],block:!0})}),(0,l.jsx)(iR.default.Item,{label:"Ch\u1ECDn ngu\u1ED3n ph\xe1t",children:(0,l.jsx)(s0.Controller,{name:"sourceType",control:v,render:({field:e})=>(0,l.jsx)(iI.default.Group,{...e,options:"relay"===R?[{label:"Ti\u1EBFp s\xf3ng t\u1EEB c\u1EA5p tr\xean",value:ee.ScheduleSourceType.RELAY}]:"unit"===R?[{label:"File Audio",value:ee.ScheduleSourceType.FILE},{label:"Chuy\u1EC3n v\u0103n b\u1EA3n (TTS)",value:ee.ScheduleSourceType.TTS}]:[{label:"File Audio",value:ee.ScheduleSourceType.FILE},{label:"Chuy\u1EC3n v\u0103n b\u1EA3n (TTS)",value:ee.ScheduleSourceType.TTS},{label:"Ti\u1EBFp s\xf3ng t\u1EEB c\u1EA5p tr\xean",value:ee.ScheduleSourceType.RELAY}]})})}),w===ee.ScheduleSourceType.FILE&&(0,l.jsx)(iR.default.Item,{label:"\u0110\u01B0\u1EDDng d\u1EABn File",required:!0,validateStatus:S.fileUrl?"error":"",help:null===(a=S.fileUrl)||void 0===a?void 0:a.message,children:(0,l.jsx)(s0.Controller,{name:"fileUrl",control:v,render:({field:e})=>(0,l.jsx)(sX,{name:e.name,accept:"audio/*",maxCount:1,beforeUpload:t=>{let n=URL.createObjectURL(t);return e.onChange(n),!1;},onRemove:()=>{e.onChange("");},fileList:e.value?[{uid:"-1",name:"Audio File",status:"done",url:e.value}]:[],children:(0,l.jsx)(W.default,{icon:(0,l.jsx)(ix,{}),children:"Ch\u1ECDn file Audio"})})})}),w===ee.ScheduleSourceType.TTS&&(0,l.jsx)(iR.default.Item,{label:"N\u1ED9i dung v\u0103n b\u1EA3n",required:!0,validateStatus:S.ttsContent?"error":"",help:null===(u=S.ttsContent)||void 0===u?void 0:u.message,children:(0,l.jsx)(s0.Controller,{name:"ttsContent",control:v,render:({field:e})=>(0,l.jsx)(ij.default.TextArea,{...e,rows:4,placeholder:"Nh\u1EADp n\u1ED9i dung c\u1EA7n chuy\u1EC3n th\xe0nh gi\u1ECDng n\xf3i..."})})}),w===ee.ScheduleSourceType.RELAY&&(0,l.jsx)(s6,{sourceUnitId:y("sourceUnitId"),sourceChannelId:y("sourceChannelId"),relayFromLevel:y("relayFromLevel"),onSourceUnitChange:e=>x("sourceUnitId",e),onSourceChannelChange:e=>x("sourceChannelId",e),onRelayLevelChange:e=>x("relayFromLevel",e),errors:{sourceUnitId:null===(h=S.sourceUnitId)||void 0===h?void 0:h.message,sourceChannelId:null===(p=S.sourceChannelId)||void 0===p?void 0:p.message}}),(0,l.jsxs)(iM.default,{gutter:16,children:[(0,l.jsx)(iw.default,{span:12,children:(0,l.jsx)(iR.default.Item,{label:"Ch\u1ECDn \u0110\u01A1n v\u1ECB / \u0110\u1ECBa b\xe0n",validateStatus:S.targetUnitIds?"error":"",help:null===(m=S.targetUnitIds)||void 0===m?void 0:m.message,children:(0,l.jsx)(s0.Controller,{name:"targetUnitIds",control:v,render:({field:e})=>(0,l.jsx)(J.default,{...e,treeData:j,treeCheckable:!0,showCheckedStrategy:J.default.SHOW_PARENT,placeholder:"Ch\u1ECDn \u0111\u01A1n v\u1ECB...",treeDefaultExpandAll:!0,allowClear:!0})})})}),(0,l.jsx)(iw.default,{span:12,children:(0,l.jsx)(iR.default.Item,{label:"Ch\u1ECDn Thi\u1EBFt b\u1ECB (\u0110\u1EC3 tr\u1ED1ng = Ch\u1ECDn t\u1EA5t c\u1EA3)",children:(0,l.jsx)(s0.Controller,{name:"targetDeviceIds",control:v,render:({field:e})=>(0,l.jsx)(eY.default,{...e,mode:"multiple",options:O,placeholder:"Ch\u1ECDn thi\u1EBFt b\u1ECB c\u1EE5 th\u1EC3...",allowClear:!0})})})})]}),(0,l.jsxs)(iM.default,{gutter:16,children:[(0,l.jsx)(iw.default,{span:12,children:(0,l.jsx)(iR.default.Item,{label:"B\u1EAFt \u0111\u1EA7u",required:!0,validateStatus:S.startTime?"error":"",help:null===(g=S.startTime)||void 0===g?void 0:g.message,children:(0,l.jsx)(s0.Controller,{name:"startTime",control:v,render:({field:e})=>(0,l.jsx)(n4.default,{...e,showTime:!0,className:"w-full"})})})}),(0,l.jsx)(iw.default,{span:12,children:(0,l.jsx)(iR.default.Item,{label:"K\u1EBFt th\xfac",children:(0,l.jsx)(s0.Controller,{name:"endTime",control:v,render:({field:e})=>(0,l.jsx)(n4.default,{...e,showTime:!0,className:"w-full"})})})})]})]})});};var s5=n("5ddd6bad"),s7=s._(s5),s9=n("8d15988e"),ae=s._(s9),at=class extends k.Subscribable{#h;#v=void 0;#L;#H;constructor(e,t){super(),this.#h=e,this.setOptions(t),this.bindMethods(),this.#F();}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this);}setOptions(e){var t;let n=this.options;this.options=this.#h.defaultMutationOptions(e),(0,I.shallowEqualObjects)(this.options,n)||this.#h.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#L,observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&(0,I.hashKey)(n.mutationKey)!==(0,I.hashKey)(this.options.mutationKey)?this.reset():(null===(t=this.#L)||void 0===t?void 0:t.state.status)==="pending"&&this.#L.setOptions(this.options);}onUnsubscribe(){if(!this.hasListeners()){var e;null===(e=this.#L)||void 0===e||e.removeObserver(this);}}onMutationUpdate(e){this.#F(),this.#A(e);}getCurrentResult(){return this.#v;}reset(){var e;null===(e=this.#L)||void 0===e||e.removeObserver(this),this.#L=void 0,this.#F(),this.#A();}mutate(e,t){var n;return this.#H=t,null===(n=this.#L)||void 0===n||n.removeObserver(this),this.#L=this.#h.getMutationCache().build(this.#h,this.options),this.#L.addObserver(this),this.#L.execute(e);}#F(){var e;let t=(null===(e=this.#L)||void 0===e?void 0:e.state)??(0,A.getDefaultState)();this.#v={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};}#A(e){M.notifyManager.batch(()=>{if(this.#H&&this.hasListeners()){var t,n,r,i,s,a,l,o;let c=this.#v.variables,d=this.#v.context,u={client:this.#h,meta:this.options.meta,mutationKey:this.options.mutationKey};if((null==e?void 0:e.type)==="success"){try{null===(t=(n=this.#H).onSuccess)||void 0===t||t.call(n,e.data,c,d,u);}catch(e){Promise.reject(e);}try{null===(r=(i=this.#H).onSettled)||void 0===r||r.call(i,e.data,null,c,d,u);}catch(e){Promise.reject(e);}}else if((null==e?void 0:e.type)==="error"){try{null===(s=(a=this.#H).onError)||void 0===s||s.call(a,e.error,c,d,u);}catch(e){Promise.reject(e);}try{null===(l=(o=this.#H).onSettled)||void 0===l||l.call(o,void 0,e.error,c,d,u);}catch(e){Promise.reject(e);}}}this.listeners.forEach(e=>{e(this.#v);});});}};function an(e,t){let n=(0,$.useQueryClient)(t),[r]=f.useState(()=>new at(n,e));f.useEffect(()=>{r.setOptions(e);},[r,e]);let i=f.useSyncExternalStore(f.useCallback(e=>r.subscribe(M.notifyManager.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=f.useCallback((e,t)=>{r.mutate(e,t).catch(I.noop);},[r]);if(i.error&&(0,I.shouldThrowError)(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate};}let ar=()=>{let e=(0,$.useQueryClient)();return an({mutationFn:async e=>{if(await new Promise(e=>setTimeout(e,500)),!rp.delete(e))throw Error("Kh\xf4ng t\xecm th\u1EA5y l\u1ECBch ph\xe1t");return e;},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),eh.default.success("X\xf3a l\u1ECBch ph\xe1t th\xe0nh c\xf4ng!");},onError:e=>{eh.default.error(`X\xf3a l\u{1ECB}ch ph\xe1t th\u{1EA5}t b\u{1EA1}i: ${e.message}`);}});},ai=()=>{let e=(0,$.useQueryClient)();return an({mutationFn:async e=>{await new Promise(e=>setTimeout(e,500));let t=rp.update(e,{status:ee.ScheduleStatus.CANCELED});if(!t)throw Error("Kh\xf4ng t\xecm th\u1EA5y l\u1ECBch ph\xe1t");return t;},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),eh.default.success("H\u1EE7y l\u1ECBch ph\xe1t th\xe0nh c\xf4ng!");},onError:e=>{eh.default.error(`H\u{1EE7}y l\u{1ECB}ch ph\xe1t th\u{1EA5}t b\u{1EA1}i: ${e.message}`);}});},as=()=>{let e=(0,$.useQueryClient)();return an({mutationFn:async e=>{await new Promise(e=>setTimeout(e,500));let t=rp.update(e,{status:ee.ScheduleStatus.APPROVED,approvedBy:`admin-${Date.now()}`});if(!t)throw Error("Kh\xf4ng t\xecm th\u1EA5y l\u1ECBch ph\xe1t");return t;},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),eh.default.success("Duy\u1EC7t l\u1ECBch ph\xe1t th\xe0nh c\xf4ng!");},onError:e=>{eh.default.error(`Duy\u{1EC7}t l\u{1ECB}ch ph\xe1t th\u{1EA5}t b\u{1EA1}i: ${e.message}`);}});},aa=()=>{let e=(0,$.useQueryClient)();return an({mutationFn:async e=>{await new Promise(e=>setTimeout(e,500));let t=rp.update(e,{status:ee.ScheduleStatus.REJECTED});if(!t)throw Error("Kh\xf4ng t\xecm th\u1EA5y l\u1ECBch ph\xe1t");return t;},onSuccess:()=>{e.invalidateQueries({queryKey:["schedules"]}),eh.default.warning("\u0110\xe3 t\u1EEB ch\u1ED1i l\u1ECBch ph\xe1t!");},onError:e=>{eh.default.error(`T\u{1EEB} ch\u{1ED1}i l\u{1ECB}ch ph\xe1t th\u{1EA5}t b\u{1EA1}i: ${e.message}`);}});},al=()=>{let e=(0,$.useQueryClient)();return an({mutationFn:async e=>{await new Promise(e=>setTimeout(e,500));let t=e.map(e=>rp.delete(e)).filter(Boolean).length;if(0===t)throw Error("Kh\xf4ng th\u1EC3 x\xf3a l\u1ECBch ph\xe1t n\xe0o");return{total:e.length,success:t};},onSuccess:t=>{e.invalidateQueries({queryKey:["schedules"]}),eh.default.success(`\u{110}\xe3 x\xf3a ${t.success}/${t.total} l\u{1ECB}ch ph\xe1t th\xe0nh c\xf4ng!`);},onError:e=>{eh.default.error(`X\xf3a l\u{1ECB}ch ph\xe1t th\u{1EA5}t b\u{1EA1}i: ${e.message}`);}});},ao=e=>{let t={canView:!0,canEdit:!1,canDelete:!1,canCancel:!1,canApprove:!1,canReject:!1};switch(e){case ee.ScheduleStatus.DRAFT:t.canEdit=!0,t.canDelete=!0;break;case ee.ScheduleStatus.PENDING_APPROVAL:t.canCancel=!0,t.canApprove=!0,t.canReject=!0;break;case ee.ScheduleStatus.READY:t.canEdit=!0,t.canCancel=!0;break;case ee.ScheduleStatus.RUNNING:t.canCancel=!0;break;case ee.ScheduleStatus.COMPLETED:break;case ee.ScheduleStatus.APPROVED:t.canEdit=!0,t.canCancel=!0;break;case ee.ScheduleStatus.CANCELED:break;case ee.ScheduleStatus.REJECTED:t.canEdit=!0,t.canDelete=!0;}return t;},ac=({onEdit:e,onView:t,selectedUnitId:n,scheduleFilter:r="all"})=>{let{data:i,isLoading:s}=rk(),a=ar(),c=ai(),d=as(),u=aa(),h=al(),[p,m]=(0,f.useState)([]),[g,v]=(0,f.useState)(""),b=e=>{let t=o.mockUnits.getAll(),n=[e],r=e=>{t.filter(t=>t.parentId===e).forEach(e=>{n.push(e.id),r(e.id);});};return r(e),n;},y=(0,f.useMemo)(()=>{if(!n||!i)return i;let e=b(n);return i.filter(t=>{if(e.includes(t.ownerUnitId)||t.targetUnitIds.some(t=>e.includes(t)))return!0;let n=ez.mockDevices.getAll().filter(t=>e.includes(t.unitId)).map(e=>e.id);return!!t.targetDeviceIds.some(e=>n.includes(e));});},[i,n]),x=(0,f.useMemo)(()=>{if(!y)return[];switch(r){case"all":default:return y;case"unit":return y.filter(e=>e.sourceType!==ee.ScheduleSourceType.RELAY);case"relay":return y.filter(e=>e.sourceType===ee.ScheduleSourceType.RELAY);}},[y,r]),S=(0,f.useMemo)(()=>{if(!g)return x;let e=g.toLowerCase();return x.filter(t=>{var n;return t.title.toLowerCase().includes(e)||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))||t.id.toLowerCase().includes(e);});},[x,g]),T=(n,r)=>{switch(n){case"view":null==t||t(r);break;case"edit":null==e||e(r);break;case"approve":Q.default.confirm({title:"Duy\u1EC7t l\u1ECBch ph\xe1t?",content:`B\u{1EA1}n c\xf3 ch\u{1EAF}c ch\u{1EAF}n mu\u{1ED1}n duy\u{1EC7}t l\u{1ECB}ch "${r.title}"?`,okText:"Duy\u1EC7t",cancelText:"H\u1EE7y",onOk:()=>d.mutate(r.id)});break;case"reject":Q.default.confirm({title:"T\u1EEB ch\u1ED1i l\u1ECBch ph\xe1t?",content:`B\u{1EA1}n c\xf3 ch\u{1EAF}c ch\u{1EAF}n mu\u{1ED1}n t\u{1EEB} ch\u{1ED1}i l\u{1ECB}ch "${r.title}"?`,okText:"T\u1EEB ch\u1ED1i",okType:"danger",cancelText:"H\u1EE7y",onOk:()=>u.mutate(r.id)});break;case"cancel":Q.default.confirm({title:"H\u1EE7y l\u1ECBch ph\xe1t?",content:`B\u{1EA1}n c\xf3 ch\u{1EAF}c ch\u{1EAF}n mu\u{1ED1}n h\u{1EE7}y l\u{1ECB}ch "${r.title}"?`,okText:"H\u1EE7y l\u1ECBch",okType:"danger",cancelText:"\u0110\xf3ng",onOk:()=>c.mutate(r.id)});break;case"delete":Q.default.confirm({title:"X\xf3a l\u1ECBch ph\xe1t?",content:`B\u{1EA1}n c\xf3 ch\u{1EAF}c ch\u{1EAF}n mu\u{1ED1}n x\xf3a l\u{1ECB}ch "${r.title}"? H\xe0nh \u{111}\u{1ED9}ng n\xe0y kh\xf4ng th\u{1EC3} ho\xe0n t\xe1c.`,okText:"X\xf3a",okType:"danger",cancelText:"H\u1EE7y",onOk:()=>a.mutate(r.id)});}},w=e=>{let t=ao(e.status),n=[];return t.canView&&n.push({key:"view",icon:(0,l.jsx)(eZ.default,{}),label:"Xem chi ti\u1EBFt"}),t.canEdit&&n.push({key:"edit",icon:(0,l.jsx)(rB.default,{}),label:"Ch\u1EC9nh s\u1EEDa"}),n.length>0&&(t.canDelete||t.canCancel||t.canApprove||t.canReject)&&n.push({type:"divider"}),t.canApprove&&n.push({key:"approve",icon:(0,l.jsx)(en.default,{}),label:"Duy\u1EC7t"}),t.canReject&&n.push({key:"reject",icon:(0,l.jsx)(ei.default,{}),label:"T\u1EEB ch\u1ED1i",danger:!0}),t.canCancel&&n.push({key:"cancel",icon:(0,l.jsx)(eH,{}),label:"H\u1EE7y l\u1ECBch",danger:!0}),t.canDelete&&(n.length>0&&n.push({type:"divider"}),n.push({key:"delete",icon:(0,l.jsx)(sz.default,{}),label:"X\xf3a",danger:!0})),n;},C=[{title:"STT",key:"index",width:60,fixed:"left",render:(e,t,n)=>n+1},{title:"T\xean l\u1ECBch ph\xe1t",dataIndex:"title",key:"title",width:250,fixed:"left",render:(e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-semibold",children:e}),t.description&&(0,l.jsx)("div",{className:"text-xs text-gray-500 line-clamp-1",children:t.description})]})},{title:"Lo\u1EA1i l\u1ECBch",dataIndex:"type",key:"type",width:120,filters:[{text:"\u0110\u1ECBnh k\u1EF3",value:ee.ScheduleType.ROUTINE},{text:"M\u1ED9t l\u1EA7n",value:ee.ScheduleType.ONE_TIME},{text:"Kh\u1EA9n c\u1EA5p",value:ee.ScheduleType.EMERGENCY}],onFilter:(e,t)=>t.type===e,render:e=>{switch(e){case ee.ScheduleType.ROUTINE:return(0,l.jsx)(ef.default,{color:"blue",children:"\u0110\u1ECBnh k\u1EF3"});case ee.ScheduleType.ONE_TIME:return(0,l.jsx)(ef.default,{children:"M\u1ED9t l\u1EA7n"});case ee.ScheduleType.EMERGENCY:return(0,l.jsx)(ef.default,{color:"red",icon:(0,l.jsx)(e0,{}),children:"Kh\u1EA9n c\u1EA5p"});default:return(0,l.jsx)(ef.default,{children:e});}}},{title:"Tr\u1EA1ng th\xe1i",dataIndex:"status",key:"status",width:130,filters:[{text:"Nh\xe1p",value:ee.ScheduleStatus.DRAFT},{text:"Ch\u1EDD duy\u1EC7t",value:ee.ScheduleStatus.PENDING_APPROVAL},{text:"S\u1EB5n s\xe0ng",value:ee.ScheduleStatus.READY},{text:"\u0110ang ch\u1EA1y",value:ee.ScheduleStatus.RUNNING},{text:"\u0110\xe3 ho\xe0n th\xe0nh",value:ee.ScheduleStatus.COMPLETED},{text:"\u0110\xe3 duy\u1EC7t",value:ee.ScheduleStatus.APPROVED},{text:"\u0110\xe3 h\u1EE7y",value:ee.ScheduleStatus.CANCELED},{text:"T\u1EEB ch\u1ED1i",value:ee.ScheduleStatus.REJECTED}],onFilter:(e,t)=>t.status===e,render:e=>{let t={[ee.ScheduleStatus.DRAFT]:{color:"default",text:"Nh\xe1p"},[ee.ScheduleStatus.PENDING_APPROVAL]:{color:"orange",text:"Ch\u1EDD duy\u1EC7t"},[ee.ScheduleStatus.READY]:{color:"cyan",text:"S\u1EB5n s\xe0ng"},[ee.ScheduleStatus.RUNNING]:{color:"green",text:"\u0110ang ch\u1EA1y"},[ee.ScheduleStatus.COMPLETED]:{color:"blue",text:"\u0110\xe3 ho\xe0n th\xe0nh"},[ee.ScheduleStatus.APPROVED]:{color:"blue",text:"\u0110\xe3 duy\u1EC7t"},[ee.ScheduleStatus.CANCELED]:{color:"default",text:"\u0110\xe3 h\u1EE7y"},[ee.ScheduleStatus.REJECTED]:{color:"red",text:"T\u1EEB ch\u1ED1i"}}[e];return(0,l.jsx)(ef.default,{color:t.color,children:t.text});}},{title:"\u01AFu ti\xean",dataIndex:"priority",key:"priority",width:100,sorter:(e,t)=>t.priority-e.priority,render:e=>e>=8?(0,l.jsx)(q.default,{count:e,style:{backgroundColor:"#f5222d"},children:(0,l.jsx)(ef.default,{color:"red",icon:(0,l.jsx)(e0,{}),children:"Cao"})}):e>=5?(0,l.jsx)(ef.default,{color:"orange",children:"TB"}):(0,l.jsx)("span",{className:"text-gray-400",children:e})},{title:"Th\u1EDDi gian b\u1EAFt \u0111\u1EA7u",dataIndex:"startTime",key:"startTime",width:150,sorter:(e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime(),defaultSortOrder:"descend",render:e=>(0,l.jsx)("span",{children:(0,ej.default)(e).format("DD/MM/YYYY HH:mm")})},{title:"Th\u1EDDi gian k\u1EBFt th\xfac",dataIndex:"endTime",key:"endTime",width:150,render:e=>e?(0,l.jsx)("span",{children:(0,ej.default)(e).format("DD/MM/YYYY HH:mm")}):(0,l.jsx)("span",{className:"text-gray-400",children:"-"})},{title:"Th\u1EDDi l\u01B0\u1EE3ng",key:"duration",width:100,render:(e,t)=>{if(!t.endTime)return(0,l.jsx)("span",{className:"text-gray-400",children:"-"});let n=(0,ej.default)(t.endTime).diff((0,ej.default)(t.startTime),"minute");return(0,l.jsxs)("span",{children:[n," ph\xfat"]});}},{title:"Ngu\u1ED3n ph\xe1t",dataIndex:"sourceType",key:"sourceType",width:150,filters:[{text:"File \xe2m thanh",value:ee.ScheduleSourceType.FILE},{text:"Ti\u1EBFp s\xf3ng",value:ee.ScheduleSourceType.STREAM},{text:"TTS",value:ee.ScheduleSourceType.TTS},{text:"Relay",value:ee.ScheduleSourceType.RELAY}],onFilter:(e,t)=>t.sourceType===e,render:e=>{let t={[ee.ScheduleSourceType.FILE]:{icon:(0,l.jsx)(E.default,{}),text:"File \xe2m thanh"},[ee.ScheduleSourceType.STREAM]:{icon:(0,l.jsx)(e4.default,{}),text:"Ti\u1EBFp s\xf3ng"},[ee.ScheduleSourceType.TTS]:{icon:(0,l.jsx)(e7.default,{}),text:"TTS"},[ee.ScheduleSourceType.RELAY]:{icon:(0,l.jsx)(tn,{}),text:"Relay",color:"purple"}}[e];return(0,l.jsxs)("span",{children:[t.icon," ",(0,l.jsx)("span",{className:"ml-1",children:t.text})]});}},{title:"Ph\u1EA1m vi",key:"target",width:120,render:(e,t)=>{let n=t.targetUnitIds.length,r=t.targetDeviceIds.length,i=n+r;if(0===i)return(0,l.jsx)(ef.default,{color:"blue",children:"To\xe0n h\u1EC7 th\u1ED1ng"});let s=o.mockUnits.getAll(),a=t.targetUnitIds.map(e=>{let t=s.find(t=>t.id===e);return(null==t?void 0:t.name)||e;}).slice(0,10),c=ez.mockDevices.getAll(),d=t.targetDeviceIds.map(e=>{let t=c.find(t=>t.id===e);return(null==t?void 0:t.name)||e;}).slice(0,10),u=(0,l.jsxs)("div",{className:"max-h-60 overflow-y-auto",children:[n>0&&(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsxs)("div",{className:"font-semibold text-blue-300 mb-1",children:["\u{1F4CD} \u0110\u01A1n v\u1ECB (",n,"):"]}),(0,l.jsxs)("ul",{className:"list-disc list-inside text-xs space-y-0.5",children:[a.map((e,t)=>(0,l.jsx)("li",{children:e},t)),n>10&&(0,l.jsxs)("li",{className:"text-gray-400",children:["... v\xe0 ",n-10," \u0111\u01A1n v\u1ECB kh\xe1c"]})]})]}),r>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"font-semibold text-green-300 mb-1",children:["\u{1F4E1} Thi\u1EBFt b\u1ECB (",r,"):"]}),(0,l.jsxs)("ul",{className:"list-disc list-inside text-xs space-y-0.5",children:[d.map((e,t)=>(0,l.jsx)("li",{children:e},t)),r>10&&(0,l.jsxs)("li",{className:"text-gray-400",children:["... v\xe0 ",r-10," thi\u1EBFt b\u1ECB kh\xe1c"]})]})]})]});return(0,l.jsx)(n7.default,{title:u,overlayStyle:{maxWidth:400},children:(0,l.jsxs)(ef.default,{children:[i," \u0111i\u1EC3m ph\xe1t"]})});}},{title:"Ng\xe0y t\u1EA1o",dataIndex:"createdAt",key:"createdAt",width:120,sorter:(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),render:e=>(0,l.jsx)("span",{children:(0,ej.default)(e).format("DD/MM/YYYY")})},{title:"Thao t\xe1c",key:"action",width:80,align:"center",fixed:"right",render:(e,t)=>(0,l.jsx)(ae.default,{menu:{items:w(t),onClick:e=>T(e.key,t)},trigger:["click"],children:(0,l.jsx)(W.default,{size:"small",children:(0,l.jsx)(s7.default,{})})})}];return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,l.jsx)(ij.default.Search,{placeholder:"T\xecm ki\u1EBFm theo t\xean, m\xf4 t\u1EA3, ID...",value:g,onChange:e=>v(e.target.value),onSearch:v,style:{width:350},allowClear:!0}),p.length>0&&(0,l.jsxs)(eU.default,{children:[(0,l.jsxs)("span",{className:"text-gray-600",children:["\u0110\xe3 ch\u1ECDn ",p.length," m\u1EE5c"]}),(0,l.jsx)(W.default,{danger:!0,icon:(0,l.jsx)(sz.default,{}),onClick:()=>{Q.default.confirm({title:`X\xf3a ${p.length} l\u{1ECB}ch ph\xe1t?`,content:"B\u1EA1n c\xf3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xf3a c\xe1c l\u1ECBch \u0111\xe3 ch\u1ECDn? H\xe0nh \u0111\u1ED9ng n\xe0y kh\xf4ng th\u1EC3 ho\xe0n t\xe1c.",okText:"X\xf3a",okType:"danger",cancelText:"H\u1EE7y",onOk:()=>{h.mutate(p),m([]);}});},children:"X\xf3a \u0111\xe3 ch\u1ECDn"}),(0,l.jsx)(W.default,{onClick:()=>m([]),children:"B\u1ECF ch\u1ECDn"})]})]}),(0,l.jsx)(eR.default,{dataSource:S,columns:C,rowKey:"id",loading:s,rowSelection:{selectedRowKeys:p,onChange:e=>m(e),getCheckboxProps:e=>({disabled:[ee.ScheduleStatus.COMPLETED,ee.ScheduleStatus.CANCELED,ee.ScheduleStatus.RUNNING].includes(e.status)})},scroll:{x:1800},pagination:{pageSize:20,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:e=>`T\u{1ED5}ng ${e} l\u{1ECB}ch ph\xe1t`},size:"small"})]});},ad=e=>{let t=new Set,n=[];for(let r of e){let e=[r.scheduleId,r.conflictingScheduleId].sort().join("-");t.has(e)||(t.add(e),n.push(r));}return n;},au=()=>{let{data:e,isLoading:t}=rk();return rM({queryKey:["conflicts",null==e?void 0:e.length],queryFn:()=>{if(!e||0===e.length)return[];let t=[];return e.forEach(n=>{let r=function(e,t){let n=[];for(let r of t){if(e.id===r.id||["CANCELED","REJECTED","DRAFT"].includes(e.status)||["CANCELED","REJECTED","DRAFT"].includes(r.status))continue;let t=function(e,t,n,r){let i=new Date(e).getTime(),s=t?new Date(t).getTime():i+36e5,a=new Date(n).getTime();return i<(r?new Date(r).getTime():a+36e5)&&a<s;}(e.startTime,e.endTime,r.startTime,r.endTime);if(!t)continue;let i=function(e,t){let n=e.targetUnitIds.some(e=>t.targetUnitIds.includes(e)),r=e.targetDeviceIds.some(e=>t.targetDeviceIds.includes(e));return n||r;}(e,r);if(!i)continue;let s="TIME_OVERLAP",a="MEDIUM",l="";e.sourceType===ee.ScheduleSourceType.RELAY&&r.sourceType!==ee.ScheduleSourceType.RELAY?(s="RELAY_OVERRIDE",a="HIGH",l=`L\u{1ECB}ch ti\u{1EBF}p s\xf3ng t\u{1EEB} c\u{1EA5}p tr\xean s\u{1EBD} ghi \u{111}\xe8 l\u{1ECB}ch c\u{1EE5}c b\u{1ED9} "${r.title}"`):r.sourceType===ee.ScheduleSourceType.RELAY&&e.sourceType!==ee.ScheduleSourceType.RELAY?(s="RELAY_OVERRIDE",a="HIGH",l=`L\u{1ECB}ch c\u{1EE5}c b\u{1ED9} s\u{1EBD} b\u{1ECB} ghi \u{111}\xe8 b\u{1EDF}i l\u{1ECB}ch ti\u{1EBF}p s\xf3ng "${r.title}"`):i&&t?(s="DEVICE_OVERLAP",a="HIGH",l=`Tr\xf9ng th\u{1EDD}i gian v\xe0 thi\u{1EBF}t b\u{1ECB} v\u{1EDB}i l\u{1ECB}ch "${r.title}"`):l=`Tr\xf9ng th\u{1EDD}i gian v\u{1EDB}i l\u{1ECB}ch "${r.title}"`,n.push({scheduleId:e.id,conflictingScheduleId:r.id,reason:s,severity:a,description:l});}return n;}(n,e);t.push(...r);}),ad(t);},enabled:!t&&!!e&&e.length>0,staleTime:3e4});},ah=new z,ap=({onClick:e})=>{let{data:t}=au(),n=(null==t?void 0:t.length)||0,r=(null==t?void 0:t.filter(e=>"HIGH"===e.severity).length)||0;return(0,l.jsx)(q.default,{count:n,offset:[10,0],showZero:!1,className:"mr-4",children:(0,l.jsx)(W.default,{icon:(0,l.jsx)(w,{}),onClick:e,danger:r>0,children:"C\u1EA3nh b\xe1o xung \u0111\u1ED9t"})});},af=()=>{let[e,t]=(0,f.useState)(!1),[n,r]=(0,f.useState)(void 0),[i,s]=(0,f.useState)(!1),[a,u]=(0,f.useState)(!1),[h,p]=(0,f.useState)(!1),[m,g]=(0,f.useState)(!1),[v,y]=(0,f.useState)(void 0),[x,T]=(0,f.useState)(null),[w,C]=(0,f.useState)("table"),[D,I]=(0,f.useState)("all"),{data:N}=rk(),{data:M}=au(),k=(0,f.useMemo)(()=>(0,d.buildTree)(o.mockUnits.getAll().filter(e=>e.type!==c.UnitType.EMPLOYEE)),[]);return(0,l.jsxs)(O.PageContainer,{title:"Qu\u1EA3n l\xfd l\u1ECBch ph\xe1t",extra:[(0,l.jsx)(ap,{onClick:()=>u(!0)},"conflicts"),(0,l.jsx)(W.default,{icon:(0,l.jsx)(R,{}),onClick:()=>s(!0),className:"mr-4",children:"Danh s\xe1ch ch\u1EDD duy\u1EC7t"},"approval"),(0,l.jsx)(W.default,{type:"primary",danger:!0,icon:(0,l.jsx)(E.default,{}),onClick:()=>p(!0),className:"mr-4",children:"Ph\xe1t tr\u1EF1c ti\u1EBFp"},"live-broadcast"),(0,l.jsx)(W.default,{type:"primary",icon:(0,l.jsx)(j.default,{}),onClick:()=>t(!0),children:"T\u1EA1o l\u1ECBch m\u1EDBi"},"create")],children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-4",children:[(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,l.jsx)(X.default,{value:D,onChange:e=>I(e),options:[{label:"T\u1EA5t c\u1EA3",value:"all"},{label:"\u0110\u01A1n v\u1ECB",value:"unit"},{label:"Ti\u1EBFp s\xf3ng",value:"relay"}]}),(0,l.jsx)(J.default,{showSearch:!0,style:{width:300},value:x,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ECDn \u0111\u01A1n v\u1ECB qu\u1EA3n l\xfd",allowClear:!0,treeDefaultExpandAll:!0,onChange:T,treeData:k})]}),(0,l.jsx)(X.default,{value:w,onChange:e=>C(e),options:[{label:"L\u1ECBch bi\u1EC3u",value:"calendar",icon:(0,l.jsx)(b,{})},{label:"Danh s\xe1ch",value:"table",icon:(0,l.jsx)(S.default,{})}]})]}),"calendar"===w?(0,l.jsx)(rA,{onEdit:e=>{r(null==N?void 0:N.find(t=>t.id===e)),t(!0);},selectedUnitId:x,scheduleFilter:D}):(0,l.jsx)(ac,{onEdit:e=>{r(e),t(!0);},onView:e=>{y(e),g(!0);},selectedUnitId:x,scheduleFilter:D}),(0,l.jsx)(s8,{open:e,initialValues:n,onCancel:()=>{t(!1),r(void 0);},onSubmit:e=>{console.log("Submit:",e),t(!1),r(void 0);}}),(0,l.jsx)(Q.default,{title:"Duy\u1EC7t l\u1ECBch ch\u1EDD",open:i,onCancel:()=>s(!1),footer:null,width:700,children:(0,l.jsx)(eg,{})}),(0,l.jsx)(Q.default,{title:"Danh s\xe1ch l\u1ECBch xung \u0111\u1ED9t",open:a,onCancel:()=>u(!1),footer:null,width:900,children:(0,l.jsx)(eO,{conflicts:M||[],schedules:N||[]})}),(0,l.jsx)(eB,{open:h,onClose:()=>p(!1)}),(0,l.jsx)(iy,{open:m,schedule:v||null,onClose:()=>{g(!1),y(void 0);},onEdit:e=>{r(e),t(!0);}})]});},am=()=>(0,l.jsx)($.QueryClientProvider,{client:ah,children:(0,l.jsx)(af,{})});},d33cbaa1:function(e,t,n){"use strict";var r,i,s,a,l,o;n.d(t,"__esModule",{value:!0}),n.e(t,{ScheduleSourceType:function(){return i;},ScheduleStatus:function(){return s;},ScheduleType:function(){return r;}}),(a=r||(r={})).ROUTINE="ROUTINE",a.ONE_TIME="ONE_TIME",a.EMERGENCY="EMERGENCY",(l=i||(i={})).FILE="FILE",l.STREAM="STREAM",l.TTS="TTS",l.RELAY="RELAY",(o=s||(s={})).DRAFT="DRAFT",o.PENDING_APPROVAL="PENDING_APPROVAL",o.READY="READY",o.RUNNING="RUNNING",o.COMPLETED="COMPLETED",o.CANCELED="CANCELED",o.APPROVED="APPROVED",o.REJECTED="REJECTED";}}]);
//# sourceMappingURL=d1c1e5fb-async.14a5690e.js.map